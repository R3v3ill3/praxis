{"version":3,"file":"OnboardingChat-B71CcmSE.js","sources":["../../src/pages/OnboardingChat.jsx"],"sourcesContent":["// OnboardingChat.jsx (fully featured)\nimport React, { useEffect, useRef, useState } from 'react';\nimport { getAuth } from 'firebase/auth';\nimport { useNavigate, useLocation } from 'react-router-dom';\n\nexport default function OnboardingChat() {\n  const location = useLocation();\n  const [stepIndex, setStepIndex] = useState(0);\n  const [answers, setAnswers] = useState(location.state?.answers || {});\n  const [multiSelect, setMultiSelect] = useState([]);\n  const [awaitingOtherInput, setAwaitingOtherInput] = useState(false);\n  const [otherInput, setOtherInput] = useState('');\n  const scrollRef = useRef(null);\n  const navigate = useNavigate();\n  const auth = getAuth();\n\n  const steps = [\n    {\n      key: 'org_type',\n      question: 'What type of organisation are you?',\n      required: true,\n      options: ['Union', 'NGO', 'Political Party', 'Community Group', 'Social Enterprise', 'Other'],\n    },\n    {\n      key: 'scale',\n      question: 'What is your operational scale?',\n      required: true,\n      options: ['Local', 'Statewide', 'National', 'International', 'Federation with Local Branches', 'Other'],\n    },\n    {\n      key: 'membership_size',\n      question: 'How many members/supporters do you have?',\n      required: false,\n      options: ['<100', '100–1000', '1000–5000', '5000–10,000', '10,000+'],\n    },\n    {\n      key: 'campaign_budget',\n      question: 'Typical campaign budget range?',\n      required: false,\n      options: ['Under $5,000', '$5,000–$20,000', '$20,000–$100,000', 'Over $100,000'],\n    },\n    {\n      key: 'staff_count',\n      question: 'How many paid staff?',\n      required: false,\n      options: ['0', '1–5', '6–20', '21–100', '100+'],\n    },\n    {\n      key: 'volunteer_count',\n      question: 'How many active volunteers?',\n      required: false,\n      options: ['0', '1–10', '11–50', '51–200', '200+'],\n    },\n    {\n      key: 'tech_stack',\n      question: 'Which campaign tools do you use? (Select all that apply, then press Submit)',\n      required: false,\n      multi: true,\n      options: [\n        'Action Network', 'Yabbr', 'NationBuilder', 'Mailchimp', 'Hootsuite',\n        'Canva', 'HubSpot', 'Zoho Campaigns', 'Other',\n      ],\n    },\n  ];\n\n  const currentStep = steps[stepIndex];\n\n  const handleSingleSelect = (value) => {\n    if (value === 'Other') {\n      setAwaitingOtherInput(true);\n    } else {\n      updateAnswer(currentStep.key, value);\n    }\n  };\n\n  const handleOtherSubmit = () => {\n    if (otherInput.trim()) {\n      updateAnswer(currentStep.key, otherInput.trim());\n      setOtherInput('');\n      setAwaitingOtherInput(false);\n    }\n  };\n\n  const handleMultiToggle = (value) => {\n    setMultiSelect(prev =>\n      prev.includes(value) ? prev.filter(v => v !== value) : [...prev, value]\n    );\n  };\n\n  const handleMultiSubmit = () => {\n    const final = multiSelect.includes('Other') && otherInput.trim()\n      ? [...multiSelect.filter(v => v !== 'Other'), otherInput.trim()]\n      : multiSelect;\n    updateAnswer(currentStep.key, final);\n    setMultiSelect([]);\n    setOtherInput('');\n    setAwaitingOtherInput(false);\n  };\n\n  const updateAnswer = (key, value) => {\n    const updated = { ...answers, [key]: value };\n    setAnswers(updated);\n    if (stepIndex + 1 < steps.length) {\n      setStepIndex(stepIndex + 1);\n    } else {\n      navigate('/onboarding/summary', { state: { answers: updated } });\n    }\n  };\n\n  return (\n    <div className=\"p-4 max-w-xl mx-auto\">\n      <h2 className=\"text-xl font-bold mb-4\">Onboarding</h2>\n      <p className=\"mb-4\">{currentStep.question}</p>\n      <div className=\"space-y-2\">\n        {currentStep.multi ? (\n          <>\n            {currentStep.options.map(opt => (\n              <button\n                key={opt}\n                className={`block w-full text-left px-4 py-2 border rounded ${\n                  multiSelect.includes(opt) ? 'bg-blue-600 text-white' : 'bg-gray-100'\n                }`}\n                onClick={() => handleMultiToggle(opt)}\n              >\n                {opt}\n              </button>\n            ))}\n            {multiSelect.includes('Other') && (\n              <input\n                className=\"w-full mt-2 p-2 border rounded\"\n                value={otherInput}\n                onChange={e => setOtherInput(e.target.value)}\n                placeholder=\"Please specify\"\n              />\n            )}\n            <button\n              className=\"mt-4 px-4 py-2 bg-green-600 text-white rounded\"\n              onClick={handleMultiSubmit}\n            >\n              Submit\n            </button>\n          </>\n        ) : awaitingOtherInput ? (\n          <>\n            <input\n              className=\"w-full p-2 border rounded\"\n              value={otherInput}\n              onChange={e => setOtherInput(e.target.value)}\n              placeholder=\"Please specify\"\n            />\n            <button\n              className=\"mt-2 px-4 py-2 bg-green-600 text-white rounded\"\n              onClick={handleOtherSubmit}\n            >\n              Continue\n            </button>\n          </>\n        ) : (\n          currentStep.options.map(opt => (\n            <button\n              key={opt}\n              className=\"block w-full text-left px-4 py-2 border rounded bg-gray-100 hover:bg-blue-100\"\n              onClick={() => handleSingleSelect(opt)}\n            >\n              {opt}\n            </button>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["OnboardingChat","location","useLocation","stepIndex","setStepIndex","useState","answers","setAnswers","_a","multiSelect","setMultiSelect","awaitingOtherInput","setAwaitingOtherInput","otherInput","setOtherInput","useRef","navigate","useNavigate","getAuth","steps","currentStep","handleSingleSelect","value","updateAnswer","handleOtherSubmit","handleMultiToggle","prev","v","handleMultiSubmit","final","key","updated","jsxs","jsx","Fragment","opt"],"mappings":"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"}