function sT(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Bv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dd={exports:{}},za={},Ld={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jg;function oT(){if(jg)return xe;jg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function R(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,V={};function P(F,G,me){this.props=F,this.context=G,this.refs=V,this.updater=me||D}P.prototype.isReactComponent={},P.prototype.setState=function(F,G){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,G,"setState")},P.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function W(){}W.prototype=P.prototype;function Y(F,G,me){this.props=F,this.context=G,this.refs=V,this.updater=me||D}var Z=Y.prototype=new W;Z.constructor=Y,b(Z,P.prototype),Z.isPureReactComponent=!0;var ne=Array.isArray,fe=Object.prototype.hasOwnProperty,pe={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(F,G,me){var Ce,ke={},De=null,Ue=null;if(G!=null)for(Ce in G.ref!==void 0&&(Ue=G.ref),G.key!==void 0&&(De=""+G.key),G)fe.call(G,Ce)&&!x.hasOwnProperty(Ce)&&(ke[Ce]=G[Ce]);var je=arguments.length-2;if(je===1)ke.children=me;else if(1<je){for(var qe=Array(je),wt=0;wt<je;wt++)qe[wt]=arguments[wt+2];ke.children=qe}if(F&&F.defaultProps)for(Ce in je=F.defaultProps,je)ke[Ce]===void 0&&(ke[Ce]=je[Ce]);return{$$typeof:n,type:F,key:De,ref:Ue,props:ke,_owner:pe.current}}function C(F,G){return{$$typeof:n,type:F.type,key:G,ref:F.ref,props:F.props,_owner:F._owner}}function N(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function L(F){var G={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(me){return G[me]})}var U=/\/+/g;function A(F,G){return typeof F=="object"&&F!==null&&F.key!=null?L(""+F.key):G.toString(36)}function it(F,G,me,Ce,ke){var De=typeof F;(De==="undefined"||De==="boolean")&&(F=null);var Ue=!1;if(F===null)Ue=!0;else switch(De){case"string":case"number":Ue=!0;break;case"object":switch(F.$$typeof){case n:case e:Ue=!0}}if(Ue)return Ue=F,ke=ke(Ue),F=Ce===""?"."+A(Ue,0):Ce,ne(ke)?(me="",F!=null&&(me=F.replace(U,"$&/")+"/"),it(ke,G,me,"",function(wt){return wt})):ke!=null&&(N(ke)&&(ke=C(ke,me+(!ke.key||Ue&&Ue.key===ke.key?"":(""+ke.key).replace(U,"$&/")+"/")+F)),G.push(ke)),1;if(Ue=0,Ce=Ce===""?".":Ce+":",ne(F))for(var je=0;je<F.length;je++){De=F[je];var qe=Ce+A(De,je);Ue+=it(De,G,me,qe,ke)}else if(qe=R(F),typeof qe=="function")for(F=qe.call(F),je=0;!(De=F.next()).done;)De=De.value,qe=Ce+A(De,je++),Ue+=it(De,G,me,qe,ke);else if(De==="object")throw G=String(F),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ue}function Ot(F,G,me){if(F==null)return F;var Ce=[],ke=0;return it(F,Ce,"","",function(De){return G.call(me,De,ke++)}),Ce}function Dt(F){if(F._status===-1){var G=F._result;G=G(),G.then(function(me){(F._status===0||F._status===-1)&&(F._status=1,F._result=me)},function(me){(F._status===0||F._status===-1)&&(F._status=2,F._result=me)}),F._status===-1&&(F._status=0,F._result=G)}if(F._status===1)return F._result.default;throw F._result}var $e={current:null},se={transition:null},ge={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:se,ReactCurrentOwner:pe};function ae(){throw Error("act(...) is not supported in production builds of React.")}return xe.Children={map:Ot,forEach:function(F,G,me){Ot(F,function(){G.apply(this,arguments)},me)},count:function(F){var G=0;return Ot(F,function(){G++}),G},toArray:function(F){return Ot(F,function(G){return G})||[]},only:function(F){if(!N(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},xe.Component=P,xe.Fragment=t,xe.Profiler=o,xe.PureComponent=Y,xe.StrictMode=i,xe.Suspense=p,xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ge,xe.act=ae,xe.cloneElement=function(F,G,me){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Ce=b({},F.props),ke=F.key,De=F.ref,Ue=F._owner;if(G!=null){if(G.ref!==void 0&&(De=G.ref,Ue=pe.current),G.key!==void 0&&(ke=""+G.key),F.type&&F.type.defaultProps)var je=F.type.defaultProps;for(qe in G)fe.call(G,qe)&&!x.hasOwnProperty(qe)&&(Ce[qe]=G[qe]===void 0&&je!==void 0?je[qe]:G[qe])}var qe=arguments.length-2;if(qe===1)Ce.children=me;else if(1<qe){je=Array(qe);for(var wt=0;wt<qe;wt++)je[wt]=arguments[wt+2];Ce.children=je}return{$$typeof:n,type:F.type,key:ke,ref:De,props:Ce,_owner:Ue}},xe.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},xe.createElement=I,xe.createFactory=function(F){var G=I.bind(null,F);return G.type=F,G},xe.createRef=function(){return{current:null}},xe.forwardRef=function(F){return{$$typeof:d,render:F}},xe.isValidElement=N,xe.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Dt}},xe.memo=function(F,G){return{$$typeof:y,type:F,compare:G===void 0?null:G}},xe.startTransition=function(F){var G=se.transition;se.transition={};try{F()}finally{se.transition=G}},xe.unstable_act=ae,xe.useCallback=function(F,G){return $e.current.useCallback(F,G)},xe.useContext=function(F){return $e.current.useContext(F)},xe.useDebugValue=function(){},xe.useDeferredValue=function(F){return $e.current.useDeferredValue(F)},xe.useEffect=function(F,G){return $e.current.useEffect(F,G)},xe.useId=function(){return $e.current.useId()},xe.useImperativeHandle=function(F,G,me){return $e.current.useImperativeHandle(F,G,me)},xe.useInsertionEffect=function(F,G){return $e.current.useInsertionEffect(F,G)},xe.useLayoutEffect=function(F,G){return $e.current.useLayoutEffect(F,G)},xe.useMemo=function(F,G){return $e.current.useMemo(F,G)},xe.useReducer=function(F,G,me){return $e.current.useReducer(F,G,me)},xe.useRef=function(F){return $e.current.useRef(F)},xe.useState=function(F){return $e.current.useState(F)},xe.useSyncExternalStore=function(F,G,me){return $e.current.useSyncExternalStore(F,G,me)},xe.useTransition=function(){return $e.current.useTransition()},xe.version="18.3.1",xe}var Bg;function Mf(){return Bg||(Bg=1,Ld.exports=oT()),Ld.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function aT(){if(zg)return za;zg=1;var n=Mf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,p,y){var _,E={},R=null,D=null;y!==void 0&&(R=""+y),p.key!==void 0&&(R=""+p.key),p.ref!==void 0&&(D=p.ref);for(_ in p)i.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(d&&d.defaultProps)for(_ in p=d.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:d,key:R,ref:D,props:E,_owner:o.current}}return za.Fragment=t,za.jsx=c,za.jsxs=c,za}var $g;function lT(){return $g||($g=1,Dd.exports=aT()),Dd.exports}var M=lT(),Q=Mf();const rn=Bv(Q),uT=sT({__proto__:null,default:rn},[Q]);var Hu={},Vd={exports:{}},tn={},Md={exports:{}},Fd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function cT(){return Hg||(Hg=1,function(n){function e(se,ge){var ae=se.length;se.push(ge);e:for(;0<ae;){var F=ae-1>>>1,G=se[F];if(0<o(G,ge))se[F]=ge,se[ae]=G,ae=F;else break e}}function t(se){return se.length===0?null:se[0]}function i(se){if(se.length===0)return null;var ge=se[0],ae=se.pop();if(ae!==ge){se[0]=ae;e:for(var F=0,G=se.length,me=G>>>1;F<me;){var Ce=2*(F+1)-1,ke=se[Ce],De=Ce+1,Ue=se[De];if(0>o(ke,ae))De<G&&0>o(Ue,ke)?(se[F]=Ue,se[De]=ae,F=De):(se[F]=ke,se[Ce]=ae,F=Ce);else if(De<G&&0>o(Ue,ae))se[F]=Ue,se[De]=ae,F=De;else break e}}return ge}function o(se,ge){var ae=se.sortIndex-ge.sortIndex;return ae!==0?ae:se.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var p=[],y=[],_=1,E=null,R=3,D=!1,b=!1,V=!1,P=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(se){for(var ge=t(y);ge!==null;){if(ge.callback===null)i(y);else if(ge.startTime<=se)i(y),ge.sortIndex=ge.expirationTime,e(p,ge);else break;ge=t(y)}}function ne(se){if(V=!1,Z(se),!b)if(t(p)!==null)b=!0,Dt(fe);else{var ge=t(y);ge!==null&&$e(ne,ge.startTime-se)}}function fe(se,ge){b=!1,V&&(V=!1,W(I),I=-1),D=!0;var ae=R;try{for(Z(ge),E=t(p);E!==null&&(!(E.expirationTime>ge)||se&&!L());){var F=E.callback;if(typeof F=="function"){E.callback=null,R=E.priorityLevel;var G=F(E.expirationTime<=ge);ge=n.unstable_now(),typeof G=="function"?E.callback=G:E===t(p)&&i(p),Z(ge)}else i(p);E=t(p)}if(E!==null)var me=!0;else{var Ce=t(y);Ce!==null&&$e(ne,Ce.startTime-ge),me=!1}return me}finally{E=null,R=ae,D=!1}}var pe=!1,x=null,I=-1,C=5,N=-1;function L(){return!(n.unstable_now()-N<C)}function U(){if(x!==null){var se=n.unstable_now();N=se;var ge=!0;try{ge=x(!0,se)}finally{ge?A():(pe=!1,x=null)}}else pe=!1}var A;if(typeof Y=="function")A=function(){Y(U)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,Ot=it.port2;it.port1.onmessage=U,A=function(){Ot.postMessage(null)}}else A=function(){P(U,0)};function Dt(se){x=se,pe||(pe=!0,A())}function $e(se,ge){I=P(function(){se(n.unstable_now())},ge)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){b||D||(b=!0,Dt(fe))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return R},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(R){case 1:case 2:case 3:var ge=3;break;default:ge=R}var ae=R;R=ge;try{return se()}finally{R=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,ge){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ae=R;R=se;try{return ge()}finally{R=ae}},n.unstable_scheduleCallback=function(se,ge,ae){var F=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?F+ae:F):ae=F,se){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,se={id:_++,callback:ge,priorityLevel:se,startTime:ae,expirationTime:G,sortIndex:-1},ae>F?(se.sortIndex=ae,e(y,se),t(p)===null&&se===t(y)&&(V?(W(I),I=-1):V=!0,$e(ne,ae-F))):(se.sortIndex=G,e(p,se),b||D||(b=!0,Dt(fe))),se},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(se){var ge=R;return function(){var ae=R;R=ge;try{return se.apply(this,arguments)}finally{R=ae}}}}(Fd)),Fd}var qg;function hT(){return qg||(qg=1,Md.exports=cT()),Md.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function dT(){if(Wg)return tn;Wg=1;var n=Mf(),e=hT();function t(r){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(r,s){c(r,s),c(r+"Capture",s)}function c(r,s){for(o[r]=s,r=0;r<s.length;r++)i.add(s[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function R(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function D(r,s,a,h){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function b(r,s,a,h){if(s===null||typeof s>"u"||D(r,s,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function V(r,s,a,h,f,g,w){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=h,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=s,this.sanitizeURL=g,this.removeEmptyString=w}var P={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){P[r]=new V(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var s=r[0];P[s]=new V(s,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){P[r]=new V(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){P[r]=new V(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){P[r]=new V(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){P[r]=new V(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){P[r]=new V(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){P[r]=new V(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){P[r]=new V(r,5,!1,r.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function Y(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var s=r.replace(W,Y);P[s]=new V(s,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var s=r.replace(W,Y);P[s]=new V(s,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var s=r.replace(W,Y);P[s]=new V(s,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){P[r]=new V(r,1,!1,r.toLowerCase(),null,!1,!1)}),P.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){P[r]=new V(r,1,!1,r.toLowerCase(),null,!0,!0)});function Z(r,s,a,h){var f=P.hasOwnProperty(s)?P[s]:null;(f!==null?f.type!==0:h||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(b(s,a,f,h)&&(a=null),h||f===null?R(s)&&(a===null?r.removeAttribute(s):r.setAttribute(s,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(s=f.attributeName,h=f.attributeNamespace,a===null?r.removeAttribute(s):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,h?r.setAttributeNS(h,s,a):r.setAttribute(s,a))))}var ne=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),pe=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),L=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),it=Symbol.for("react.suspense_list"),Ot=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),se=Symbol.iterator;function ge(r){return r===null||typeof r!="object"?null:(r=se&&r[se]||r["@@iterator"],typeof r=="function"?r:null)}var ae=Object.assign,F;function G(r){if(F===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);F=s&&s[1]||""}return`
`+F+r}var me=!1;function Ce(r,s){if(!r||me)return"";me=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch($){var h=$}Reflect.construct(r,[],s)}else{try{s.call()}catch($){h=$}r.call(s.prototype)}else{try{throw Error()}catch($){h=$}r()}}catch($){if($&&h&&typeof $.stack=="string"){for(var f=$.stack.split(`
`),g=h.stack.split(`
`),w=f.length-1,S=g.length-1;1<=w&&0<=S&&f[w]!==g[S];)S--;for(;1<=w&&0<=S;w--,S--)if(f[w]!==g[S]){if(w!==1||S!==1)do if(w--,S--,0>S||f[w]!==g[S]){var k=`
`+f[w].replace(" at new "," at ");return r.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",r.displayName)),k}while(1<=w&&0<=S);break}}}finally{me=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?G(r):""}function ke(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=Ce(r.type,!1),r;case 11:return r=Ce(r.type.render,!1),r;case 1:return r=Ce(r.type,!0),r;default:return""}}function De(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case pe:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case it:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case N:return(r._context.displayName||"Context")+".Provider";case U:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Ot:return s=r.displayName||null,s!==null?s:De(r.type)||"Memo";case Dt:s=r._payload,r=r._init;try{return De(r(s))}catch{}}return null}function Ue(r){var s=r.type;switch(r.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=s.render,r=r.displayName||r.name||"",s.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(s);case 8:return s===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function qe(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function wt(r){var s=qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),h=""+r[s];if(!r.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return f.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function mr(r){r._valueTracker||(r._valueTracker=wt(r))}function Cs(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var a=s.getValue(),h="";return r&&(h=qe(r)?r.checked?"true":"false":r.value),r=h,r!==a?(s.setValue(r),!0):!1}function $r(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Li(r,s){var a=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ps(r,s){var a=s.defaultValue==null?"":s.defaultValue,h=s.checked!=null?s.checked:s.defaultChecked;a=je(s.value!=null?s.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Go(r,s){s=s.checked,s!=null&&Z(r,"checked",s,!1)}function Qo(r,s){Go(r,s);var a=je(s.value),h=s.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}s.hasOwnProperty("value")?ks(r,s.type,a):s.hasOwnProperty("defaultValue")&&ks(r,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(r.defaultChecked=!!s.defaultChecked)}function kl(r,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var h=s.type;if(!(h!=="submit"&&h!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+r._wrapperState.initialValue,a||s===r.value||(r.value=s),r.defaultValue=s}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ks(r,s,a){(s!=="number"||$r(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var gr=Array.isArray;function yr(r,s,a,h){if(r=r.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=s.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&h&&(r[a].defaultSelected=!0)}else{for(a=""+je(a),s=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,h&&(r[f].defaultSelected=!0);return}s!==null||r[f].disabled||(s=r[f])}s!==null&&(s.selected=!0)}}function Yo(r,s){if(s.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function xs(r,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(t(92));if(gr(a)){if(1<a.length)throw Error(t(93));a=a[0]}s=a}s==null&&(s=""),a=s}r._wrapperState={initialValue:je(a)}}function bs(r,s){var a=je(s.value),h=je(s.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),s.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Jo(r){var s=r.textContent;s===r._wrapperState.initialValue&&s!==""&&s!==null&&(r.value=s)}function dt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(r,s){return r==null||r==="http://www.w3.org/1999/xhtml"?dt(s):r==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var vr,Xo=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,h,f){MSApp.execUnsafeLocalFunction(function(){return r(s,a,h,f)})}:r}(function(r,s){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=s;else{for(vr=vr||document.createElement("div"),vr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=vr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;s.firstChild;)r.appendChild(s.firstChild)}});function Hr(r,s){if(s){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=s;return}}r.textContent=s}var Vi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Mi=["Webkit","ms","Moz","O"];Object.keys(Vi).forEach(function(r){Mi.forEach(function(s){s=s+r.charAt(0).toUpperCase()+r.substring(1),Vi[s]=Vi[r]})});function Zo(r,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||Vi.hasOwnProperty(r)&&Vi[r]?(""+s).trim():s+"px"}function ea(r,s){r=r.style;for(var a in s)if(s.hasOwnProperty(a)){var h=a.indexOf("--")===0,f=Zo(a,s[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,f):r[a]=f}}var ta=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function na(r,s){if(s){if(ta[r]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(t(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(t(61))}if(s.style!=null&&typeof s.style!="object")throw Error(t(62))}}function ra(r,s){if(r.indexOf("-")===-1)return typeof s.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fi=null;function Ns(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Os=null,mn=null,Qn=null;function Ds(r){if(r=Ca(r)){if(typeof Os!="function")throw Error(t(280));var s=r.stateNode;s&&(s=su(s),Os(r.stateNode,r.type,s))}}function Yn(r){mn?Qn?Qn.push(r):Qn=[r]:mn=r}function ia(){if(mn){var r=mn,s=Qn;if(Qn=mn=null,Ds(r),s)for(r=0;r<s.length;r++)Ds(s[r])}}function Ui(r,s){return r(s)}function sa(){}var _r=!1;function oa(r,s,a){if(_r)return r(s,a);_r=!0;try{return Ui(r,s,a)}finally{_r=!1,(mn!==null||Qn!==null)&&(sa(),ia())}}function st(r,s){var a=r.stateNode;if(a===null)return null;var h=su(a);if(h===null)return null;a=h[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,s,typeof a));return a}var Ls=!1;if(d)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Ls=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Ls=!1}function ji(r,s,a,h,f,g,w,S,k){var $=Array.prototype.slice.call(arguments,3);try{s.apply(a,$)}catch(X){this.onError(X)}}var Bi=!1,Vs=null,bn=!1,aa=null,lh={onError:function(r){Bi=!0,Vs=r}};function Ms(r,s,a,h,f,g,w,S,k){Bi=!1,Vs=null,ji.apply(lh,arguments)}function xl(r,s,a,h,f,g,w,S,k){if(Ms.apply(this,arguments),Bi){if(Bi){var $=Vs;Bi=!1,Vs=null}else throw Error(t(198));bn||(bn=!0,aa=$)}}function Nn(r){var s=r,a=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(a=s.return),r=s.return;while(r)}return s.tag===3?a:null}function zi(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function On(r){if(Nn(r)!==r)throw Error(t(188))}function bl(r){var s=r.alternate;if(!s){if(s=Nn(r),s===null)throw Error(t(188));return s!==r?null:r}for(var a=r,h=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(h=f.return,h!==null){a=h;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return On(f),r;if(g===h)return On(f),s;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=f,h=g;else{for(var w=!1,S=f.child;S;){if(S===a){w=!0,a=f,h=g;break}if(S===h){w=!0,h=f,a=g;break}S=S.sibling}if(!w){for(S=g.child;S;){if(S===a){w=!0,a=g,h=f;break}if(S===h){w=!0,h=g,a=f;break}S=S.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:s}function la(r){return r=bl(r),r!==null?Fs(r):null}function Fs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var s=Fs(r);if(s!==null)return s;r=r.sibling}return null}var Us=e.unstable_scheduleCallback,ua=e.unstable_cancelCallback,Nl=e.unstable_shouldYield,uh=e.unstable_requestPaint,We=e.unstable_now,Ol=e.unstable_getCurrentPriorityLevel,$i=e.unstable_ImmediatePriority,qr=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,ca=e.unstable_LowPriority,Dl=e.unstable_IdlePriority,Hi=null,an=null;function Ll(r){if(an&&typeof an.onCommitFiberRoot=="function")try{an.onCommitFiberRoot(Hi,r,void 0,(r.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:Ml,ha=Math.log,Vl=Math.LN2;function Ml(r){return r>>>=0,r===0?32:31-(ha(r)/Vl|0)|0}var js=64,Bs=4194304;function Wr(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qi(r,s){var a=r.pendingLanes;if(a===0)return 0;var h=0,f=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var S=w&~f;S!==0?h=Wr(S):(g&=w,g!==0&&(h=Wr(g)))}else w=a&~f,w!==0?h=Wr(w):g!==0&&(h=Wr(g));if(h===0)return 0;if(s!==0&&s!==h&&(s&f)===0&&(f=h&-h,g=s&-s,f>=g||f===16&&(g&4194240)!==0))return s;if((h&4)!==0&&(h|=a&16),s=r.entangledLanes,s!==0)for(r=r.entanglements,s&=h;0<s;)a=31-Ht(s),f=1<<a,h|=r[a],s&=~f;return h}function ch(r,s){switch(r){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wr(r,s){for(var a=r.suspendedLanes,h=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Ht(g),S=1<<w,k=f[w];k===-1?((S&a)===0||(S&h)!==0)&&(f[w]=ch(S,s)):k<=s&&(r.expiredLanes|=S),g&=~S}}function ln(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Wi(){var r=js;return js<<=1,(js&4194240)===0&&(js=64),r}function Kr(r){for(var s=[],a=0;31>a;a++)s.push(r);return s}function Gr(r,s,a){r.pendingLanes|=s,s!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,s=31-Ht(s),r[s]=a}function He(r,s){var a=r.pendingLanes&~s;r.pendingLanes=s,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=s,r.mutableReadLanes&=s,r.entangledLanes&=s,s=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-Ht(a),g=1<<f;s[f]=0,h[f]=-1,r[f]=-1,a&=~g}}function Qr(r,s){var a=r.entangledLanes|=s;for(r=r.entanglements;a;){var h=31-Ht(a),f=1<<h;f&s|r[h]&s&&(r[h]|=s),a&=~f}}var Oe=0;function Yr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Fl,zs,Ul,jl,Bl,da=!1,Jn=[],At=null,Dn=null,Ln=null,Jr=new Map,yn=new Map,Xn=[],hh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zl(r,s){switch(r){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Dn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Jr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function Gt(r,s,a,h,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ca(s),s!==null&&zs(s)),r):(r.eventSystemFlags|=h,s=r.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),r)}function dh(r,s,a,h,f){switch(s){case"focusin":return At=Gt(At,r,s,a,h,f),!0;case"dragenter":return Dn=Gt(Dn,r,s,a,h,f),!0;case"mouseover":return Ln=Gt(Ln,r,s,a,h,f),!0;case"pointerover":var g=f.pointerId;return Jr.set(g,Gt(Jr.get(g)||null,r,s,a,h,f)),!0;case"gotpointercapture":return g=f.pointerId,yn.set(g,Gt(yn.get(g)||null,r,s,a,h,f)),!0}return!1}function $l(r){var s=Ji(r.target);if(s!==null){var a=Nn(s);if(a!==null){if(s=a.tag,s===13){if(s=zi(a),s!==null){r.blockedOn=s,Bl(r.priority,function(){Ul(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Er(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var a=$s(r.domEventName,r.eventSystemFlags,s[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Fi=h,a.target.dispatchEvent(h),Fi=null}else return s=Ca(a),s!==null&&zs(s),r.blockedOn=a,!1;s.shift()}return!0}function Ki(r,s,a){Er(r)&&a.delete(s)}function Hl(){da=!1,At!==null&&Er(At)&&(At=null),Dn!==null&&Er(Dn)&&(Dn=null),Ln!==null&&Er(Ln)&&(Ln=null),Jr.forEach(Ki),yn.forEach(Ki)}function Vn(r,s){r.blockedOn===s&&(r.blockedOn=null,da||(da=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hl)))}function Mn(r){function s(f){return Vn(f,r)}if(0<Jn.length){Vn(Jn[0],r);for(var a=1;a<Jn.length;a++){var h=Jn[a];h.blockedOn===r&&(h.blockedOn=null)}}for(At!==null&&Vn(At,r),Dn!==null&&Vn(Dn,r),Ln!==null&&Vn(Ln,r),Jr.forEach(s),yn.forEach(s),a=0;a<Xn.length;a++)h=Xn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Xn.length&&(a=Xn[0],a.blockedOn===null);)$l(a),a.blockedOn===null&&Xn.shift()}var Tr=ne.ReactCurrentBatchConfig,Xr=!0;function Ye(r,s,a,h){var f=Oe,g=Tr.transition;Tr.transition=null;try{Oe=1,fa(r,s,a,h)}finally{Oe=f,Tr.transition=g}}function fh(r,s,a,h){var f=Oe,g=Tr.transition;Tr.transition=null;try{Oe=4,fa(r,s,a,h)}finally{Oe=f,Tr.transition=g}}function fa(r,s,a,h){if(Xr){var f=$s(r,s,a,h);if(f===null)Sh(r,s,h,Gi,a),zl(r,h);else if(dh(f,r,s,a,h))h.stopPropagation();else if(zl(r,h),s&4&&-1<hh.indexOf(r)){for(;f!==null;){var g=Ca(f);if(g!==null&&Fl(g),g=$s(r,s,a,h),g===null&&Sh(r,s,h,Gi,a),g===f)break;f=g}f!==null&&h.stopPropagation()}else Sh(r,s,h,null,a)}}var Gi=null;function $s(r,s,a,h){if(Gi=null,r=Ns(h),r=Ji(r),r!==null)if(s=Nn(r),s===null)r=null;else if(a=s.tag,a===13){if(r=zi(s),r!==null)return r;r=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null);return Gi=r,null}function pa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ol()){case $i:return 1;case qr:return 4;case gn:case ca:return 16;case Dl:return 536870912;default:return 16}default:return 16}}var un=null,Hs=null,Qt=null;function ma(){if(Qt)return Qt;var r,s=Hs,a=s.length,h,f="value"in un?un.value:un.textContent,g=f.length;for(r=0;r<a&&s[r]===f[r];r++);var w=a-r;for(h=1;h<=w&&s[a-h]===f[g-h];h++);return Qt=f.slice(r,1<h?1-h:void 0)}function qs(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function Zn(){return!0}function ga(){return!1}function Ct(r){function s(a,h,f,g,w){this._reactName=a,this._targetInst=f,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var S in r)r.hasOwnProperty(S)&&(a=r[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Zn:ga,this.isPropagationStopped=ga,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Zn)},persist:function(){},isPersistent:Zn}),s}var Fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=Ct(Fn),er=ae({},Fn,{view:0,detail:0}),ph=Ct(er),Ks,Ir,Zr,Qi=ae({},er,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Zr&&(Zr&&r.type==="mousemove"?(Ks=r.screenX-Zr.screenX,Ir=r.screenY-Zr.screenY):Ir=Ks=0,Zr=r),Ks)},movementY:function(r){return"movementY"in r?r.movementY:Ir}}),Gs=Ct(Qi),ya=ae({},Qi,{dataTransfer:0}),ql=Ct(ya),Qs=ae({},er,{relatedTarget:0}),Ys=Ct(Qs),Wl=ae({},Fn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sr=Ct(Wl),Kl=ae({},Fn,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Gl=Ct(Kl),Ql=ae({},Fn,{data:0}),va=Ct(Ql),Js={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=Yl[r])?!!s[r]:!1}function tr(){return Jl}var u=ae({},er,{key:function(r){if(r.key){var s=Js[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=qs(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?qt[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tr,charCode:function(r){return r.type==="keypress"?qs(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qs(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),m=Ct(u),v=ae({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),T=Ct(v),j=ae({},er,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tr}),H=Ct(j),ie=ae({},Fn,{propertyName:0,elapsedTime:0,pseudoElement:0}),ze=Ct(ie),pt=ae({},Qi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ct(pt),Et=[9,13,27,32],lt=d&&"CompositionEvent"in window,vn=null;d&&"documentMode"in document&&(vn=document.documentMode);var cn=d&&"TextEvent"in window&&!vn,Yi=d&&(!lt||vn&&8<vn&&11>=vn),Xs=" ",Dp=!1;function Lp(r,s){switch(r){case"keyup":return Et.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Zs=!1;function nE(r,s){switch(r){case"compositionend":return Vp(s);case"keypress":return s.which!==32?null:(Dp=!0,Xs);case"textInput":return r=s.data,r===Xs&&Dp?null:r;default:return null}}function rE(r,s){if(Zs)return r==="compositionend"||!lt&&Lp(r,s)?(r=ma(),Qt=Hs=un=null,Zs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Yi&&s.locale!=="ko"?null:s.data;default:return null}}var iE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mp(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!iE[r.type]:s==="textarea"}function Fp(r,s,a,h){Yn(h),s=nu(s,"onChange"),0<s.length&&(a=new Ws("onChange","change",null,a,h),r.push({event:a,listeners:s}))}var _a=null,wa=null;function sE(r){nm(r,0)}function Xl(r){var s=io(r);if(Cs(s))return r}function oE(r,s){if(r==="change")return s}var Up=!1;if(d){var mh;if(d){var gh="oninput"in document;if(!gh){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),gh=typeof jp.oninput=="function"}mh=gh}else mh=!1;Up=mh&&(!document.documentMode||9<document.documentMode)}function Bp(){_a&&(_a.detachEvent("onpropertychange",zp),wa=_a=null)}function zp(r){if(r.propertyName==="value"&&Xl(wa)){var s=[];Fp(s,wa,r,Ns(r)),oa(sE,s)}}function aE(r,s,a){r==="focusin"?(Bp(),_a=s,wa=a,_a.attachEvent("onpropertychange",zp)):r==="focusout"&&Bp()}function lE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Xl(wa)}function uE(r,s){if(r==="click")return Xl(s)}function cE(r,s){if(r==="input"||r==="change")return Xl(s)}function hE(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Un=typeof Object.is=="function"?Object.is:hE;function Ea(r,s){if(Un(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var a=Object.keys(r),h=Object.keys(s);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var f=a[h];if(!p.call(s,f)||!Un(r[f],s[f]))return!1}return!0}function $p(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hp(r,s){var a=$p(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=s&&h>=s)return{node:a,offset:s-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=$p(a)}}function qp(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?qp(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Wp(){for(var r=window,s=$r();s instanceof r.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)r=s.contentWindow;else break;s=$r(r.document)}return s}function yh(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}function dE(r){var s=Wp(),a=r.focusedElem,h=r.selectionRange;if(s!==a&&a&&a.ownerDocument&&qp(a.ownerDocument.documentElement,a)){if(h!==null&&yh(a)){if(s=h.start,r=h.end,r===void 0&&(r=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(r,a.value.length);else if(r=(s=a.ownerDocument||document)&&s.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(h.start,f);h=h.end===void 0?g:Math.min(h.end,f),!r.extend&&g>h&&(f=h,h=g,g=f),f=Hp(a,g);var w=Hp(a,h);f&&w&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(s=s.createRange(),s.setStart(f.node,f.offset),r.removeAllRanges(),g>h?(r.addRange(s),r.extend(w.node,w.offset)):(s.setEnd(w.node,w.offset),r.addRange(s)))}}for(s=[],r=a;r=r.parentNode;)r.nodeType===1&&s.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)r=s[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var fE=d&&"documentMode"in document&&11>=document.documentMode,eo=null,vh=null,Ta=null,_h=!1;function Kp(r,s,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;_h||eo==null||eo!==$r(h)||(h=eo,"selectionStart"in h&&yh(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ta&&Ea(Ta,h)||(Ta=h,h=nu(vh,"onSelect"),0<h.length&&(s=new Ws("onSelect","select",null,s,a),r.push({event:s,listeners:h}),s.target=eo)))}function Zl(r,s){var a={};return a[r.toLowerCase()]=s.toLowerCase(),a["Webkit"+r]="webkit"+s,a["Moz"+r]="moz"+s,a}var to={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},wh={},Gp={};d&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete to.animationend.animation,delete to.animationiteration.animation,delete to.animationstart.animation),"TransitionEvent"in window||delete to.transitionend.transition);function eu(r){if(wh[r])return wh[r];if(!to[r])return r;var s=to[r],a;for(a in s)if(s.hasOwnProperty(a)&&a in Gp)return wh[r]=s[a];return r}var Qp=eu("animationend"),Yp=eu("animationiteration"),Jp=eu("animationstart"),Xp=eu("transitionend"),Zp=new Map,em="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(r,s){Zp.set(r,s),l(s,[r])}for(var Eh=0;Eh<em.length;Eh++){var Th=em[Eh],pE=Th.toLowerCase(),mE=Th[0].toUpperCase()+Th.slice(1);ei(pE,"on"+mE)}ei(Qp,"onAnimationEnd"),ei(Yp,"onAnimationIteration"),ei(Jp,"onAnimationStart"),ei("dblclick","onDoubleClick"),ei("focusin","onFocus"),ei("focusout","onBlur"),ei(Xp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ia="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ia));function tm(r,s,a){var h=r.type||"unknown-event";r.currentTarget=a,xl(h,s,void 0,r),r.currentTarget=null}function nm(r,s){s=(s&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],f=h.event;h=h.listeners;e:{var g=void 0;if(s)for(var w=h.length-1;0<=w;w--){var S=h[w],k=S.instance,$=S.currentTarget;if(S=S.listener,k!==g&&f.isPropagationStopped())break e;tm(f,S,$),g=k}else for(w=0;w<h.length;w++){if(S=h[w],k=S.instance,$=S.currentTarget,S=S.listener,k!==g&&f.isPropagationStopped())break e;tm(f,S,$),g=k}}}if(bn)throw r=aa,bn=!1,aa=null,r}function Ge(r,s){var a=s[xh];a===void 0&&(a=s[xh]=new Set);var h=r+"__bubble";a.has(h)||(rm(s,r,2,!1),a.add(h))}function Ih(r,s,a){var h=0;s&&(h|=4),rm(a,r,h,s)}var tu="_reactListening"+Math.random().toString(36).slice(2);function Sa(r){if(!r[tu]){r[tu]=!0,i.forEach(function(a){a!=="selectionchange"&&(gE.has(a)||Ih(a,!1,r),Ih(a,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[tu]||(s[tu]=!0,Ih("selectionchange",!1,s))}}function rm(r,s,a,h){switch(pa(s)){case 1:var f=Ye;break;case 4:f=fh;break;default:f=fa}a=f.bind(null,s,a,r),f=void 0,!Ls||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),h?f!==void 0?r.addEventListener(s,a,{capture:!0,passive:f}):r.addEventListener(s,a,!0):f!==void 0?r.addEventListener(s,a,{passive:f}):r.addEventListener(s,a,!1)}function Sh(r,s,a,h,f){var g=h;if((s&1)===0&&(s&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var S=h.stateNode.containerInfo;if(S===f||S.nodeType===8&&S.parentNode===f)break;if(w===4)for(w=h.return;w!==null;){var k=w.tag;if((k===3||k===4)&&(k=w.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;w=w.return}for(;S!==null;){if(w=Ji(S),w===null)return;if(k=w.tag,k===5||k===6){h=g=w;continue e}S=S.parentNode}}h=h.return}oa(function(){var $=g,X=Ns(a),ee=[];e:{var J=Zp.get(r);if(J!==void 0){var oe=Ws,ce=r;switch(r){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":oe=m;break;case"focusin":ce="focus",oe=Ys;break;case"focusout":ce="blur",oe=Ys;break;case"beforeblur":case"afterblur":oe=Ys;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=ql;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=H;break;case Qp:case Yp:case Jp:oe=Sr;break;case Xp:oe=ze;break;case"scroll":oe=ph;break;case"wheel":oe=Le;break;case"copy":case"cut":case"paste":oe=Gl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=T}var he=(s&4)!==0,ot=!he&&r==="scroll",B=he?J!==null?J+"Capture":null:J;he=[];for(var O=$,z;O!==null;){z=O;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,B!==null&&(re=st(O,B),re!=null&&he.push(Ra(O,re,z)))),ot)break;O=O.return}0<he.length&&(J=new oe(J,ce,null,a,X),ee.push({event:J,listeners:he}))}}if((s&7)===0){e:{if(J=r==="mouseover"||r==="pointerover",oe=r==="mouseout"||r==="pointerout",J&&a!==Fi&&(ce=a.relatedTarget||a.fromElement)&&(Ji(ce)||ce[Rr]))break e;if((oe||J)&&(J=X.window===X?X:(J=X.ownerDocument)?J.defaultView||J.parentWindow:window,oe?(ce=a.relatedTarget||a.toElement,oe=$,ce=ce?Ji(ce):null,ce!==null&&(ot=Nn(ce),ce!==ot||ce.tag!==5&&ce.tag!==6)&&(ce=null)):(oe=null,ce=$),oe!==ce)){if(he=Gs,re="onMouseLeave",B="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(he=T,re="onPointerLeave",B="onPointerEnter",O="pointer"),ot=oe==null?J:io(oe),z=ce==null?J:io(ce),J=new he(re,O+"leave",oe,a,X),J.target=ot,J.relatedTarget=z,re=null,Ji(X)===$&&(he=new he(B,O+"enter",ce,a,X),he.target=z,he.relatedTarget=ot,re=he),ot=re,oe&&ce)t:{for(he=oe,B=ce,O=0,z=he;z;z=no(z))O++;for(z=0,re=B;re;re=no(re))z++;for(;0<O-z;)he=no(he),O--;for(;0<z-O;)B=no(B),z--;for(;O--;){if(he===B||B!==null&&he===B.alternate)break t;he=no(he),B=no(B)}he=null}else he=null;oe!==null&&im(ee,J,oe,he,!1),ce!==null&&ot!==null&&im(ee,ot,ce,he,!0)}}e:{if(J=$?io($):window,oe=J.nodeName&&J.nodeName.toLowerCase(),oe==="select"||oe==="input"&&J.type==="file")var de=oE;else if(Mp(J))if(Up)de=cE;else{de=lE;var ye=aE}else(oe=J.nodeName)&&oe.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(de=uE);if(de&&(de=de(r,$))){Fp(ee,de,a,X);break e}ye&&ye(r,J,$),r==="focusout"&&(ye=J._wrapperState)&&ye.controlled&&J.type==="number"&&ks(J,"number",J.value)}switch(ye=$?io($):window,r){case"focusin":(Mp(ye)||ye.contentEditable==="true")&&(eo=ye,vh=$,Ta=null);break;case"focusout":Ta=vh=eo=null;break;case"mousedown":_h=!0;break;case"contextmenu":case"mouseup":case"dragend":_h=!1,Kp(ee,a,X);break;case"selectionchange":if(fE)break;case"keydown":case"keyup":Kp(ee,a,X)}var ve;if(lt)e:{switch(r){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Zs?Lp(r,a)&&(Ie="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Yi&&a.locale!=="ko"&&(Zs||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Zs&&(ve=ma()):(un=X,Hs="value"in un?un.value:un.textContent,Zs=!0)),ye=nu($,Ie),0<ye.length&&(Ie=new va(Ie,r,null,a,X),ee.push({event:Ie,listeners:ye}),ve?Ie.data=ve:(ve=Vp(a),ve!==null&&(Ie.data=ve)))),(ve=cn?nE(r,a):rE(r,a))&&($=nu($,"onBeforeInput"),0<$.length&&(X=new va("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:$}),X.data=ve))}nm(ee,s)})}function Ra(r,s,a){return{instance:r,listener:s,currentTarget:a}}function nu(r,s){for(var a=s+"Capture",h=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=st(r,a),g!=null&&h.unshift(Ra(r,g,f)),g=st(r,s),g!=null&&h.push(Ra(r,g,f))),r=r.return}return h}function no(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function im(r,s,a,h,f){for(var g=s._reactName,w=[];a!==null&&a!==h;){var S=a,k=S.alternate,$=S.stateNode;if(k!==null&&k===h)break;S.tag===5&&$!==null&&(S=$,f?(k=st(a,g),k!=null&&w.unshift(Ra(a,k,S))):f||(k=st(a,g),k!=null&&w.push(Ra(a,k,S)))),a=a.return}w.length!==0&&r.push({event:s,listeners:w})}var yE=/\r\n?/g,vE=/\u0000|\uFFFD/g;function sm(r){return(typeof r=="string"?r:""+r).replace(yE,`
`).replace(vE,"")}function ru(r,s,a){if(s=sm(s),sm(r)!==s&&a)throw Error(t(425))}function iu(){}var Rh=null,Ah=null;function Ch(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ph=typeof setTimeout=="function"?setTimeout:void 0,_E=typeof clearTimeout=="function"?clearTimeout:void 0,om=typeof Promise=="function"?Promise:void 0,wE=typeof queueMicrotask=="function"?queueMicrotask:typeof om<"u"?function(r){return om.resolve(null).then(r).catch(EE)}:Ph;function EE(r){setTimeout(function(){throw r})}function kh(r,s){var a=s,h=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(h===0){r.removeChild(f),Mn(s);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=f}while(a);Mn(s)}function ti(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return r}function am(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return r;s--}else a==="/$"&&s++}r=r.previousSibling}return null}var ro=Math.random().toString(36).slice(2),nr="__reactFiber$"+ro,Aa="__reactProps$"+ro,Rr="__reactContainer$"+ro,xh="__reactEvents$"+ro,TE="__reactListeners$"+ro,IE="__reactHandles$"+ro;function Ji(r){var s=r[nr];if(s)return s;for(var a=r.parentNode;a;){if(s=a[Rr]||a[nr]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(r=am(r);r!==null;){if(a=r[nr])return a;r=am(r)}return s}r=a,a=r.parentNode}return null}function Ca(r){return r=r[nr]||r[Rr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function io(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function su(r){return r[Aa]||null}var bh=[],so=-1;function ni(r){return{current:r}}function Qe(r){0>so||(r.current=bh[so],bh[so]=null,so--)}function Ke(r,s){so++,bh[so]=r.current,r.current=s}var ri={},Lt=ni(ri),Yt=ni(!1),Xi=ri;function oo(r,s){var a=r.type.contextTypes;if(!a)return ri;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===s)return h.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=s[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=s,r.__reactInternalMemoizedMaskedChildContext=f),f}function Jt(r){return r=r.childContextTypes,r!=null}function ou(){Qe(Yt),Qe(Lt)}function lm(r,s,a){if(Lt.current!==ri)throw Error(t(168));Ke(Lt,s),Ke(Yt,a)}function um(r,s,a){var h=r.stateNode;if(s=s.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var f in h)if(!(f in s))throw Error(t(108,Ue(r)||"Unknown",f));return ae({},a,h)}function au(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ri,Xi=Lt.current,Ke(Lt,r),Ke(Yt,Yt.current),!0}function cm(r,s,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=um(r,s,Xi),h.__reactInternalMemoizedMergedChildContext=r,Qe(Yt),Qe(Lt),Ke(Lt,r)):Qe(Yt),Ke(Yt,a)}var Ar=null,lu=!1,Nh=!1;function hm(r){Ar===null?Ar=[r]:Ar.push(r)}function SE(r){lu=!0,hm(r)}function ii(){if(!Nh&&Ar!==null){Nh=!0;var r=0,s=Oe;try{var a=Ar;for(Oe=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Ar=null,lu=!1}catch(f){throw Ar!==null&&(Ar=Ar.slice(r+1)),Us($i,ii),f}finally{Oe=s,Nh=!1}}return null}var ao=[],lo=0,uu=null,cu=0,_n=[],wn=0,Zi=null,Cr=1,Pr="";function es(r,s){ao[lo++]=cu,ao[lo++]=uu,uu=r,cu=s}function dm(r,s,a){_n[wn++]=Cr,_n[wn++]=Pr,_n[wn++]=Zi,Zi=r;var h=Cr;r=Pr;var f=32-Ht(h)-1;h&=~(1<<f),a+=1;var g=32-Ht(s)+f;if(30<g){var w=f-f%5;g=(h&(1<<w)-1).toString(32),h>>=w,f-=w,Cr=1<<32-Ht(s)+f|a<<f|h,Pr=g+r}else Cr=1<<g|a<<f|h,Pr=r}function Oh(r){r.return!==null&&(es(r,1),dm(r,1,0))}function Dh(r){for(;r===uu;)uu=ao[--lo],ao[lo]=null,cu=ao[--lo],ao[lo]=null;for(;r===Zi;)Zi=_n[--wn],_n[wn]=null,Pr=_n[--wn],_n[wn]=null,Cr=_n[--wn],_n[wn]=null}var hn=null,dn=null,Je=!1,jn=null;function fm(r,s){var a=Sn(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=r,s=r.deletions,s===null?(r.deletions=[a],r.flags|=16):s.push(a)}function pm(r,s){switch(r.tag){case 5:var a=r.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(r.stateNode=s,hn=r,dn=ti(s.firstChild),!0):!1;case 6:return s=r.pendingProps===""||s.nodeType!==3?null:s,s!==null?(r.stateNode=s,hn=r,dn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=Zi!==null?{id:Cr,overflow:Pr}:null,r.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Sn(18,null,null,0),a.stateNode=s,a.return=r,r.child=a,hn=r,dn=null,!0):!1;default:return!1}}function Lh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Vh(r){if(Je){var s=dn;if(s){var a=s;if(!pm(r,s)){if(Lh(r))throw Error(t(418));s=ti(a.nextSibling);var h=hn;s&&pm(r,s)?fm(h,a):(r.flags=r.flags&-4097|2,Je=!1,hn=r)}}else{if(Lh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Je=!1,hn=r}}}function mm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;hn=r}function hu(r){if(r!==hn)return!1;if(!Je)return mm(r),Je=!0,!1;var s;if((s=r.tag!==3)&&!(s=r.tag!==5)&&(s=r.type,s=s!=="head"&&s!=="body"&&!Ch(r.type,r.memoizedProps)),s&&(s=dn)){if(Lh(r))throw gm(),Error(t(418));for(;s;)fm(r,s),s=ti(s.nextSibling)}if(mm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(s===0){dn=ti(r.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}r=r.nextSibling}dn=null}}else dn=hn?ti(r.stateNode.nextSibling):null;return!0}function gm(){for(var r=dn;r;)r=ti(r.nextSibling)}function uo(){dn=hn=null,Je=!1}function Mh(r){jn===null?jn=[r]:jn.push(r)}var RE=ne.ReactCurrentBatchConfig;function Pa(r,s,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var f=h,g=""+r;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===g?s.ref:(s=function(w){var S=f.refs;w===null?delete S[g]:S[g]=w},s._stringRef=g,s)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function du(r,s){throw r=Object.prototype.toString.call(s),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r))}function ym(r){var s=r._init;return s(r._payload)}function vm(r){function s(B,O){if(r){var z=B.deletions;z===null?(B.deletions=[O],B.flags|=16):z.push(O)}}function a(B,O){if(!r)return null;for(;O!==null;)s(B,O),O=O.sibling;return null}function h(B,O){for(B=new Map;O!==null;)O.key!==null?B.set(O.key,O):B.set(O.index,O),O=O.sibling;return B}function f(B,O){return B=di(B,O),B.index=0,B.sibling=null,B}function g(B,O,z){return B.index=z,r?(z=B.alternate,z!==null?(z=z.index,z<O?(B.flags|=2,O):z):(B.flags|=2,O)):(B.flags|=1048576,O)}function w(B){return r&&B.alternate===null&&(B.flags|=2),B}function S(B,O,z,re){return O===null||O.tag!==6?(O=Pd(z,B.mode,re),O.return=B,O):(O=f(O,z),O.return=B,O)}function k(B,O,z,re){var de=z.type;return de===x?X(B,O,z.props.children,re,z.key):O!==null&&(O.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&ym(de)===O.type)?(re=f(O,z.props),re.ref=Pa(B,O,z),re.return=B,re):(re=Vu(z.type,z.key,z.props,null,B.mode,re),re.ref=Pa(B,O,z),re.return=B,re)}function $(B,O,z,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=kd(z,B.mode,re),O.return=B,O):(O=f(O,z.children||[]),O.return=B,O)}function X(B,O,z,re,de){return O===null||O.tag!==7?(O=ls(z,B.mode,re,de),O.return=B,O):(O=f(O,z),O.return=B,O)}function ee(B,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=Pd(""+O,B.mode,z),O.return=B,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case fe:return z=Vu(O.type,O.key,O.props,null,B.mode,z),z.ref=Pa(B,null,O),z.return=B,z;case pe:return O=kd(O,B.mode,z),O.return=B,O;case Dt:var re=O._init;return ee(B,re(O._payload),z)}if(gr(O)||ge(O))return O=ls(O,B.mode,z,null),O.return=B,O;du(B,O)}return null}function J(B,O,z,re){var de=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return de!==null?null:S(B,O,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:return z.key===de?k(B,O,z,re):null;case pe:return z.key===de?$(B,O,z,re):null;case Dt:return de=z._init,J(B,O,de(z._payload),re)}if(gr(z)||ge(z))return de!==null?null:X(B,O,z,re,null);du(B,z)}return null}function oe(B,O,z,re,de){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(z)||null,S(O,B,""+re,de);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case fe:return B=B.get(re.key===null?z:re.key)||null,k(O,B,re,de);case pe:return B=B.get(re.key===null?z:re.key)||null,$(O,B,re,de);case Dt:var ye=re._init;return oe(B,O,z,ye(re._payload),de)}if(gr(re)||ge(re))return B=B.get(z)||null,X(O,B,re,de,null);du(O,re)}return null}function ce(B,O,z,re){for(var de=null,ye=null,ve=O,Ie=O=0,St=null;ve!==null&&Ie<z.length;Ie++){ve.index>Ie?(St=ve,ve=null):St=ve.sibling;var Fe=J(B,ve,z[Ie],re);if(Fe===null){ve===null&&(ve=St);break}r&&ve&&Fe.alternate===null&&s(B,ve),O=g(Fe,O,Ie),ye===null?de=Fe:ye.sibling=Fe,ye=Fe,ve=St}if(Ie===z.length)return a(B,ve),Je&&es(B,Ie),de;if(ve===null){for(;Ie<z.length;Ie++)ve=ee(B,z[Ie],re),ve!==null&&(O=g(ve,O,Ie),ye===null?de=ve:ye.sibling=ve,ye=ve);return Je&&es(B,Ie),de}for(ve=h(B,ve);Ie<z.length;Ie++)St=oe(ve,B,Ie,z[Ie],re),St!==null&&(r&&St.alternate!==null&&ve.delete(St.key===null?Ie:St.key),O=g(St,O,Ie),ye===null?de=St:ye.sibling=St,ye=St);return r&&ve.forEach(function(fi){return s(B,fi)}),Je&&es(B,Ie),de}function he(B,O,z,re){var de=ge(z);if(typeof de!="function")throw Error(t(150));if(z=de.call(z),z==null)throw Error(t(151));for(var ye=de=null,ve=O,Ie=O=0,St=null,Fe=z.next();ve!==null&&!Fe.done;Ie++,Fe=z.next()){ve.index>Ie?(St=ve,ve=null):St=ve.sibling;var fi=J(B,ve,Fe.value,re);if(fi===null){ve===null&&(ve=St);break}r&&ve&&fi.alternate===null&&s(B,ve),O=g(fi,O,Ie),ye===null?de=fi:ye.sibling=fi,ye=fi,ve=St}if(Fe.done)return a(B,ve),Je&&es(B,Ie),de;if(ve===null){for(;!Fe.done;Ie++,Fe=z.next())Fe=ee(B,Fe.value,re),Fe!==null&&(O=g(Fe,O,Ie),ye===null?de=Fe:ye.sibling=Fe,ye=Fe);return Je&&es(B,Ie),de}for(ve=h(B,ve);!Fe.done;Ie++,Fe=z.next())Fe=oe(ve,B,Ie,Fe.value,re),Fe!==null&&(r&&Fe.alternate!==null&&ve.delete(Fe.key===null?Ie:Fe.key),O=g(Fe,O,Ie),ye===null?de=Fe:ye.sibling=Fe,ye=Fe);return r&&ve.forEach(function(iT){return s(B,iT)}),Je&&es(B,Ie),de}function ot(B,O,z,re){if(typeof z=="object"&&z!==null&&z.type===x&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case fe:e:{for(var de=z.key,ye=O;ye!==null;){if(ye.key===de){if(de=z.type,de===x){if(ye.tag===7){a(B,ye.sibling),O=f(ye,z.props.children),O.return=B,B=O;break e}}else if(ye.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===Dt&&ym(de)===ye.type){a(B,ye.sibling),O=f(ye,z.props),O.ref=Pa(B,ye,z),O.return=B,B=O;break e}a(B,ye);break}else s(B,ye);ye=ye.sibling}z.type===x?(O=ls(z.props.children,B.mode,re,z.key),O.return=B,B=O):(re=Vu(z.type,z.key,z.props,null,B.mode,re),re.ref=Pa(B,O,z),re.return=B,B=re)}return w(B);case pe:e:{for(ye=z.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(B,O.sibling),O=f(O,z.children||[]),O.return=B,B=O;break e}else{a(B,O);break}else s(B,O);O=O.sibling}O=kd(z,B.mode,re),O.return=B,B=O}return w(B);case Dt:return ye=z._init,ot(B,O,ye(z._payload),re)}if(gr(z))return ce(B,O,z,re);if(ge(z))return he(B,O,z,re);du(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(a(B,O.sibling),O=f(O,z),O.return=B,B=O):(a(B,O),O=Pd(z,B.mode,re),O.return=B,B=O),w(B)):a(B,O)}return ot}var co=vm(!0),_m=vm(!1),fu=ni(null),pu=null,ho=null,Fh=null;function Uh(){Fh=ho=pu=null}function jh(r){var s=fu.current;Qe(fu),r._currentValue=s}function Bh(r,s,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,h!==null&&(h.childLanes|=s)):h!==null&&(h.childLanes&s)!==s&&(h.childLanes|=s),r===a)break;r=r.return}}function fo(r,s){pu=r,Fh=ho=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&s)!==0&&(Xt=!0),r.firstContext=null)}function En(r){var s=r._currentValue;if(Fh!==r)if(r={context:r,memoizedValue:s,next:null},ho===null){if(pu===null)throw Error(t(308));ho=r,pu.dependencies={lanes:0,firstContext:r}}else ho=ho.next=r;return s}var ts=null;function zh(r){ts===null?ts=[r]:ts.push(r)}function wm(r,s,a,h){var f=s.interleaved;return f===null?(a.next=a,zh(s)):(a.next=f.next,f.next=a),s.interleaved=a,kr(r,h)}function kr(r,s){r.lanes|=s;var a=r.alternate;for(a!==null&&(a.lanes|=s),a=r,r=r.return;r!==null;)r.childLanes|=s,a=r.alternate,a!==null&&(a.childLanes|=s),a=r,r=r.return;return a.tag===3?a.stateNode:null}var si=!1;function $h(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Em(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function xr(r,s){return{eventTime:r,lane:s,tag:0,payload:null,callback:null,next:null}}function oi(r,s,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(Me&2)!==0){var f=h.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),h.pending=s,kr(r,a)}return f=h.interleaved,f===null?(s.next=s,zh(h)):(s.next=f.next,f.next=s),h.interleaved=s,kr(r,a)}function mu(r,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Qr(r,a)}}function Tm(r,s){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:h.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=s:r.next=s,a.lastBaseUpdate=s}function gu(r,s,a,h){var f=r.updateQueue;si=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,$=k.next;k.next=null,w===null?g=$:w.next=$,w=k;var X=r.alternate;X!==null&&(X=X.updateQueue,S=X.lastBaseUpdate,S!==w&&(S===null?X.firstBaseUpdate=$:S.next=$,X.lastBaseUpdate=k))}if(g!==null){var ee=f.baseState;w=0,X=$=k=null,S=g;do{var J=S.lane,oe=S.eventTime;if((h&J)===J){X!==null&&(X=X.next={eventTime:oe,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var ce=r,he=S;switch(J=s,oe=a,he.tag){case 1:if(ce=he.payload,typeof ce=="function"){ee=ce.call(oe,ee,J);break e}ee=ce;break e;case 3:ce.flags=ce.flags&-65537|128;case 0:if(ce=he.payload,J=typeof ce=="function"?ce.call(oe,ee,J):ce,J==null)break e;ee=ae({},ee,J);break e;case 2:si=!0}}S.callback!==null&&S.lane!==0&&(r.flags|=64,J=f.effects,J===null?f.effects=[S]:J.push(S))}else oe={eventTime:oe,lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},X===null?($=X=oe,k=ee):X=X.next=oe,w|=J;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;J=S,S=J.next,J.next=null,f.lastBaseUpdate=J,f.shared.pending=null}}while(!0);if(X===null&&(k=ee),f.baseState=k,f.firstBaseUpdate=$,f.lastBaseUpdate=X,s=f.shared.interleaved,s!==null){f=s;do w|=f.lane,f=f.next;while(f!==s)}else g===null&&(f.shared.lanes=0);is|=w,r.lanes=w,r.memoizedState=ee}}function Im(r,s,a){if(r=s.effects,s.effects=null,r!==null)for(s=0;s<r.length;s++){var h=r[s],f=h.callback;if(f!==null){if(h.callback=null,h=a,typeof f!="function")throw Error(t(191,f));f.call(h)}}}var ka={},rr=ni(ka),xa=ni(ka),ba=ni(ka);function ns(r){if(r===ka)throw Error(t(174));return r}function Hh(r,s){switch(Ke(ba,s),Ke(xa,r),Ke(rr,ka),r=s.nodeType,r){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ft(null,"");break;default:r=r===8?s.parentNode:s,s=r.namespaceURI||null,r=r.tagName,s=ft(s,r)}Qe(rr),Ke(rr,s)}function po(){Qe(rr),Qe(xa),Qe(ba)}function Sm(r){ns(ba.current);var s=ns(rr.current),a=ft(s,r.type);s!==a&&(Ke(xa,r),Ke(rr,a))}function qh(r){xa.current===r&&(Qe(rr),Qe(xa))}var Xe=ni(0);function yu(r){for(var s=r;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Wh=[];function Kh(){for(var r=0;r<Wh.length;r++)Wh[r]._workInProgressVersionPrimary=null;Wh.length=0}var vu=ne.ReactCurrentDispatcher,Gh=ne.ReactCurrentBatchConfig,rs=0,Ze=null,mt=null,Tt=null,_u=!1,Na=!1,Oa=0,AE=0;function Vt(){throw Error(t(321))}function Qh(r,s){if(s===null)return!1;for(var a=0;a<s.length&&a<r.length;a++)if(!Un(r[a],s[a]))return!1;return!0}function Yh(r,s,a,h,f,g){if(rs=g,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,vu.current=r===null||r.memoizedState===null?xE:bE,r=a(h,f),Na){g=0;do{if(Na=!1,Oa=0,25<=g)throw Error(t(301));g+=1,Tt=mt=null,s.updateQueue=null,vu.current=NE,r=a(h,f)}while(Na)}if(vu.current=Tu,s=mt!==null&&mt.next!==null,rs=0,Tt=mt=Ze=null,_u=!1,s)throw Error(t(300));return r}function Jh(){var r=Oa!==0;return Oa=0,r}function ir(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Ze.memoizedState=Tt=r:Tt=Tt.next=r,Tt}function Tn(){if(mt===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=mt.next;var s=Tt===null?Ze.memoizedState:Tt.next;if(s!==null)Tt=s,mt=r;else{if(r===null)throw Error(t(310));mt=r,r={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Tt===null?Ze.memoizedState=Tt=r:Tt=Tt.next=r}return Tt}function Da(r,s){return typeof s=="function"?s(r):s}function Xh(r){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=mt,f=h.baseQueue,g=a.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}h.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,h=h.baseState;var S=w=null,k=null,$=g;do{var X=$.lane;if((rs&X)===X)k!==null&&(k=k.next={lane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),h=$.hasEagerState?$.eagerState:r(h,$.action);else{var ee={lane:X,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null};k===null?(S=k=ee,w=h):k=k.next=ee,Ze.lanes|=X,is|=X}$=$.next}while($!==null&&$!==g);k===null?w=h:k.next=S,Un(h,s.memoizedState)||(Xt=!0),s.memoizedState=h,s.baseState=w,s.baseQueue=k,a.lastRenderedState=h}if(r=a.interleaved,r!==null){f=r;do g=f.lane,Ze.lanes|=g,is|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function Zh(r){var s=Tn(),a=s.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do g=r(g,w.action),w=w.next;while(w!==f);Un(g,s.memoizedState)||(Xt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,h]}function Rm(){}function Am(r,s){var a=Ze,h=Tn(),f=s(),g=!Un(h.memoizedState,f);if(g&&(h.memoizedState=f,Xt=!0),h=h.queue,ed(km.bind(null,a,h,r),[r]),h.getSnapshot!==s||g||Tt!==null&&Tt.memoizedState.tag&1){if(a.flags|=2048,La(9,Pm.bind(null,a,h,f,s),void 0,null),It===null)throw Error(t(349));(rs&30)!==0||Cm(a,s,f)}return f}function Cm(r,s,a){r.flags|=16384,r={getSnapshot:s,value:a},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.stores=[r]):(a=s.stores,a===null?s.stores=[r]:a.push(r))}function Pm(r,s,a,h){s.value=a,s.getSnapshot=h,xm(s)&&bm(r)}function km(r,s,a){return a(function(){xm(s)&&bm(r)})}function xm(r){var s=r.getSnapshot;r=r.value;try{var a=s();return!Un(r,a)}catch{return!0}}function bm(r){var s=kr(r,1);s!==null&&Hn(s,r,1,-1)}function Nm(r){var s=ir();return typeof r=="function"&&(r=r()),s.memoizedState=s.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:r},s.queue=r,r=r.dispatch=kE.bind(null,Ze,r),[s.memoizedState,r]}function La(r,s,a,h){return r={tag:r,create:s,destroy:a,deps:h,next:null},s=Ze.updateQueue,s===null?(s={lastEffect:null,stores:null},Ze.updateQueue=s,s.lastEffect=r.next=r):(a=s.lastEffect,a===null?s.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,s.lastEffect=r)),r}function Om(){return Tn().memoizedState}function wu(r,s,a,h){var f=ir();Ze.flags|=r,f.memoizedState=La(1|s,a,void 0,h===void 0?null:h)}function Eu(r,s,a,h){var f=Tn();h=h===void 0?null:h;var g=void 0;if(mt!==null){var w=mt.memoizedState;if(g=w.destroy,h!==null&&Qh(h,w.deps)){f.memoizedState=La(s,a,g,h);return}}Ze.flags|=r,f.memoizedState=La(1|s,a,g,h)}function Dm(r,s){return wu(8390656,8,r,s)}function ed(r,s){return Eu(2048,8,r,s)}function Lm(r,s){return Eu(4,2,r,s)}function Vm(r,s){return Eu(4,4,r,s)}function Mm(r,s){if(typeof s=="function")return r=r(),s(r),function(){s(null)};if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Fm(r,s,a){return a=a!=null?a.concat([r]):null,Eu(4,4,Mm.bind(null,s,r),a)}function td(){}function Um(r,s){var a=Tn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Qh(s,h[1])?h[0]:(a.memoizedState=[r,s],r)}function jm(r,s){var a=Tn();s=s===void 0?null:s;var h=a.memoizedState;return h!==null&&s!==null&&Qh(s,h[1])?h[0]:(r=r(),a.memoizedState=[r,s],r)}function Bm(r,s,a){return(rs&21)===0?(r.baseState&&(r.baseState=!1,Xt=!0),r.memoizedState=a):(Un(a,s)||(a=Wi(),Ze.lanes|=a,is|=a,r.baseState=!0),s)}function CE(r,s){var a=Oe;Oe=a!==0&&4>a?a:4,r(!0);var h=Gh.transition;Gh.transition={};try{r(!1),s()}finally{Oe=a,Gh.transition=h}}function zm(){return Tn().memoizedState}function PE(r,s,a){var h=ci(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},$m(r))Hm(s,a);else if(a=wm(r,s,a,h),a!==null){var f=Kt();Hn(a,r,h,f),qm(a,s,h)}}function kE(r,s,a){var h=ci(r),f={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if($m(r))Hm(s,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,S=g(w,a);if(f.hasEagerState=!0,f.eagerState=S,Un(S,w)){var k=s.interleaved;k===null?(f.next=f,zh(s)):(f.next=k.next,k.next=f),s.interleaved=f;return}}catch{}finally{}a=wm(r,s,f,h),a!==null&&(f=Kt(),Hn(a,r,h,f),qm(a,s,h))}}function $m(r){var s=r.alternate;return r===Ze||s!==null&&s===Ze}function Hm(r,s){Na=_u=!0;var a=r.pending;a===null?s.next=s:(s.next=a.next,a.next=s),r.pending=s}function qm(r,s,a){if((a&4194240)!==0){var h=s.lanes;h&=r.pendingLanes,a|=h,s.lanes=a,Qr(r,a)}}var Tu={readContext:En,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},xE={readContext:En,useCallback:function(r,s){return ir().memoizedState=[r,s===void 0?null:s],r},useContext:En,useEffect:Dm,useImperativeHandle:function(r,s,a){return a=a!=null?a.concat([r]):null,wu(4194308,4,Mm.bind(null,s,r),a)},useLayoutEffect:function(r,s){return wu(4194308,4,r,s)},useInsertionEffect:function(r,s){return wu(4,2,r,s)},useMemo:function(r,s){var a=ir();return s=s===void 0?null:s,r=r(),a.memoizedState=[r,s],r},useReducer:function(r,s,a){var h=ir();return s=a!==void 0?a(s):s,h.memoizedState=h.baseState=s,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:s},h.queue=r,r=r.dispatch=PE.bind(null,Ze,r),[h.memoizedState,r]},useRef:function(r){var s=ir();return r={current:r},s.memoizedState=r},useState:Nm,useDebugValue:td,useDeferredValue:function(r){return ir().memoizedState=r},useTransition:function(){var r=Nm(!1),s=r[0];return r=CE.bind(null,r[1]),ir().memoizedState=r,[s,r]},useMutableSource:function(){},useSyncExternalStore:function(r,s,a){var h=Ze,f=ir();if(Je){if(a===void 0)throw Error(t(407));a=a()}else{if(a=s(),It===null)throw Error(t(349));(rs&30)!==0||Cm(h,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Dm(km.bind(null,h,g,r),[r]),h.flags|=2048,La(9,Pm.bind(null,h,g,a,s),void 0,null),a},useId:function(){var r=ir(),s=It.identifierPrefix;if(Je){var a=Pr,h=Cr;a=(h&~(1<<32-Ht(h)-1)).toString(32)+a,s=":"+s+"R"+a,a=Oa++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=AE++,s=":"+s+"r"+a.toString(32)+":";return r.memoizedState=s},unstable_isNewReconciler:!1},bE={readContext:En,useCallback:Um,useContext:En,useEffect:ed,useImperativeHandle:Fm,useInsertionEffect:Lm,useLayoutEffect:Vm,useMemo:jm,useReducer:Xh,useRef:Om,useState:function(){return Xh(Da)},useDebugValue:td,useDeferredValue:function(r){var s=Tn();return Bm(s,mt.memoizedState,r)},useTransition:function(){var r=Xh(Da)[0],s=Tn().memoizedState;return[r,s]},useMutableSource:Rm,useSyncExternalStore:Am,useId:zm,unstable_isNewReconciler:!1},NE={readContext:En,useCallback:Um,useContext:En,useEffect:ed,useImperativeHandle:Fm,useInsertionEffect:Lm,useLayoutEffect:Vm,useMemo:jm,useReducer:Zh,useRef:Om,useState:function(){return Zh(Da)},useDebugValue:td,useDeferredValue:function(r){var s=Tn();return mt===null?s.memoizedState=r:Bm(s,mt.memoizedState,r)},useTransition:function(){var r=Zh(Da)[0],s=Tn().memoizedState;return[r,s]},useMutableSource:Rm,useSyncExternalStore:Am,useId:zm,unstable_isNewReconciler:!1};function Bn(r,s){if(r&&r.defaultProps){s=ae({},s),r=r.defaultProps;for(var a in r)s[a]===void 0&&(s[a]=r[a]);return s}return s}function nd(r,s,a,h){s=r.memoizedState,a=a(h,s),a=a==null?s:ae({},s,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var Iu={isMounted:function(r){return(r=r._reactInternals)?Nn(r)===r:!1},enqueueSetState:function(r,s,a){r=r._reactInternals;var h=Kt(),f=ci(r),g=xr(h,f);g.payload=s,a!=null&&(g.callback=a),s=oi(r,g,f),s!==null&&(Hn(s,r,f,h),mu(s,r,f))},enqueueReplaceState:function(r,s,a){r=r._reactInternals;var h=Kt(),f=ci(r),g=xr(h,f);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=oi(r,g,f),s!==null&&(Hn(s,r,f,h),mu(s,r,f))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var a=Kt(),h=ci(r),f=xr(a,h);f.tag=2,s!=null&&(f.callback=s),s=oi(r,f,h),s!==null&&(Hn(s,r,h,a),mu(s,r,h))}};function Wm(r,s,a,h,f,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):s.prototype&&s.prototype.isPureReactComponent?!Ea(a,h)||!Ea(f,g):!0}function Km(r,s,a){var h=!1,f=ri,g=s.contextType;return typeof g=="object"&&g!==null?g=En(g):(f=Jt(s)?Xi:Lt.current,h=s.contextTypes,g=(h=h!=null)?oo(r,f):ri),s=new s(a,g),r.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Iu,r.stateNode=s,s._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),s}function Gm(r,s,a,h){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,h),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,h),s.state!==r&&Iu.enqueueReplaceState(s,s.state,null)}function rd(r,s,a,h){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},$h(r);var g=s.contextType;typeof g=="object"&&g!==null?f.context=En(g):(g=Jt(s)?Xi:Lt.current,f.context=oo(r,g)),f.state=r.memoizedState,g=s.getDerivedStateFromProps,typeof g=="function"&&(nd(r,s,g,a),f.state=r.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(s=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),s!==f.state&&Iu.enqueueReplaceState(f,f.state,null),gu(r,a,f,h),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function mo(r,s){try{var a="",h=s;do a+=ke(h),h=h.return;while(h);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:s,stack:f,digest:null}}function id(r,s,a){return{value:r,source:null,stack:a??null,digest:s??null}}function sd(r,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var OE=typeof WeakMap=="function"?WeakMap:Map;function Qm(r,s,a){a=xr(-1,a),a.tag=3,a.payload={element:null};var h=s.value;return a.callback=function(){xu||(xu=!0,wd=h),sd(r,s)},a}function Ym(r,s,a){a=xr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var f=s.value;a.payload=function(){return h(f)},a.callback=function(){sd(r,s)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){sd(r,s),typeof h!="function"&&(li===null?li=new Set([this]):li.add(this));var w=s.stack;this.componentDidCatch(s.value,{componentStack:w!==null?w:""})}),a}function Jm(r,s,a){var h=r.pingCache;if(h===null){h=r.pingCache=new OE;var f=new Set;h.set(s,f)}else f=h.get(s),f===void 0&&(f=new Set,h.set(s,f));f.has(a)||(f.add(a),r=KE.bind(null,r,s,a),s.then(r,r))}function Xm(r){do{var s;if((s=r.tag===13)&&(s=r.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return r;r=r.return}while(r!==null);return null}function Zm(r,s,a,h,f){return(r.mode&1)===0?(r===s?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=xr(-1,1),s.tag=2,oi(a,s,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var DE=ne.ReactCurrentOwner,Xt=!1;function Wt(r,s,a,h){s.child=r===null?_m(s,null,a,h):co(s,r.child,a,h)}function eg(r,s,a,h,f){a=a.render;var g=s.ref;return fo(s,f),h=Yh(r,s,a,h,g,f),a=Jh(),r!==null&&!Xt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,br(r,s,f)):(Je&&a&&Oh(s),s.flags|=1,Wt(r,s,h,f),s.child)}function tg(r,s,a,h,f){if(r===null){var g=a.type;return typeof g=="function"&&!Cd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=g,ng(r,s,g,h,f)):(r=Vu(a.type,null,h,s,s.mode,f),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,(r.lanes&f)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(w,h)&&r.ref===s.ref)return br(r,s,f)}return s.flags|=1,r=di(g,h),r.ref=s.ref,r.return=s,s.child=r}function ng(r,s,a,h,f){if(r!==null){var g=r.memoizedProps;if(Ea(g,h)&&r.ref===s.ref)if(Xt=!1,s.pendingProps=h=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(Xt=!0);else return s.lanes=r.lanes,br(r,s,f)}return od(r,s,a,h,f)}function rg(r,s,a){var h=s.pendingProps,f=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(yo,fn),fn|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:r,cachePool:null,transitions:null},s.updateQueue=null,Ke(yo,fn),fn|=r,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,Ke(yo,fn),fn|=h}else g!==null?(h=g.baseLanes|a,s.memoizedState=null):h=a,Ke(yo,fn),fn|=h;return Wt(r,s,f,a),s.child}function ig(r,s){var a=s.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function od(r,s,a,h,f){var g=Jt(a)?Xi:Lt.current;return g=oo(s,g),fo(s,f),a=Yh(r,s,a,h,g,f),h=Jh(),r!==null&&!Xt?(s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~f,br(r,s,f)):(Je&&h&&Oh(s),s.flags|=1,Wt(r,s,a,f),s.child)}function sg(r,s,a,h,f){if(Jt(a)){var g=!0;au(s)}else g=!1;if(fo(s,f),s.stateNode===null)Ru(r,s),Km(s,a,h),rd(s,a,h,f),h=!0;else if(r===null){var w=s.stateNode,S=s.memoizedProps;w.props=S;var k=w.context,$=a.contextType;typeof $=="object"&&$!==null?$=En($):($=Jt(a)?Xi:Lt.current,$=oo(s,$));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==h||k!==$)&&Gm(s,w,h,$),si=!1;var J=s.memoizedState;w.state=J,gu(s,h,w,f),k=s.memoizedState,S!==h||J!==k||Yt.current||si?(typeof X=="function"&&(nd(s,a,X,h),k=s.memoizedState),(S=si||Wm(s,a,S,h,J,k,$))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(s.flags|=4194308)):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=h,s.memoizedState=k),w.props=h,w.state=k,w.context=$,h=S):(typeof w.componentDidMount=="function"&&(s.flags|=4194308),h=!1)}else{w=s.stateNode,Em(r,s),S=s.memoizedProps,$=s.type===s.elementType?S:Bn(s.type,S),w.props=$,ee=s.pendingProps,J=w.context,k=a.contextType,typeof k=="object"&&k!==null?k=En(k):(k=Jt(a)?Xi:Lt.current,k=oo(s,k));var oe=a.getDerivedStateFromProps;(X=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==ee||J!==k)&&Gm(s,w,h,k),si=!1,J=s.memoizedState,w.state=J,gu(s,h,w,f);var ce=s.memoizedState;S!==ee||J!==ce||Yt.current||si?(typeof oe=="function"&&(nd(s,a,oe,h),ce=s.memoizedState),($=si||Wm(s,a,$,h,J,ce,k)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ce,k),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ce,k)),typeof w.componentDidUpdate=="function"&&(s.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),s.memoizedProps=h,s.memoizedState=ce),w.props=h,w.state=ce,w.context=k,h=$):(typeof w.componentDidUpdate!="function"||S===r.memoizedProps&&J===r.memoizedState||(s.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&J===r.memoizedState||(s.flags|=1024),h=!1)}return ad(r,s,a,h,g,f)}function ad(r,s,a,h,f,g){ig(r,s);var w=(s.flags&128)!==0;if(!h&&!w)return f&&cm(s,a,!1),br(r,s,g);h=s.stateNode,DE.current=s;var S=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return s.flags|=1,r!==null&&w?(s.child=co(s,r.child,null,g),s.child=co(s,null,S,g)):Wt(r,s,S,g),s.memoizedState=h.state,f&&cm(s,a,!0),s.child}function og(r){var s=r.stateNode;s.pendingContext?lm(r,s.pendingContext,s.pendingContext!==s.context):s.context&&lm(r,s.context,!1),Hh(r,s.containerInfo)}function ag(r,s,a,h,f){return uo(),Mh(f),s.flags|=256,Wt(r,s,a,h),s.child}var ld={dehydrated:null,treeContext:null,retryLane:0};function ud(r){return{baseLanes:r,cachePool:null,transitions:null}}function lg(r,s,a){var h=s.pendingProps,f=Xe.current,g=!1,w=(s.flags&128)!==0,S;if((S=w)||(S=r!==null&&r.memoizedState===null?!1:(f&2)!==0),S?(g=!0,s.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Ke(Xe,f&1),r===null)return Vh(s),r=s.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((s.mode&1)===0?s.lanes=1:r.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=s.mode,g=s.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Mu(w,h,0,null),r=ls(r,h,a,null),g.return=s,r.return=s,g.sibling=r,s.child=g,s.child.memoizedState=ud(a),s.memoizedState=ld,r):cd(s,w));if(f=r.memoizedState,f!==null&&(S=f.dehydrated,S!==null))return LE(r,s,w,h,S,f,a);if(g){g=h.fallback,w=s.mode,f=r.child,S=f.sibling;var k={mode:"hidden",children:h.children};return(w&1)===0&&s.child!==f?(h=s.child,h.childLanes=0,h.pendingProps=k,s.deletions=null):(h=di(f,k),h.subtreeFlags=f.subtreeFlags&14680064),S!==null?g=di(S,g):(g=ls(g,w,a,null),g.flags|=2),g.return=s,h.return=s,h.sibling=g,s.child=h,h=g,g=s.child,w=r.child.memoizedState,w=w===null?ud(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,s.memoizedState=ld,h}return g=r.child,r=g.sibling,h=di(g,{mode:"visible",children:h.children}),(s.mode&1)===0&&(h.lanes=a),h.return=s,h.sibling=null,r!==null&&(a=s.deletions,a===null?(s.deletions=[r],s.flags|=16):a.push(r)),s.child=h,s.memoizedState=null,h}function cd(r,s){return s=Mu({mode:"visible",children:s},r.mode,0,null),s.return=r,r.child=s}function Su(r,s,a,h){return h!==null&&Mh(h),co(s,r.child,null,a),r=cd(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function LE(r,s,a,h,f,g,w){if(a)return s.flags&256?(s.flags&=-257,h=id(Error(t(422))),Su(r,s,w,h)):s.memoizedState!==null?(s.child=r.child,s.flags|=128,null):(g=h.fallback,f=s.mode,h=Mu({mode:"visible",children:h.children},f,0,null),g=ls(g,f,w,null),g.flags|=2,h.return=s,g.return=s,h.sibling=g,s.child=h,(s.mode&1)!==0&&co(s,r.child,null,w),s.child.memoizedState=ud(w),s.memoizedState=ld,g);if((s.mode&1)===0)return Su(r,s,w,null);if(f.data==="$!"){if(h=f.nextSibling&&f.nextSibling.dataset,h)var S=h.dgst;return h=S,g=Error(t(419)),h=id(g,h,void 0),Su(r,s,w,h)}if(S=(w&r.childLanes)!==0,Xt||S){if(h=It,h!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(h.suspendedLanes|w))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,kr(r,f),Hn(h,r,f,-1))}return Ad(),h=id(Error(t(421))),Su(r,s,w,h)}return f.data==="$?"?(s.flags|=128,s.child=r.child,s=GE.bind(null,r),f._reactRetry=s,null):(r=g.treeContext,dn=ti(f.nextSibling),hn=s,Je=!0,jn=null,r!==null&&(_n[wn++]=Cr,_n[wn++]=Pr,_n[wn++]=Zi,Cr=r.id,Pr=r.overflow,Zi=s),s=cd(s,h.children),s.flags|=4096,s)}function ug(r,s,a){r.lanes|=s;var h=r.alternate;h!==null&&(h.lanes|=s),Bh(r.return,s,a)}function hd(r,s,a,h,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=f)}function cg(r,s,a){var h=s.pendingProps,f=h.revealOrder,g=h.tail;if(Wt(r,s,h.children,a),h=Xe.current,(h&2)!==0)h=h&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ug(r,a,s);else if(r.tag===19)ug(r,a,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(Ke(Xe,h),(s.mode&1)===0)s.memoizedState=null;else switch(f){case"forwards":for(a=s.child,f=null;a!==null;)r=a.alternate,r!==null&&yu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),hd(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(r=f.alternate,r!==null&&yu(r)===null){s.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}hd(s,!0,a,null,g);break;case"together":hd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ru(r,s){(s.mode&1)===0&&r!==null&&(r.alternate=null,s.alternate=null,s.flags|=2)}function br(r,s,a){if(r!==null&&(s.dependencies=r.dependencies),is|=s.lanes,(a&s.childLanes)===0)return null;if(r!==null&&s.child!==r.child)throw Error(t(153));if(s.child!==null){for(r=s.child,a=di(r,r.pendingProps),s.child=a,a.return=s;r.sibling!==null;)r=r.sibling,a=a.sibling=di(r,r.pendingProps),a.return=s;a.sibling=null}return s.child}function VE(r,s,a){switch(s.tag){case 3:og(s),uo();break;case 5:Sm(s);break;case 1:Jt(s.type)&&au(s);break;case 4:Hh(s,s.stateNode.containerInfo);break;case 10:var h=s.type._context,f=s.memoizedProps.value;Ke(fu,h._currentValue),h._currentValue=f;break;case 13:if(h=s.memoizedState,h!==null)return h.dehydrated!==null?(Ke(Xe,Xe.current&1),s.flags|=128,null):(a&s.child.childLanes)!==0?lg(r,s,a):(Ke(Xe,Xe.current&1),r=br(r,s,a),r!==null?r.sibling:null);Ke(Xe,Xe.current&1);break;case 19:if(h=(a&s.childLanes)!==0,(r.flags&128)!==0){if(h)return cg(r,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ke(Xe,Xe.current),h)break;return null;case 22:case 23:return s.lanes=0,rg(r,s,a)}return br(r,s,a)}var hg,dd,dg,fg;hg=function(r,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},dd=function(){},dg=function(r,s,a,h){var f=r.memoizedProps;if(f!==h){r=s.stateNode,ns(rr.current);var g=null;switch(a){case"input":f=Li(r,f),h=Li(r,h),g=[];break;case"select":f=ae({},f,{value:void 0}),h=ae({},h,{value:void 0}),g=[];break;case"textarea":f=Yo(r,f),h=Yo(r,h),g=[];break;default:typeof f.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=iu)}na(a,h);var w;a=null;for($ in f)if(!h.hasOwnProperty($)&&f.hasOwnProperty($)&&f[$]!=null)if($==="style"){var S=f[$];for(w in S)S.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else $!=="dangerouslySetInnerHTML"&&$!=="children"&&$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(o.hasOwnProperty($)?g||(g=[]):(g=g||[]).push($,null));for($ in h){var k=h[$];if(S=f!=null?f[$]:void 0,h.hasOwnProperty($)&&k!==S&&(k!=null||S!=null))if($==="style")if(S){for(w in S)!S.hasOwnProperty(w)||k&&k.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in k)k.hasOwnProperty(w)&&S[w]!==k[w]&&(a||(a={}),a[w]=k[w])}else a||(g||(g=[]),g.push($,a)),a=k;else $==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,S=S?S.__html:void 0,k!=null&&S!==k&&(g=g||[]).push($,k)):$==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push($,""+k):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&(o.hasOwnProperty($)?(k!=null&&$==="onScroll"&&Ge("scroll",r),g||S===k||(g=[])):(g=g||[]).push($,k))}a&&(g=g||[]).push("style",a);var $=g;(s.updateQueue=$)&&(s.flags|=4)}},fg=function(r,s,a,h){a!==h&&(s.flags|=4)};function Va(r,s){if(!Je)switch(r.tailMode){case"hidden":s=r.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function Mt(r){var s=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(s)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags&14680064,h|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,h|=f.subtreeFlags,h|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=h,r.childLanes=a,s}function ME(r,s,a){var h=s.pendingProps;switch(Dh(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mt(s),null;case 1:return Jt(s.type)&&ou(),Mt(s),null;case 3:return h=s.stateNode,po(),Qe(Yt),Qe(Lt),Kh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(hu(s)?s.flags|=4:r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jn!==null&&(Id(jn),jn=null))),dd(r,s),Mt(s),null;case 5:qh(s);var f=ns(ba.current);if(a=s.type,r!==null&&s.stateNode!=null)dg(r,s,a,h,f),r.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!h){if(s.stateNode===null)throw Error(t(166));return Mt(s),null}if(r=ns(rr.current),hu(s)){h=s.stateNode,a=s.type;var g=s.memoizedProps;switch(h[nr]=s,h[Aa]=g,r=(s.mode&1)!==0,a){case"dialog":Ge("cancel",h),Ge("close",h);break;case"iframe":case"object":case"embed":Ge("load",h);break;case"video":case"audio":for(f=0;f<Ia.length;f++)Ge(Ia[f],h);break;case"source":Ge("error",h);break;case"img":case"image":case"link":Ge("error",h),Ge("load",h);break;case"details":Ge("toggle",h);break;case"input":Ps(h,g),Ge("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},Ge("invalid",h);break;case"textarea":xs(h,g),Ge("invalid",h)}na(a,g),f=null;for(var w in g)if(g.hasOwnProperty(w)){var S=g[w];w==="children"?typeof S=="string"?h.textContent!==S&&(g.suppressHydrationWarning!==!0&&ru(h.textContent,S,r),f=["children",S]):typeof S=="number"&&h.textContent!==""+S&&(g.suppressHydrationWarning!==!0&&ru(h.textContent,S,r),f=["children",""+S]):o.hasOwnProperty(w)&&S!=null&&w==="onScroll"&&Ge("scroll",h)}switch(a){case"input":mr(h),kl(h,g,!0);break;case"textarea":mr(h),Jo(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=iu)}h=f,s.updateQueue=h,h!==null&&(s.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=dt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[nr]=s,r[Aa]=h,hg(r,s,!1,!1),s.stateNode=r;e:{switch(w=ra(a,h),a){case"dialog":Ge("cancel",r),Ge("close",r),f=h;break;case"iframe":case"object":case"embed":Ge("load",r),f=h;break;case"video":case"audio":for(f=0;f<Ia.length;f++)Ge(Ia[f],r);f=h;break;case"source":Ge("error",r),f=h;break;case"img":case"image":case"link":Ge("error",r),Ge("load",r),f=h;break;case"details":Ge("toggle",r),f=h;break;case"input":Ps(r,h),f=Li(r,h),Ge("invalid",r);break;case"option":f=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},f=ae({},h,{value:void 0}),Ge("invalid",r);break;case"textarea":xs(r,h),f=Yo(r,h),Ge("invalid",r);break;default:f=h}na(a,f),S=f;for(g in S)if(S.hasOwnProperty(g)){var k=S[g];g==="style"?ea(r,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Xo(r,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Hr(r,k):typeof k=="number"&&Hr(r,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&Ge("scroll",r):k!=null&&Z(r,g,k,w))}switch(a){case"input":mr(r),kl(r,h,!1);break;case"textarea":mr(r),Jo(r);break;case"option":h.value!=null&&r.setAttribute("value",""+je(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?yr(r,!!h.multiple,g,!1):h.defaultValue!=null&&yr(r,!!h.multiple,h.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=iu)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return Mt(s),null;case 6:if(r&&s.stateNode!=null)fg(r,s,r.memoizedProps,h);else{if(typeof h!="string"&&s.stateNode===null)throw Error(t(166));if(a=ns(ba.current),ns(rr.current),hu(s)){if(h=s.stateNode,a=s.memoizedProps,h[nr]=s,(g=h.nodeValue!==a)&&(r=hn,r!==null))switch(r.tag){case 3:ru(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&ru(h.nodeValue,a,(r.mode&1)!==0)}g&&(s.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[nr]=s,s.stateNode=h}return Mt(s),null;case 13:if(Qe(Xe),h=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Je&&dn!==null&&(s.mode&1)!==0&&(s.flags&128)===0)gm(),uo(),s.flags|=98560,g=!1;else if(g=hu(s),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[nr]=s}else uo(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Mt(s),g=!1}else jn!==null&&(Id(jn),jn=null),g=!0;if(!g)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=a,s):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(s.child.flags|=8192,(s.mode&1)!==0&&(r===null||(Xe.current&1)!==0?gt===0&&(gt=3):Ad())),s.updateQueue!==null&&(s.flags|=4),Mt(s),null);case 4:return po(),dd(r,s),r===null&&Sa(s.stateNode.containerInfo),Mt(s),null;case 10:return jh(s.type._context),Mt(s),null;case 17:return Jt(s.type)&&ou(),Mt(s),null;case 19:if(Qe(Xe),g=s.memoizedState,g===null)return Mt(s),null;if(h=(s.flags&128)!==0,w=g.rendering,w===null)if(h)Va(g,!1);else{if(gt!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(w=yu(r),w!==null){for(s.flags|=128,Va(g,!1),h=w.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),s.subtreeFlags=0,h=a,a=s.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Ke(Xe,Xe.current&1|2),s.child}r=r.sibling}g.tail!==null&&We()>vo&&(s.flags|=128,h=!0,Va(g,!1),s.lanes=4194304)}else{if(!h)if(r=yu(w),r!==null){if(s.flags|=128,h=!0,a=r.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Va(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Je)return Mt(s),null}else 2*We()-g.renderingStartTime>vo&&a!==1073741824&&(s.flags|=128,h=!0,Va(g,!1),s.lanes=4194304);g.isBackwards?(w.sibling=s.child,s.child=w):(a=g.last,a!==null?a.sibling=w:s.child=w,g.last=w)}return g.tail!==null?(s=g.tail,g.rendering=s,g.tail=s.sibling,g.renderingStartTime=We(),s.sibling=null,a=Xe.current,Ke(Xe,h?a&1|2:a&1),s):(Mt(s),null);case 22:case 23:return Rd(),h=s.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(s.flags|=8192),h&&(s.mode&1)!==0?(fn&1073741824)!==0&&(Mt(s),s.subtreeFlags&6&&(s.flags|=8192)):Mt(s),null;case 24:return null;case 25:return null}throw Error(t(156,s.tag))}function FE(r,s){switch(Dh(s),s.tag){case 1:return Jt(s.type)&&ou(),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return po(),Qe(Yt),Qe(Lt),Kh(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 5:return qh(s),null;case 13:if(Qe(Xe),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(t(340));uo()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return Qe(Xe),null;case 4:return po(),null;case 10:return jh(s.type._context),null;case 22:case 23:return Rd(),null;case 24:return null;default:return null}}var Au=!1,Ft=!1,UE=typeof WeakSet=="function"?WeakSet:Set,ue=null;function go(r,s){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){nt(r,s,h)}else a.current=null}function fd(r,s,a){try{a()}catch(h){nt(r,s,h)}}var pg=!1;function jE(r,s){if(Rh=Xr,r=Wp(),yh(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var f=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,S=-1,k=-1,$=0,X=0,ee=r,J=null;t:for(;;){for(var oe;ee!==a||f!==0&&ee.nodeType!==3||(S=w+f),ee!==g||h!==0&&ee.nodeType!==3||(k=w+h),ee.nodeType===3&&(w+=ee.nodeValue.length),(oe=ee.firstChild)!==null;)J=ee,ee=oe;for(;;){if(ee===r)break t;if(J===a&&++$===f&&(S=w),J===g&&++X===h&&(k=w),(oe=ee.nextSibling)!==null)break;ee=J,J=ee.parentNode}ee=oe}a=S===-1||k===-1?null:{start:S,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Ah={focusedElem:r,selectionRange:a},Xr=!1,ue=s;ue!==null;)if(s=ue,r=s.child,(s.subtreeFlags&1028)!==0&&r!==null)r.return=s,ue=r;else for(;ue!==null;){s=ue;try{var ce=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(ce!==null){var he=ce.memoizedProps,ot=ce.memoizedState,B=s.stateNode,O=B.getSnapshotBeforeUpdate(s.elementType===s.type?he:Bn(s.type,he),ot);B.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=s.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){nt(s,s.return,re)}if(r=s.sibling,r!==null){r.return=s.return,ue=r;break}ue=s.return}return ce=pg,pg=!1,ce}function Ma(r,s,a){var h=s.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var f=h=h.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&fd(s,a,g)}f=f.next}while(f!==h)}}function Cu(r,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==s)}}function pd(r){var s=r.ref;if(s!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof s=="function"?s(r):s.current=r}}function mg(r){var s=r.alternate;s!==null&&(r.alternate=null,mg(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&(delete s[nr],delete s[Aa],delete s[xh],delete s[TE],delete s[IE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function gg(r){return r.tag===5||r.tag===3||r.tag===4}function yg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||gg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function md(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(r,s):a.insertBefore(r,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(r,a)):(s=a,s.appendChild(r)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=iu));else if(h!==4&&(r=r.child,r!==null))for(md(r,s,a),r=r.sibling;r!==null;)md(r,s,a),r=r.sibling}function gd(r,s,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,s?a.insertBefore(r,s):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(gd(r,s,a),r=r.sibling;r!==null;)gd(r,s,a),r=r.sibling}var Pt=null,zn=!1;function ai(r,s,a){for(a=a.child;a!==null;)vg(r,s,a),a=a.sibling}function vg(r,s,a){if(an&&typeof an.onCommitFiberUnmount=="function")try{an.onCommitFiberUnmount(Hi,a)}catch{}switch(a.tag){case 5:Ft||go(a,s);case 6:var h=Pt,f=zn;Pt=null,ai(r,s,a),Pt=h,zn=f,Pt!==null&&(zn?(r=Pt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Pt.removeChild(a.stateNode));break;case 18:Pt!==null&&(zn?(r=Pt,a=a.stateNode,r.nodeType===8?kh(r.parentNode,a):r.nodeType===1&&kh(r,a),Mn(r)):kh(Pt,a.stateNode));break;case 4:h=Pt,f=zn,Pt=a.stateNode.containerInfo,zn=!0,ai(r,s,a),Pt=h,zn=f;break;case 0:case 11:case 14:case 15:if(!Ft&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){f=h=h.next;do{var g=f,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&fd(a,s,w),f=f.next}while(f!==h)}ai(r,s,a);break;case 1:if(!Ft&&(go(a,s),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(S){nt(a,s,S)}ai(r,s,a);break;case 21:ai(r,s,a);break;case 22:a.mode&1?(Ft=(h=Ft)||a.memoizedState!==null,ai(r,s,a),Ft=h):ai(r,s,a);break;default:ai(r,s,a)}}function _g(r){var s=r.updateQueue;if(s!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new UE),s.forEach(function(h){var f=QE.bind(null,r,h);a.has(h)||(a.add(h),h.then(f,f))})}}function $n(r,s){var a=s.deletions;if(a!==null)for(var h=0;h<a.length;h++){var f=a[h];try{var g=r,w=s,S=w;e:for(;S!==null;){switch(S.tag){case 5:Pt=S.stateNode,zn=!1;break e;case 3:Pt=S.stateNode.containerInfo,zn=!0;break e;case 4:Pt=S.stateNode.containerInfo,zn=!0;break e}S=S.return}if(Pt===null)throw Error(t(160));vg(g,w,f),Pt=null,zn=!1;var k=f.alternate;k!==null&&(k.return=null),f.return=null}catch($){nt(f,s,$)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)wg(s,r),s=s.sibling}function wg(r,s){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if($n(s,r),sr(r),h&4){try{Ma(3,r,r.return),Cu(3,r)}catch(he){nt(r,r.return,he)}try{Ma(5,r,r.return)}catch(he){nt(r,r.return,he)}}break;case 1:$n(s,r),sr(r),h&512&&a!==null&&go(a,a.return);break;case 5:if($n(s,r),sr(r),h&512&&a!==null&&go(a,a.return),r.flags&32){var f=r.stateNode;try{Hr(f,"")}catch(he){nt(r,r.return,he)}}if(h&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,S=r.type,k=r.updateQueue;if(r.updateQueue=null,k!==null)try{S==="input"&&g.type==="radio"&&g.name!=null&&Go(f,g),ra(S,w);var $=ra(S,g);for(w=0;w<k.length;w+=2){var X=k[w],ee=k[w+1];X==="style"?ea(f,ee):X==="dangerouslySetInnerHTML"?Xo(f,ee):X==="children"?Hr(f,ee):Z(f,X,ee,$)}switch(S){case"input":Qo(f,g);break;case"textarea":bs(f,g);break;case"select":var J=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var oe=g.value;oe!=null?yr(f,!!g.multiple,oe,!1):J!==!!g.multiple&&(g.defaultValue!=null?yr(f,!!g.multiple,g.defaultValue,!0):yr(f,!!g.multiple,g.multiple?[]:"",!1))}f[Aa]=g}catch(he){nt(r,r.return,he)}}break;case 6:if($n(s,r),sr(r),h&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(he){nt(r,r.return,he)}}break;case 3:if($n(s,r),sr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{Mn(s.containerInfo)}catch(he){nt(r,r.return,he)}break;case 4:$n(s,r),sr(r);break;case 13:$n(s,r),sr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(_d=We())),h&4&&_g(r);break;case 22:if(X=a!==null&&a.memoizedState!==null,r.mode&1?(Ft=($=Ft)||X,$n(s,r),Ft=$):$n(s,r),sr(r),h&8192){if($=r.memoizedState!==null,(r.stateNode.isHidden=$)&&!X&&(r.mode&1)!==0)for(ue=r,X=r.child;X!==null;){for(ee=ue=X;ue!==null;){switch(J=ue,oe=J.child,J.tag){case 0:case 11:case 14:case 15:Ma(4,J,J.return);break;case 1:go(J,J.return);var ce=J.stateNode;if(typeof ce.componentWillUnmount=="function"){h=J,a=J.return;try{s=h,ce.props=s.memoizedProps,ce.state=s.memoizedState,ce.componentWillUnmount()}catch(he){nt(h,a,he)}}break;case 5:go(J,J.return);break;case 22:if(J.memoizedState!==null){Ig(ee);continue}}oe!==null?(oe.return=J,ue=oe):Ig(ee)}X=X.sibling}e:for(X=null,ee=r;;){if(ee.tag===5){if(X===null){X=ee;try{f=ee.stateNode,$?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(S=ee.stateNode,k=ee.memoizedProps.style,w=k!=null&&k.hasOwnProperty("display")?k.display:null,S.style.display=Zo("display",w))}catch(he){nt(r,r.return,he)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=$?"":ee.memoizedProps}catch(he){nt(r,r.return,he)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===r)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===r)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===r)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:$n(s,r),sr(r),h&4&&_g(r);break;case 21:break;default:$n(s,r),sr(r)}}function sr(r){var s=r.flags;if(s&2){try{e:{for(var a=r.return;a!==null;){if(gg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var f=h.stateNode;h.flags&32&&(Hr(f,""),h.flags&=-33);var g=yg(r);gd(r,g,f);break;case 3:case 4:var w=h.stateNode.containerInfo,S=yg(r);md(r,S,w);break;default:throw Error(t(161))}}catch(k){nt(r,r.return,k)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function BE(r,s,a){ue=r,Eg(r)}function Eg(r,s,a){for(var h=(r.mode&1)!==0;ue!==null;){var f=ue,g=f.child;if(f.tag===22&&h){var w=f.memoizedState!==null||Au;if(!w){var S=f.alternate,k=S!==null&&S.memoizedState!==null||Ft;S=Au;var $=Ft;if(Au=w,(Ft=k)&&!$)for(ue=f;ue!==null;)w=ue,k=w.child,w.tag===22&&w.memoizedState!==null?Sg(f):k!==null?(k.return=w,ue=k):Sg(f);for(;g!==null;)ue=g,Eg(g),g=g.sibling;ue=f,Au=S,Ft=$}Tg(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,ue=g):Tg(r)}}function Tg(r){for(;ue!==null;){var s=ue;if((s.flags&8772)!==0){var a=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Ft||Cu(5,s);break;case 1:var h=s.stateNode;if(s.flags&4&&!Ft)if(a===null)h.componentDidMount();else{var f=s.elementType===s.type?a.memoizedProps:Bn(s.type,a.memoizedProps);h.componentDidUpdate(f,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=s.updateQueue;g!==null&&Im(s,g,h);break;case 3:var w=s.updateQueue;if(w!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}Im(s,w,a)}break;case 5:var S=s.stateNode;if(a===null&&s.flags&4){a=S;var k=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var $=s.alternate;if($!==null){var X=$.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&Mn(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ft||s.flags&512&&pd(s)}catch(J){nt(s,s.return,J)}}if(s===r){ue=null;break}if(a=s.sibling,a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Ig(r){for(;ue!==null;){var s=ue;if(s===r){ue=null;break}var a=s.sibling;if(a!==null){a.return=s.return,ue=a;break}ue=s.return}}function Sg(r){for(;ue!==null;){var s=ue;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Cu(4,s)}catch(k){nt(s,a,k)}break;case 1:var h=s.stateNode;if(typeof h.componentDidMount=="function"){var f=s.return;try{h.componentDidMount()}catch(k){nt(s,f,k)}}var g=s.return;try{pd(s)}catch(k){nt(s,g,k)}break;case 5:var w=s.return;try{pd(s)}catch(k){nt(s,w,k)}}}catch(k){nt(s,s.return,k)}if(s===r){ue=null;break}var S=s.sibling;if(S!==null){S.return=s.return,ue=S;break}ue=s.return}}var zE=Math.ceil,Pu=ne.ReactCurrentDispatcher,yd=ne.ReactCurrentOwner,In=ne.ReactCurrentBatchConfig,Me=0,It=null,ut=null,kt=0,fn=0,yo=ni(0),gt=0,Fa=null,is=0,ku=0,vd=0,Ua=null,Zt=null,_d=0,vo=1/0,Nr=null,xu=!1,wd=null,li=null,bu=!1,ui=null,Nu=0,ja=0,Ed=null,Ou=-1,Du=0;function Kt(){return(Me&6)!==0?We():Ou!==-1?Ou:Ou=We()}function ci(r){return(r.mode&1)===0?1:(Me&2)!==0&&kt!==0?kt&-kt:RE.transition!==null?(Du===0&&(Du=Wi()),Du):(r=Oe,r!==0||(r=window.event,r=r===void 0?16:pa(r.type)),r)}function Hn(r,s,a,h){if(50<ja)throw ja=0,Ed=null,Error(t(185));Gr(r,a,h),((Me&2)===0||r!==It)&&(r===It&&((Me&2)===0&&(ku|=a),gt===4&&hi(r,kt)),en(r,h),a===1&&Me===0&&(s.mode&1)===0&&(vo=We()+500,lu&&ii()))}function en(r,s){var a=r.callbackNode;wr(r,s);var h=qi(r,r===It?kt:0);if(h===0)a!==null&&ua(a),r.callbackNode=null,r.callbackPriority=0;else if(s=h&-h,r.callbackPriority!==s){if(a!=null&&ua(a),s===1)r.tag===0?SE(Ag.bind(null,r)):hm(Ag.bind(null,r)),wE(function(){(Me&6)===0&&ii()}),a=null;else{switch(Yr(h)){case 1:a=$i;break;case 4:a=qr;break;case 16:a=gn;break;case 536870912:a=Dl;break;default:a=gn}a=Dg(a,Rg.bind(null,r))}r.callbackPriority=s,r.callbackNode=a}}function Rg(r,s){if(Ou=-1,Du=0,(Me&6)!==0)throw Error(t(327));var a=r.callbackNode;if(_o()&&r.callbackNode!==a)return null;var h=qi(r,r===It?kt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||s)s=Lu(r,h);else{s=h;var f=Me;Me|=2;var g=Pg();(It!==r||kt!==s)&&(Nr=null,vo=We()+500,os(r,s));do try{qE();break}catch(S){Cg(r,S)}while(!0);Uh(),Pu.current=g,Me=f,ut!==null?s=0:(It=null,kt=0,s=gt)}if(s!==0){if(s===2&&(f=ln(r),f!==0&&(h=f,s=Td(r,f))),s===1)throw a=Fa,os(r,0),hi(r,h),en(r,We()),a;if(s===6)hi(r,h);else{if(f=r.current.alternate,(h&30)===0&&!$E(f)&&(s=Lu(r,h),s===2&&(g=ln(r),g!==0&&(h=g,s=Td(r,g))),s===1))throw a=Fa,os(r,0),hi(r,h),en(r,We()),a;switch(r.finishedWork=f,r.finishedLanes=h,s){case 0:case 1:throw Error(t(345));case 2:as(r,Zt,Nr);break;case 3:if(hi(r,h),(h&130023424)===h&&(s=_d+500-We(),10<s)){if(qi(r,0)!==0)break;if(f=r.suspendedLanes,(f&h)!==h){Kt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Ph(as.bind(null,r,Zt,Nr),s);break}as(r,Zt,Nr);break;case 4:if(hi(r,h),(h&4194240)===h)break;for(s=r.eventTimes,f=-1;0<h;){var w=31-Ht(h);g=1<<w,w=s[w],w>f&&(f=w),h&=~g}if(h=f,h=We()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*zE(h/1960))-h,10<h){r.timeoutHandle=Ph(as.bind(null,r,Zt,Nr),h);break}as(r,Zt,Nr);break;case 5:as(r,Zt,Nr);break;default:throw Error(t(329))}}}return en(r,We()),r.callbackNode===a?Rg.bind(null,r):null}function Td(r,s){var a=Ua;return r.current.memoizedState.isDehydrated&&(os(r,s).flags|=256),r=Lu(r,s),r!==2&&(s=Zt,Zt=a,s!==null&&Id(s)),r}function Id(r){Zt===null?Zt=r:Zt.push.apply(Zt,r)}function $E(r){for(var s=r;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var f=a[h],g=f.getSnapshot;f=f.value;try{if(!Un(g(),f))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function hi(r,s){for(s&=~vd,s&=~ku,r.suspendedLanes|=s,r.pingedLanes&=~s,r=r.expirationTimes;0<s;){var a=31-Ht(s),h=1<<a;r[a]=-1,s&=~h}}function Ag(r){if((Me&6)!==0)throw Error(t(327));_o();var s=qi(r,0);if((s&1)===0)return en(r,We()),null;var a=Lu(r,s);if(r.tag!==0&&a===2){var h=ln(r);h!==0&&(s=h,a=Td(r,h))}if(a===1)throw a=Fa,os(r,0),hi(r,s),en(r,We()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=s,as(r,Zt,Nr),en(r,We()),null}function Sd(r,s){var a=Me;Me|=1;try{return r(s)}finally{Me=a,Me===0&&(vo=We()+500,lu&&ii())}}function ss(r){ui!==null&&ui.tag===0&&(Me&6)===0&&_o();var s=Me;Me|=1;var a=In.transition,h=Oe;try{if(In.transition=null,Oe=1,r)return r()}finally{Oe=h,In.transition=a,Me=s,(Me&6)===0&&ii()}}function Rd(){fn=yo.current,Qe(yo)}function os(r,s){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,_E(a)),ut!==null)for(a=ut.return;a!==null;){var h=a;switch(Dh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&ou();break;case 3:po(),Qe(Yt),Qe(Lt),Kh();break;case 5:qh(h);break;case 4:po();break;case 13:Qe(Xe);break;case 19:Qe(Xe);break;case 10:jh(h.type._context);break;case 22:case 23:Rd()}a=a.return}if(It=r,ut=r=di(r.current,null),kt=fn=s,gt=0,Fa=null,vd=ku=is=0,Zt=Ua=null,ts!==null){for(s=0;s<ts.length;s++)if(a=ts[s],h=a.interleaved,h!==null){a.interleaved=null;var f=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=f,h.next=w}a.pending=h}ts=null}return r}function Cg(r,s){do{var a=ut;try{if(Uh(),vu.current=Tu,_u){for(var h=Ze.memoizedState;h!==null;){var f=h.queue;f!==null&&(f.pending=null),h=h.next}_u=!1}if(rs=0,Tt=mt=Ze=null,Na=!1,Oa=0,yd.current=null,a===null||a.return===null){gt=1,Fa=s,ut=null;break}e:{var g=r,w=a.return,S=a,k=s;if(s=kt,S.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var $=k,X=S,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var J=X.alternate;J?(X.updateQueue=J.updateQueue,X.memoizedState=J.memoizedState,X.lanes=J.lanes):(X.updateQueue=null,X.memoizedState=null)}var oe=Xm(w);if(oe!==null){oe.flags&=-257,Zm(oe,w,S,g,s),oe.mode&1&&Jm(g,$,s),s=oe,k=$;var ce=s.updateQueue;if(ce===null){var he=new Set;he.add(k),s.updateQueue=he}else ce.add(k);break e}else{if((s&1)===0){Jm(g,$,s),Ad();break e}k=Error(t(426))}}else if(Je&&S.mode&1){var ot=Xm(w);if(ot!==null){(ot.flags&65536)===0&&(ot.flags|=256),Zm(ot,w,S,g,s),Mh(mo(k,S));break e}}g=k=mo(k,S),gt!==4&&(gt=2),Ua===null?Ua=[g]:Ua.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,s&=-s,g.lanes|=s;var B=Qm(g,k,s);Tm(g,B);break e;case 1:S=k;var O=g.type,z=g.stateNode;if((g.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(li===null||!li.has(z)))){g.flags|=65536,s&=-s,g.lanes|=s;var re=Ym(g,S,s);Tm(g,re);break e}}g=g.return}while(g!==null)}xg(a)}catch(de){s=de,ut===a&&a!==null&&(ut=a=a.return);continue}break}while(!0)}function Pg(){var r=Pu.current;return Pu.current=Tu,r===null?Tu:r}function Ad(){(gt===0||gt===3||gt===2)&&(gt=4),It===null||(is&268435455)===0&&(ku&268435455)===0||hi(It,kt)}function Lu(r,s){var a=Me;Me|=2;var h=Pg();(It!==r||kt!==s)&&(Nr=null,os(r,s));do try{HE();break}catch(f){Cg(r,f)}while(!0);if(Uh(),Me=a,Pu.current=h,ut!==null)throw Error(t(261));return It=null,kt=0,gt}function HE(){for(;ut!==null;)kg(ut)}function qE(){for(;ut!==null&&!Nl();)kg(ut)}function kg(r){var s=Og(r.alternate,r,fn);r.memoizedProps=r.pendingProps,s===null?xg(r):ut=s,yd.current=null}function xg(r){var s=r;do{var a=s.alternate;if(r=s.return,(s.flags&32768)===0){if(a=ME(a,s,fn),a!==null){ut=a;return}}else{if(a=FE(a,s),a!==null){a.flags&=32767,ut=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{gt=6,ut=null;return}}if(s=s.sibling,s!==null){ut=s;return}ut=s=r}while(s!==null);gt===0&&(gt=5)}function as(r,s,a){var h=Oe,f=In.transition;try{In.transition=null,Oe=1,WE(r,s,a,h)}finally{In.transition=f,Oe=h}return null}function WE(r,s,a,h){do _o();while(ui!==null);if((Me&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(He(r,g),r===It&&(ut=It=null,kt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||bu||(bu=!0,Dg(gn,function(){return _o(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=In.transition,In.transition=null;var w=Oe;Oe=1;var S=Me;Me|=4,yd.current=null,jE(r,a),wg(a,r),dE(Ah),Xr=!!Rh,Ah=Rh=null,r.current=a,BE(a),uh(),Me=S,Oe=w,In.transition=g}else r.current=a;if(bu&&(bu=!1,ui=r,Nu=f),g=r.pendingLanes,g===0&&(li=null),Ll(a.stateNode),en(r,We()),s!==null)for(h=r.onRecoverableError,a=0;a<s.length;a++)f=s[a],h(f.value,{componentStack:f.stack,digest:f.digest});if(xu)throw xu=!1,r=wd,wd=null,r;return(Nu&1)!==0&&r.tag!==0&&_o(),g=r.pendingLanes,(g&1)!==0?r===Ed?ja++:(ja=0,Ed=r):ja=0,ii(),null}function _o(){if(ui!==null){var r=Yr(Nu),s=In.transition,a=Oe;try{if(In.transition=null,Oe=16>r?16:r,ui===null)var h=!1;else{if(r=ui,ui=null,Nu=0,(Me&6)!==0)throw Error(t(331));var f=Me;for(Me|=4,ue=r.current;ue!==null;){var g=ue,w=g.child;if((ue.flags&16)!==0){var S=g.deletions;if(S!==null){for(var k=0;k<S.length;k++){var $=S[k];for(ue=$;ue!==null;){var X=ue;switch(X.tag){case 0:case 11:case 15:Ma(8,X,g)}var ee=X.child;if(ee!==null)ee.return=X,ue=ee;else for(;ue!==null;){X=ue;var J=X.sibling,oe=X.return;if(mg(X),X===$){ue=null;break}if(J!==null){J.return=oe,ue=J;break}ue=oe}}}var ce=g.alternate;if(ce!==null){var he=ce.child;if(he!==null){ce.child=null;do{var ot=he.sibling;he.sibling=null,he=ot}while(he!==null)}}ue=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,ue=w;else e:for(;ue!==null;){if(g=ue,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ma(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,ue=B;break e}ue=g.return}}var O=r.current;for(ue=O;ue!==null;){w=ue;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ue=z;else e:for(w=O;ue!==null;){if(S=ue,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Cu(9,S)}}catch(de){nt(S,S.return,de)}if(S===w){ue=null;break e}var re=S.sibling;if(re!==null){re.return=S.return,ue=re;break e}ue=S.return}}if(Me=f,ii(),an&&typeof an.onPostCommitFiberRoot=="function")try{an.onPostCommitFiberRoot(Hi,r)}catch{}h=!0}return h}finally{Oe=a,In.transition=s}}return!1}function bg(r,s,a){s=mo(a,s),s=Qm(r,s,1),r=oi(r,s,1),s=Kt(),r!==null&&(Gr(r,1,s),en(r,s))}function nt(r,s,a){if(r.tag===3)bg(r,r,a);else for(;s!==null;){if(s.tag===3){bg(s,r,a);break}else if(s.tag===1){var h=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(li===null||!li.has(h))){r=mo(a,r),r=Ym(s,r,1),s=oi(s,r,1),r=Kt(),s!==null&&(Gr(s,1,r),en(s,r));break}}s=s.return}}function KE(r,s,a){var h=r.pingCache;h!==null&&h.delete(s),s=Kt(),r.pingedLanes|=r.suspendedLanes&a,It===r&&(kt&a)===a&&(gt===4||gt===3&&(kt&130023424)===kt&&500>We()-_d?os(r,0):vd|=a),en(r,s)}function Ng(r,s){s===0&&((r.mode&1)===0?s=1:(s=Bs,Bs<<=1,(Bs&130023424)===0&&(Bs=4194304)));var a=Kt();r=kr(r,s),r!==null&&(Gr(r,s,a),en(r,a))}function GE(r){var s=r.memoizedState,a=0;s!==null&&(a=s.retryLane),Ng(r,a)}function QE(r,s){var a=0;switch(r.tag){case 13:var h=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(s),Ng(r,a)}var Og;Og=function(r,s,a){if(r!==null)if(r.memoizedProps!==s.pendingProps||Yt.current)Xt=!0;else{if((r.lanes&a)===0&&(s.flags&128)===0)return Xt=!1,VE(r,s,a);Xt=(r.flags&131072)!==0}else Xt=!1,Je&&(s.flags&1048576)!==0&&dm(s,cu,s.index);switch(s.lanes=0,s.tag){case 2:var h=s.type;Ru(r,s),r=s.pendingProps;var f=oo(s,Lt.current);fo(s,a),f=Yh(null,s,h,r,f,a);var g=Jh();return s.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Jt(h)?(g=!0,au(s)):g=!1,s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,$h(s),f.updater=Iu,s.stateNode=f,f._reactInternals=s,rd(s,h,r,a),s=ad(null,s,h,!0,g,a)):(s.tag=0,Je&&g&&Oh(s),Wt(null,s,f,a),s=s.child),s;case 16:h=s.elementType;e:{switch(Ru(r,s),r=s.pendingProps,f=h._init,h=f(h._payload),s.type=h,f=s.tag=JE(h),r=Bn(h,r),f){case 0:s=od(null,s,h,r,a);break e;case 1:s=sg(null,s,h,r,a);break e;case 11:s=eg(null,s,h,r,a);break e;case 14:s=tg(null,s,h,Bn(h.type,r),a);break e}throw Error(t(306,h,""))}return s;case 0:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),od(r,s,h,f,a);case 1:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),sg(r,s,h,f,a);case 3:e:{if(og(s),r===null)throw Error(t(387));h=s.pendingProps,g=s.memoizedState,f=g.element,Em(r,s),gu(s,h,null,a);var w=s.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){f=mo(Error(t(423)),s),s=ag(r,s,h,a,f);break e}else if(h!==f){f=mo(Error(t(424)),s),s=ag(r,s,h,a,f);break e}else for(dn=ti(s.stateNode.containerInfo.firstChild),hn=s,Je=!0,jn=null,a=_m(s,null,h,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(uo(),h===f){s=br(r,s,a);break e}Wt(r,s,h,a)}s=s.child}return s;case 5:return Sm(s),r===null&&Vh(s),h=s.type,f=s.pendingProps,g=r!==null?r.memoizedProps:null,w=f.children,Ch(h,f)?w=null:g!==null&&Ch(h,g)&&(s.flags|=32),ig(r,s),Wt(r,s,w,a),s.child;case 6:return r===null&&Vh(s),null;case 13:return lg(r,s,a);case 4:return Hh(s,s.stateNode.containerInfo),h=s.pendingProps,r===null?s.child=co(s,null,h,a):Wt(r,s,h,a),s.child;case 11:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),eg(r,s,h,f,a);case 7:return Wt(r,s,s.pendingProps,a),s.child;case 8:return Wt(r,s,s.pendingProps.children,a),s.child;case 12:return Wt(r,s,s.pendingProps.children,a),s.child;case 10:e:{if(h=s.type._context,f=s.pendingProps,g=s.memoizedProps,w=f.value,Ke(fu,h._currentValue),h._currentValue=w,g!==null)if(Un(g.value,w)){if(g.children===f.children&&!Yt.current){s=br(r,s,a);break e}}else for(g=s.child,g!==null&&(g.return=s);g!==null;){var S=g.dependencies;if(S!==null){w=g.child;for(var k=S.firstContext;k!==null;){if(k.context===h){if(g.tag===1){k=xr(-1,a&-a),k.tag=2;var $=g.updateQueue;if($!==null){$=$.shared;var X=$.pending;X===null?k.next=k:(k.next=X.next,X.next=k),$.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),Bh(g.return,a,s),S.lanes|=a;break}k=k.next}}else if(g.tag===10)w=g.type===s.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,S=w.alternate,S!==null&&(S.lanes|=a),Bh(w,a,s),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===s){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}Wt(r,s,f.children,a),s=s.child}return s;case 9:return f=s.type,h=s.pendingProps.children,fo(s,a),f=En(f),h=h(f),s.flags|=1,Wt(r,s,h,a),s.child;case 14:return h=s.type,f=Bn(h,s.pendingProps),f=Bn(h.type,f),tg(r,s,h,f,a);case 15:return ng(r,s,s.type,s.pendingProps,a);case 17:return h=s.type,f=s.pendingProps,f=s.elementType===h?f:Bn(h,f),Ru(r,s),s.tag=1,Jt(h)?(r=!0,au(s)):r=!1,fo(s,a),Km(s,h,f),rd(s,h,f,a),ad(null,s,h,!0,r,a);case 19:return cg(r,s,a);case 22:return rg(r,s,a)}throw Error(t(156,s.tag))};function Dg(r,s){return Us(r,s)}function YE(r,s,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(r,s,a,h){return new YE(r,s,a,h)}function Cd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function JE(r){if(typeof r=="function")return Cd(r)?1:0;if(r!=null){if(r=r.$$typeof,r===U)return 11;if(r===Ot)return 14}return 2}function di(r,s){var a=r.alternate;return a===null?(a=Sn(r.tag,s,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=s,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,s=r.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Vu(r,s,a,h,f,g){var w=2;if(h=r,typeof r=="function")Cd(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return ls(a.children,f,g,s);case I:w=8,f|=8;break;case C:return r=Sn(12,a,s,f|2),r.elementType=C,r.lanes=g,r;case A:return r=Sn(13,a,s,f),r.elementType=A,r.lanes=g,r;case it:return r=Sn(19,a,s,f),r.elementType=it,r.lanes=g,r;case $e:return Mu(a,f,g,s);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:w=10;break e;case L:w=9;break e;case U:w=11;break e;case Ot:w=14;break e;case Dt:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return s=Sn(w,a,s,f),s.elementType=r,s.type=h,s.lanes=g,s}function ls(r,s,a,h){return r=Sn(7,r,h,s),r.lanes=a,r}function Mu(r,s,a,h){return r=Sn(22,r,h,s),r.elementType=$e,r.lanes=a,r.stateNode={isHidden:!1},r}function Pd(r,s,a){return r=Sn(6,r,null,s),r.lanes=a,r}function kd(r,s,a){return s=Sn(4,r.children!==null?r.children:[],r.key,s),s.lanes=a,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}function XE(r,s,a,h,f){this.tag=s,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kr(0),this.expirationTimes=Kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.identifierPrefix=h,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function xd(r,s,a,h,f,g,w,S,k){return r=new XE(r,s,a,S,k),s===1?(s=1,g===!0&&(s|=8)):s=0,g=Sn(3,null,null,s),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},$h(g),r}function ZE(r,s,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:h==null?null:""+h,children:r,containerInfo:s,implementation:a}}function Lg(r){if(!r)return ri;r=r._reactInternals;e:{if(Nn(r)!==r||r.tag!==1)throw Error(t(170));var s=r;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Jt(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Jt(a))return um(r,a,s)}return s}function Vg(r,s,a,h,f,g,w,S,k){return r=xd(a,h,!0,r,f,g,w,S,k),r.context=Lg(null),a=r.current,h=Kt(),f=ci(a),g=xr(h,f),g.callback=s??null,oi(a,g,f),r.current.lanes=f,Gr(r,f,h),en(r,h),r}function Fu(r,s,a,h){var f=s.current,g=Kt(),w=ci(f);return a=Lg(a),s.context===null?s.context=a:s.pendingContext=a,s=xr(g,w),s.payload={element:r},h=h===void 0?null:h,h!==null&&(s.callback=h),r=oi(f,s,w),r!==null&&(Hn(r,f,w,g),mu(r,f,w)),w}function Uu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Mg(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<s?a:s}}function bd(r,s){Mg(r,s),(r=r.alternate)&&Mg(r,s)}function eT(){return null}var Fg=typeof reportError=="function"?reportError:function(r){console.error(r)};function Nd(r){this._internalRoot=r}ju.prototype.render=Nd.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(t(409));Fu(r,s,null,null)},ju.prototype.unmount=Nd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;ss(function(){Fu(null,r,null,null)}),s[Rr]=null}};function ju(r){this._internalRoot=r}ju.prototype.unstable_scheduleHydration=function(r){if(r){var s=jl();r={blockedOn:null,target:r,priority:s};for(var a=0;a<Xn.length&&s!==0&&s<Xn[a].priority;a++);Xn.splice(a,0,r),a===0&&$l(r)}};function Od(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Bu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Ug(){}function tT(r,s,a,h,f){if(f){if(typeof h=="function"){var g=h;h=function(){var $=Uu(w);g.call($)}}var w=Vg(s,h,r,0,null,!1,!1,"",Ug);return r._reactRootContainer=w,r[Rr]=w.current,Sa(r.nodeType===8?r.parentNode:r),ss(),w}for(;f=r.lastChild;)r.removeChild(f);if(typeof h=="function"){var S=h;h=function(){var $=Uu(k);S.call($)}}var k=xd(r,0,!1,null,null,!1,!1,"",Ug);return r._reactRootContainer=k,r[Rr]=k.current,Sa(r.nodeType===8?r.parentNode:r),ss(function(){Fu(s,k,a,h)}),k}function zu(r,s,a,h,f){var g=a._reactRootContainer;if(g){var w=g;if(typeof f=="function"){var S=f;f=function(){var k=Uu(w);S.call(k)}}Fu(s,w,r,f)}else w=tT(a,s,r,f,h);return Uu(w)}Fl=function(r){switch(r.tag){case 3:var s=r.stateNode;if(s.current.memoizedState.isDehydrated){var a=Wr(s.pendingLanes);a!==0&&(Qr(s,a|1),en(s,We()),(Me&6)===0&&(vo=We()+500,ii()))}break;case 13:ss(function(){var h=kr(r,1);if(h!==null){var f=Kt();Hn(h,r,1,f)}}),bd(r,1)}},zs=function(r){if(r.tag===13){var s=kr(r,134217728);if(s!==null){var a=Kt();Hn(s,r,134217728,a)}bd(r,134217728)}},Ul=function(r){if(r.tag===13){var s=ci(r),a=kr(r,s);if(a!==null){var h=Kt();Hn(a,r,s,h)}bd(r,s)}},jl=function(){return Oe},Bl=function(r,s){var a=Oe;try{return Oe=r,s()}finally{Oe=a}},Os=function(r,s,a){switch(s){case"input":if(Qo(r,a),s=a.name,a.type==="radio"&&s!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var h=a[s];if(h!==r&&h.form===r.form){var f=su(h);if(!f)throw Error(t(90));Cs(h),Qo(h,f)}}}break;case"textarea":bs(r,a);break;case"select":s=a.value,s!=null&&yr(r,!!a.multiple,s,!1)}},Ui=Sd,sa=ss;var nT={usingClientEntryPoint:!1,Events:[Ca,io,su,Yn,ia,Sd]},Ba={findFiberByHostInstance:Ji,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rT={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=la(r),r===null?null:r.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||eT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$u.isDisabled&&$u.supportsFiber)try{Hi=$u.inject(rT),an=$u}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nT,tn.createPortal=function(r,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Od(s))throw Error(t(200));return ZE(r,s,null,a)},tn.createRoot=function(r,s){if(!Od(r))throw Error(t(299));var a=!1,h="",f=Fg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),s=xd(r,1,!1,null,null,a,!1,h,f),r[Rr]=s.current,Sa(r.nodeType===8?r.parentNode:r),new Nd(s)},tn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=la(s),r=r===null?null:r.stateNode,r},tn.flushSync=function(r){return ss(r)},tn.hydrate=function(r,s,a){if(!Bu(s))throw Error(t(200));return zu(null,r,s,!0,a)},tn.hydrateRoot=function(r,s,a){if(!Od(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,f=!1,g="",w=Fg;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),s=Vg(s,null,r,1,a??null,f,!1,g,w),r[Rr]=s.current,Sa(r),h)for(r=0;r<h.length;r++)a=h[r],f=a._getVersion,f=f(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,f]:s.mutableSourceEagerHydrationData.push(a,f);return new ju(s)},tn.render=function(r,s,a){if(!Bu(s))throw Error(t(200));return zu(null,r,s,!1,a)},tn.unmountComponentAtNode=function(r){if(!Bu(r))throw Error(t(40));return r._reactRootContainer?(ss(function(){zu(null,null,r,!1,function(){r._reactRootContainer=null,r[Rr]=null})}),!0):!1},tn.unstable_batchedUpdates=Sd,tn.unstable_renderSubtreeIntoContainer=function(r,s,a,h){if(!Bu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return zu(r,s,a,!1,h)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var Kg;function zv(){if(Kg)return Vd.exports;Kg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vd.exports=dT(),Vd.exports}var Gg;function fT(){if(Gg)return Hu;Gg=1;var n=zv();return Hu.createRoot=n.createRoot,Hu.hydrateRoot=n.hydrateRoot,Hu}var pT=fT();const mT=Bv(pT);zv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tl(){return tl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},tl.apply(this,arguments)}var _i;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(_i||(_i={}));const Qg="popstate";function gT(n){n===void 0&&(n={});function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return ef("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:uc(o)}return vT(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function $v(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yT(){return Math.random().toString(36).substr(2,8)}function Yg(n,e){return{usr:n.state,key:n.key,idx:e}}function ef(n,e,t,i){return t===void 0&&(t=null),tl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Mo(e):e,{state:t,key:e&&e.key||i||yT()})}function uc(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Mo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function vT(n,e,t,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d=_i.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(tl({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){d=_i.Pop;let P=_(),W=P==null?null:P-y;y=P,p&&p({action:d,location:V.location,delta:W})}function R(P,W){d=_i.Push;let Y=ef(V.location,P,W);y=_()+1;let Z=Yg(Y,y),ne=V.createHref(Y);try{c.pushState(Z,"",ne)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(ne)}l&&p&&p({action:d,location:V.location,delta:1})}function D(P,W){d=_i.Replace;let Y=ef(V.location,P,W);y=_();let Z=Yg(Y,y),ne=V.createHref(Y);c.replaceState(Z,"",ne),l&&p&&p({action:d,location:V.location,delta:0})}function b(P){let W=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof P=="string"?P:uc(P);return Y=Y.replace(/ $/,"%20"),ht(W,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,W)}let V={get action(){return d},get location(){return n(o,c)},listen(P){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Qg,E),p=P,()=>{o.removeEventListener(Qg,E),p=null}},createHref(P){return e(o,P)},createURL:b,encodeLocation(P){let W=b(P);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:R,replace:D,go(P){return c.go(P)}};return V}var Jg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Jg||(Jg={}));function _T(n,e,t){return t===void 0&&(t="/"),wT(n,e,t)}function wT(n,e,t,i){let o=typeof e=="string"?Mo(e):e,l=Ff(o.pathname||"/",t);if(l==null)return null;let c=Hv(n);ET(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let y=OT(l);d=xT(c[p],y)}return d}function Hv(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let o=(l,c,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let y=Ei([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(ht(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),Hv(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:PT(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,c);else for(let p of qv(l.path))o(l,c,p)}),e}function qv(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=qv(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...c),d.map(p=>n.startsWith("/")&&p===""?"/":p)}function ET(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:kT(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const TT=/^:[\w-]+$/,IT=3,ST=2,RT=1,AT=10,CT=-2,Xg=n=>n==="*";function PT(n,e){let t=n.split("/"),i=t.length;return t.some(Xg)&&(i+=CT),e&&(i+=ST),t.filter(o=>!Xg(o)).reduce((o,l)=>o+(TT.test(l)?IT:l===""?RT:AT),i)}function kT(n,e){return n.length===e.length&&n.slice(0,-1).every((i,o)=>i===e[o])?n[n.length-1]-e[e.length-1]:0}function xT(n,e,t){let{routesMeta:i}=n,o={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],y=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=bT({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),R=p.route;if(!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Ei([l,E.pathname]),pathnameBase:MT(Ei([l,E.pathnameBase])),route:R}),E.pathnameBase!=="/"&&(l=Ei([l,E.pathnameBase]))}return c}function bT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=NT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((y,_,E)=>{let{paramName:R,isOptional:D}=_;if(R==="*"){let V=d[E]||"";c=l.slice(0,l.length-V.length).replace(/(.)\/+$/,"$1")}const b=d[E];return D&&!b?y[R]=void 0:y[R]=(b||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function NT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),$v(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function OT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return $v(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Ff(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function DT(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:o=""}=typeof n=="string"?Mo(n):n;return{pathname:t?t.startsWith("/")?t:LT(t,e):e,search:FT(i),hash:UT(o)}}function LT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Ud(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function VT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wv(n,e){let t=VT(n);return e?t.map((i,o)=>o===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function Kv(n,e,t,i){i===void 0&&(i=!1);let o;typeof n=="string"?o=Mo(n):(o=tl({},n),ht(!o.pathname||!o.pathname.includes("?"),Ud("?","pathname","search",o)),ht(!o.pathname||!o.pathname.includes("#"),Ud("#","pathname","hash",o)),ht(!o.search||!o.search.includes("#"),Ud("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let R=c.split("/");for(;R[0]==="..";)R.shift(),E-=1;o.pathname=R.join("/")}d=E>=0?e[E]:"/"}let p=DT(o,d),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Ei=n=>n.join("/").replace(/\/\/+/g,"/"),MT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),FT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,UT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Gv=["post","put","patch","delete"];new Set(Gv);const BT=["get",...Gv];new Set(BT);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nl(){return nl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nl.apply(this,arguments)}const Uf=Q.createContext(null),zT=Q.createContext(null),ws=Q.createContext(null),Nc=Q.createContext(null),Es=Q.createContext({outlet:null,matches:[],isDataRoute:!1}),Qv=Q.createContext(null);function $T(n,e){let{relative:t}=e===void 0?{}:e;ml()||ht(!1);let{basename:i,navigator:o}=Q.useContext(ws),{hash:l,pathname:c,search:d}=Jv(n,{relative:t}),p=c;return i!=="/"&&(p=c==="/"?i:Ei([i,c])),o.createHref({pathname:p,search:d,hash:l})}function ml(){return Q.useContext(Nc)!=null}function Fo(){return ml()||ht(!1),Q.useContext(Nc).location}function Yv(n){Q.useContext(ws).static||Q.useLayoutEffect(n)}function pr(){let{isDataRoute:n}=Q.useContext(Es);return n?nI():HT()}function HT(){ml()||ht(!1);let n=Q.useContext(Uf),{basename:e,future:t,navigator:i}=Q.useContext(ws),{matches:o}=Q.useContext(Es),{pathname:l}=Fo(),c=JSON.stringify(Wv(o,t.v7_relativeSplatPath)),d=Q.useRef(!1);return Yv(()=>{d.current=!0}),Q.useCallback(function(y,_){if(_===void 0&&(_={}),!d.current)return;if(typeof y=="number"){i.go(y);return}let E=Kv(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Ei([e,E.pathname])),(_.replace?i.replace:i.push)(E,_.state,_)},[e,i,c,l,n])}function Jv(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=Q.useContext(ws),{matches:o}=Q.useContext(Es),{pathname:l}=Fo(),c=JSON.stringify(Wv(o,i.v7_relativeSplatPath));return Q.useMemo(()=>Kv(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function qT(n,e){return WT(n,e)}function WT(n,e,t,i){ml()||ht(!1);let{navigator:o,static:l}=Q.useContext(ws),{matches:c}=Q.useContext(Es),d=c[c.length-1],p=d?d.params:{};d&&d.pathname;let y=d?d.pathnameBase:"/";d&&d.route;let _=Fo(),E;if(e){var R;let W=typeof e=="string"?Mo(e):e;y==="/"||(R=W.pathname)!=null&&R.startsWith(y)||ht(!1),E=W}else E=_;let D=E.pathname||"/",b=D;if(y!=="/"){let W=y.replace(/^\//,"").split("/");b="/"+D.replace(/^\//,"").split("/").slice(W.length).join("/")}let V=_T(n,{pathname:b}),P=JT(V&&V.map(W=>Object.assign({},W,{params:Object.assign({},p,W.params),pathname:Ei([y,o.encodeLocation?o.encodeLocation(W.pathname).pathname:W.pathname]),pathnameBase:W.pathnameBase==="/"?y:Ei([y,o.encodeLocation?o.encodeLocation(W.pathnameBase).pathname:W.pathnameBase])})),c,t,i);return e&&P?Q.createElement(Nc.Provider,{value:{location:nl({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:_i.Pop}},P):P}function KT(){let n=tI(),e=jT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Q.createElement(Q.Fragment,null,Q.createElement("h2",null,"Unexpected Application Error!"),Q.createElement("h3",{style:{fontStyle:"italic"}},e),t?Q.createElement("pre",{style:o},t):null,null)}const GT=Q.createElement(KT,null);class QT extends Q.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Q.createElement(Es.Provider,{value:this.props.routeContext},Q.createElement(Qv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function YT(n){let{routeContext:e,match:t,children:i}=n,o=Q.useContext(Uf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),Q.createElement(Es.Provider,{value:e},i)}function JT(n,e,t,i){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,d=(o=t)==null?void 0:o.errors;if(d!=null){let _=c.findIndex(E=>E.route.id&&(d==null?void 0:d[E.route.id])!==void 0);_>=0||ht(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&i&&i.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:R,errors:D}=t,b=E.route.loader&&R[E.route.id]===void 0&&(!D||D[E.route.id]===void 0);if(E.route.lazy||b){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,R)=>{let D,b=!1,V=null,P=null;t&&(D=d&&E.route.id?d[E.route.id]:void 0,V=E.route.errorElement||GT,p&&(y<0&&R===0?(rI("route-fallback"),b=!0,P=null):y===R&&(b=!0,P=E.route.hydrateFallbackElement||null)));let W=e.concat(c.slice(0,R+1)),Y=()=>{let Z;return D?Z=V:b?Z=P:E.route.Component?Z=Q.createElement(E.route.Component,null):E.route.element?Z=E.route.element:Z=_,Q.createElement(YT,{match:E,routeContext:{outlet:_,matches:W,isDataRoute:t!=null},children:Z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||R===0)?Q.createElement(QT,{location:t.location,revalidation:t.revalidation,component:V,error:D,children:Y(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):Y()},null)}var Xv=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(Xv||{}),Zv=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Zv||{});function XT(n){let e=Q.useContext(Uf);return e||ht(!1),e}function ZT(n){let e=Q.useContext(zT);return e||ht(!1),e}function eI(n){let e=Q.useContext(Es);return e||ht(!1),e}function e_(n){let e=eI(),t=e.matches[e.matches.length-1];return t.route.id||ht(!1),t.route.id}function tI(){var n;let e=Q.useContext(Qv),t=ZT(),i=e_();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function nI(){let{router:n}=XT(Xv.UseNavigateStable),e=e_(Zv.UseNavigateStable),t=Q.useRef(!1);return Yv(()=>{t.current=!0}),Q.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,nl({fromRouteId:e},l)))},[n,e])}const Zg={};function rI(n,e,t){Zg[n]||(Zg[n]=!0)}function iI(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Rn(n){ht(!1)}function sI(n){let{basename:e="/",children:t=null,location:i,navigationType:o=_i.Pop,navigator:l,static:c=!1,future:d}=n;ml()&&ht(!1);let p=e.replace(/^\/*/,"/"),y=Q.useMemo(()=>({basename:p,navigator:l,static:c,future:nl({v7_relativeSplatPath:!1},d)}),[p,d,l,c]);typeof i=="string"&&(i=Mo(i));let{pathname:_="/",search:E="",hash:R="",state:D=null,key:b="default"}=i,V=Q.useMemo(()=>{let P=Ff(_,p);return P==null?null:{location:{pathname:P,search:E,hash:R,state:D,key:b},navigationType:o}},[p,_,E,R,D,b,o]);return V==null?null:Q.createElement(ws.Provider,{value:y},Q.createElement(Nc.Provider,{children:t,value:V}))}function oI(n){let{children:e,location:t}=n;return qT(tf(e),t)}new Promise(()=>{});function tf(n,e){e===void 0&&(e=[]);let t=[];return Q.Children.forEach(n,(i,o)=>{if(!Q.isValidElement(i))return;let l=[...e,o];if(i.type===Q.Fragment){t.push.apply(t,tf(i.props.children,l));return}i.type!==Rn&&ht(!1),!i.props.index||!i.props.children||ht(!1);let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=tf(i.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nf(){return nf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},nf.apply(this,arguments)}function aI(n,e){if(n==null)return{};var t={},i=Object.keys(n),o,l;for(l=0;l<i.length;l++)o=i[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function lI(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function uI(n,e){return n.button===0&&(!e||e==="_self")&&!lI(n)}const cI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hI="6";try{window.__reactRouterVersion=hI}catch{}const dI="startTransition",ey=uT[dI];function fI(n){let{basename:e,children:t,future:i,window:o}=n,l=Q.useRef();l.current==null&&(l.current=gT({window:o,v5Compat:!0}));let c=l.current,[d,p]=Q.useState({action:c.action,location:c.location}),{v7_startTransition:y}=i||{},_=Q.useCallback(E=>{y&&ey?ey(()=>p(E)):p(E)},[p,y]);return Q.useLayoutEffect(()=>c.listen(_),[c,_]),Q.useEffect(()=>iI(i),[i]),Q.createElement(sI,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:c,future:i})}const pI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rf=Q.forwardRef(function(e,t){let{onClick:i,relative:o,reloadDocument:l,replace:c,state:d,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,R=aI(e,cI),{basename:D}=Q.useContext(ws),b,V=!1;if(typeof y=="string"&&mI.test(y)&&(b=y,pI))try{let Z=new URL(window.location.href),ne=y.startsWith("//")?new URL(Z.protocol+y):new URL(y),fe=Ff(ne.pathname,D);ne.origin===Z.origin&&fe!=null?y=fe+ne.search+ne.hash:V=!0}catch{}let P=$T(y,{relative:o}),W=gI(y,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:E});function Y(Z){i&&i(Z),Z.defaultPrevented||W(Z)}return Q.createElement("a",nf({},R,{href:b||P,onClick:V||l?i:Y,ref:t,target:p}))});var ty;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(ty||(ty={}));var ny;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ny||(ny={}));function gI(n,e){let{target:t,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:d}=e===void 0?{}:e,p=pr(),y=Fo(),_=Jv(n,{relative:c});return Q.useCallback(E=>{if(uI(E,t)){E.preventDefault();let R=i!==void 0?i:uc(y)===uc(_);p(n,{replace:R,state:o,preventScrollReset:l,relative:c,viewTransition:d})}},[y,p,_,i,o,t,n,l,c,d])}function yI(){return M.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-50",children:[M.jsx("h1",{className:"text-4xl font-bold mb-6",children:"Welcome to Digital Co-op"}),M.jsxs("div",{className:"space-x-4",children:[M.jsx(rf,{to:"/signup",className:"px-4 py-2 bg-green-600 text-white rounded",children:"Sign Up"}),M.jsx(rf,{to:"/login",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Log In"})]})]})}const vI=()=>{};var ry={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},_I=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const o=n[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],d=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},n_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,d=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|d>>4;let R=(d&15)<<2|y>>6,D=y&63;p||(D=64,c||(R=64)),i.push(t[_],t[E],t[R],t[D])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(t_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_I(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],d=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new wI;const R=l<<2|d>>4;if(i.push(R),y!==64){const D=d<<4&240|y>>2;if(i.push(D),E!==64){const b=y<<6&192|E;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class wI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EI=function(n){const e=t_(n);return n_.encodeByteArray(e,!0)},cc=function(n){return EI(n).replace(/\./g,"")},r_=function(n){try{return n_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II=()=>TI().__FIREBASE_DEFAULTS__,SI=()=>{if(typeof process>"u"||typeof ry>"u")return;const n=ry.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&r_(n[1]);return e&&JSON.parse(e)},Oc=()=>{try{return vI()||II()||SI()||RI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},i_=n=>{var e,t;return(t=(e=Oc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},AI=n=>{const e=i_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},s_=()=>{var n;return(n=Oc())===null||n===void 0?void 0:n.config},o_=n=>{var e;return(e=Oc())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[cc(JSON.stringify(t)),cc(JSON.stringify(c)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function xI(){var n;const e=(n=Oc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DI(){const n=$t();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function LI(){return!xI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VI(){try{return typeof indexedDB=="object"}catch{return!1}}function MI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI="FirebaseError";class zr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=FI,Object.setPrototypeOf(this,zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?UI(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new zr(o,d,i)}}function UI(n,e){return n.replace(jI,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const jI=/\{\$([^}]+)}/g;function BI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function fs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=n[o],c=e[o];if(iy(l)&&iy(c)){if(!fs(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function iy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ha(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function qa(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zI(n,e){const t=new $I(n,e);return t.subscribe.bind(t)}class $I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");HI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=jd),o.error===void 0&&(o.error=jd),o.complete===void 0&&(o.complete=jd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n){return n&&n._delegate?n._delegate:n}class ps{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new CI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KI(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(o,l);const c=this.instances.get(o);return c&&e(c,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WI(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WI(n){return n===us?void 0:n}function KI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const QI={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},YI=be.INFO,JI={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},XI=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),o=JI[e];if(o)console[o](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class jf{constructor(e){this.name=e,this._logLevel=YI,this._logHandler=XI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const ZI=(n,e)=>e.some(t=>n instanceof t);let sy,oy;function eS(){return sy||(sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tS(){return oy||(oy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const a_=new WeakMap,sf=new WeakMap,l_=new WeakMap,Bd=new WeakMap,Bf=new WeakMap;function nS(n){const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ti(n.result)),o()},c=()=>{i(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&a_.set(t,n)}).catch(()=>{}),Bf.set(e,n),e}function rS(n){if(sf.has(n))return;const e=new Promise((t,i)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});sf.set(n,e)}let of={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return sf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||l_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ti(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function iS(n){of=n(of)}function sS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(zd(this),e,...t);return l_.set(i,e.sort?e.sort():[e]),Ti(i)}:tS().includes(n)?function(...e){return n.apply(zd(this),e),Ti(a_.get(this))}:function(...e){return Ti(n.apply(zd(this),e))}}function oS(n){return typeof n=="function"?sS(n):(n instanceof IDBTransaction&&rS(n),ZI(n,eS())?new Proxy(n,of):n)}function Ti(n){if(n instanceof IDBRequest)return nS(n);if(Bd.has(n))return Bd.get(n);const e=oS(n);return e!==n&&(Bd.set(n,e),Bf.set(e,n)),e}const zd=n=>Bf.get(n);function aS(n,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),d=Ti(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Ti(c.result),p.oldVersion,p.newVersion,Ti(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const lS=["get","getKey","getAll","getAllKeys","count"],uS=["put","add","delete","clear"],$d=new Map;function ay(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if($d.get(e))return $d.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=uS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||lS.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return i&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return $d.set(e,l),l}iS(n=>({...n,get:(e,t,i)=>ay(e,t)||n.get(e,t,i),has:(e,t)=>!!ay(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function hS(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",ly="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new jf("@firebase/app"),dS="@firebase/app-compat",fS="@firebase/analytics-compat",pS="@firebase/analytics",mS="@firebase/app-check-compat",gS="@firebase/app-check",yS="@firebase/auth",vS="@firebase/auth-compat",_S="@firebase/database",wS="@firebase/data-connect",ES="@firebase/database-compat",TS="@firebase/functions",IS="@firebase/functions-compat",SS="@firebase/installations",RS="@firebase/installations-compat",AS="@firebase/messaging",CS="@firebase/messaging-compat",PS="@firebase/performance",kS="@firebase/performance-compat",xS="@firebase/remote-config",bS="@firebase/remote-config-compat",NS="@firebase/storage",OS="@firebase/storage-compat",DS="@firebase/firestore",LS="@firebase/vertexai",VS="@firebase/firestore-compat",MS="firebase",FS="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",US={[af]:"fire-core",[dS]:"fire-core-compat",[pS]:"fire-analytics",[fS]:"fire-analytics-compat",[gS]:"fire-app-check",[mS]:"fire-app-check-compat",[yS]:"fire-auth",[vS]:"fire-auth-compat",[_S]:"fire-rtdb",[wS]:"fire-data-connect",[ES]:"fire-rtdb-compat",[TS]:"fire-fn",[IS]:"fire-fn-compat",[SS]:"fire-iid",[RS]:"fire-iid-compat",[AS]:"fire-fcm",[CS]:"fire-fcm-compat",[PS]:"fire-perf",[kS]:"fire-perf-compat",[xS]:"fire-rc",[bS]:"fire-rc-compat",[NS]:"fire-gcs",[OS]:"fire-gcs-compat",[DS]:"fire-fst",[VS]:"fire-fst-compat",[LS]:"fire-vertex","fire-js":"fire-js",[MS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,jS=new Map,uf=new Map;function uy(n,e){try{n.container.addComponent(e)}catch(t){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ko(n){const e=n.name;if(uf.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,n);for(const t of hc.values())uy(t,n);for(const t of jS.values())uy(t,n);return!0}function zf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Cn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ii=new gl("app","Firebase",BS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ps("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ii.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uo=FS;function u_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:lf,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Ii.create("bad-app-name",{appName:String(o)});if(t||(t=s_()),!t)throw Ii.create("no-options");const l=hc.get(o);if(l){if(fs(t,l.options)&&fs(i,l.config))return l;throw Ii.create("duplicate-app",{appName:o})}const c=new GI(o);for(const p of uf.values())c.addComponent(p);const d=new zS(t,i,c);return hc.set(o,d),d}function c_(n=lf){const e=hc.get(n);if(!e&&n===lf&&s_())return u_();if(!e)throw Ii.create("no-app",{appName:n});return e}function Si(n,e,t){var i;let o=(i=US[n])!==null&&i!==void 0?i:n;t&&(o+=`-${t}`);const l=o.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(d.join(" "));return}ko(new ps(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="firebase-heartbeat-database",HS=1,rl="firebase-heartbeat-store";let Hd=null;function h_(){return Hd||(Hd=aS($S,HS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(rl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ii.create("idb-open",{originalErrorMessage:n.message})})),Hd}async function qS(n){try{const t=(await h_()).transaction(rl),i=await t.objectStore(rl).get(d_(n));return await t.done,i}catch(e){if(e instanceof zr)Fr.warn(e.message);else{const t=Ii.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(t.message)}}}async function cy(n,e){try{const i=(await h_()).transaction(rl,"readwrite");await i.objectStore(rl).put(e,d_(n)),await i.done}catch(t){if(t instanceof zr)Fr.warn(t.message);else{const i=Ii.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Fr.warn(i.message)}}}function d_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS=1024,KS=30;class GS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YS(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=hy();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>KS){const c=JS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=hy(),{heartbeatsToSend:i,unsentEntries:o}=QS(this._heartbeatsCache.heartbeats),l=cc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Fr.warn(t),""}}}function hy(){return new Date().toISOString().substring(0,10)}function QS(n,e=WS){const t=[];let i=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),dy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),dy(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class YS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VI()?MI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return cy(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function dy(n){return cc(JSON.stringify({version:2,heartbeats:n})).length}function JS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n){ko(new ps("platform-logger",e=>new cS(e),"PRIVATE")),ko(new ps("heartbeat",e=>new GS(e),"PRIVATE")),Si(af,ly,n),Si(af,ly,"esm2017"),Si("fire-js","")}XS("");function $f(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(t[i[o]]=n[i[o]]);return t}function f_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZS=f_,p_=new gl("auth","Firebase",f_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new jf("@firebase/auth");function eR(n,...e){dc.logLevel<=be.WARN&&dc.warn(`Auth (${Uo}): ${n}`,...e)}function Ju(n,...e){dc.logLevel<=be.ERROR&&dc.error(`Auth (${Uo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(n,...e){throw Hf(n,...e)}function lr(n,...e){return Hf(n,...e)}function m_(n,e,t){const i=Object.assign(Object.assign({},ZS()),{[e]:t});return new gl("auth","Firebase",i).create(e,{appName:n.name})}function Vr(n){return m_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hf(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return p_.create(n,...e)}function Ee(n,e,...t){if(!n)throw Hf(e,...t)}function Dr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ju(e),new Error(e)}function Ur(n,e){n||Dr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function tR(){return fy()==="http:"||fy()==="https:"}function fy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tR()||NI()||"connection"in navigator)?navigator.onLine:!0}function rR(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ur(t>e,"Short delay should be less than long delay!"),this.isMobile=kI()||OI()}get(){return nR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(n,e){Ur(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oR=new vl(3e4,6e4);function Oi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Di(n,e,t,i,o={}){return y_(n,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=yl(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y=Object.assign({method:e,headers:p},l);return bI()||(y.referrerPolicy="no-referrer"),g_.fetch()(await v_(n,n.config.apiHost,t,d),y)})}async function y_(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},iR),e);try{const o=new lR(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw qu(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw qu(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw qu(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw qu(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw m_(n,_,y);Kn(n,_)}}catch(o){if(o instanceof zr)throw o;Kn(n,"network-request-failed",{message:String(o)})}}async function _l(n,e,t,i,o={}){const l=await Di(n,e,t,i,o);return"mfaPendingCredential"in l&&Kn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function v_(n,e,t,i){const o=`${e}${t}?${i}`,l=n,c=l.config.emulator?qf(n.config,o):`${n.config.apiScheme}://${o}`;return sR.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function aR(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(lr(this.auth,"network-request-failed")),oR.get())})}}function qu(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=lr(n,e,i);return o.customData._tokenResponse=t,o}function py(n){return n!==void 0&&n.enterprise!==void 0}class uR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return aR(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cR(n,e){return Di(n,"GET","/v2/recaptchaConfig",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hR(n,e){return Di(n,"POST","/v1/accounts:delete",e)}async function fc(n,e){return Di(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qa(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dR(n,e=!1){const t=pn(n),i=await t.getIdToken(e),o=Wf(i);Ee(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:i,authTime:Qa(qd(o.auth_time)),issuedAtTime:Qa(qd(o.iat)),expirationTime:Qa(qd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function qd(n){return Number(n)*1e3}function Wf(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{const o=r_(t);return o?JSON.parse(o):(Ju("Failed to decode base64 JWT payload"),null)}catch(o){return Ju("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function my(n){const e=Wf(n);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function il(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof zr&&fR(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function fR({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qa(this.lastLoginAt),this.creationTime=Qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pc(n){var e;const t=n.auth,i=await n.getIdToken(),o=await il(n,fc(t,{idToken:i}));Ee(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?__(l.providerUserInfo):[],d=gR(n.providerData,c),p=n.isAnonymous,y=!(n.email&&l.passwordHash)&&!(d!=null&&d.length),_=p?y:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new hf(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function mR(n){const e=pn(n);await pc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gR(n,e){return[...n.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function __(n){return n.map(e=>{var{providerId:t}=e,i=$f(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yR(n,e){const t=await y_(n,{},async()=>{const i=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await v_(n,o,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",g_.fetch()(c,{method:"POST",headers:d,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vR(n,e){return Di(n,"POST","/v2/accounts:revokeToken",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):my(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const t=my(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await yR(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new Ro;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ee(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ee(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ro,this.toJSON())}_performRefresh(){return Dr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n,e){Ee(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,l=$f(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new hf(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await il(this,this.stsTokenManager.getToken(this.auth,e));return Ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dR(this,e)}reload(){return mR(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await pc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await il(this,hR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,l,c,d,p,y,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,R=(o=t.email)!==null&&o!==void 0?o:void 0,D=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,b=(c=t.photoURL)!==null&&c!==void 0?c:void 0,V=(d=t.tenantId)!==null&&d!==void 0?d:void 0,P=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,W=(y=t.createdAt)!==null&&y!==void 0?y:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:Z,emailVerified:ne,isAnonymous:fe,providerData:pe,stsTokenManager:x}=t;Ee(Z&&x,e,"internal-error");const I=Ro.fromJSON(this.name,x);Ee(typeof Z=="string",e,"internal-error"),pi(E,e.name),pi(R,e.name),Ee(typeof ne=="boolean",e,"internal-error"),Ee(typeof fe=="boolean",e,"internal-error"),pi(D,e.name),pi(b,e.name),pi(V,e.name),pi(P,e.name),pi(W,e.name),pi(Y,e.name);const C=new qn({uid:Z,auth:e,email:R,emailVerified:ne,displayName:E,isAnonymous:fe,photoURL:b,phoneNumber:D,tenantId:V,stsTokenManager:I,createdAt:W,lastLoginAt:Y});return pe&&Array.isArray(pe)&&(C.providerData=pe.map(N=>Object.assign({},N))),P&&(C._redirectEventId=P),C}static async _fromIdTokenResponse(e,t,i=!1){const o=new Ro;o.updateFromServerResponse(t);const l=new qn({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await pc(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ee(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?__(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new Ro;d.updateFromIdToken(i);const p=new qn({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new hf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;function Lr(n){Ur(n instanceof Function,"Expected a class definition");let e=gy.get(n);return e?(Ur(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,gy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}w_.type="NONE";const yy=w_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(n,e,t){return`firebase:${n}:${e}:${t}`}class Ao{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=Xu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Xu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await fc(this.auth,{idToken:e}).catch(()=>{});return t?qn._fromGetAccountInfoResponse(this.auth,t,e):null}return qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ao(Lr(yy),e,i);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Lr(yy);const c=Xu(i,e.config.apiKey,e.name);let d=null;for(const y of t)try{const _=await y._get(c);if(_){let E;if(typeof _=="string"){const R=await fc(e,{idToken:_}).catch(()=>{});if(!R)break;E=await qn._fromGetAccountInfoResponse(e,R,_)}else E=qn._fromJSON(e,_);y!==l&&(d=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ao(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Ao(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(S_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A_(e))return"Blackberry";if(C_(e))return"Webos";if(T_(e))return"Safari";if((e.includes("chrome/")||I_(e))&&!e.includes("edge/"))return"Chrome";if(R_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function E_(n=$t()){return/firefox\//i.test(n)}function T_(n=$t()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function I_(n=$t()){return/crios\//i.test(n)}function S_(n=$t()){return/iemobile/i.test(n)}function R_(n=$t()){return/android/i.test(n)}function A_(n=$t()){return/blackberry/i.test(n)}function C_(n=$t()){return/webos/i.test(n)}function Kf(n=$t()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function _R(n=$t()){var e;return Kf(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wR(){return DI()&&document.documentMode===10}function P_(n=$t()){return Kf(n)||R_(n)||C_(n)||A_(n)||/windows phone/i.test(n)||S_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(n,e=[]){let t;switch(n){case"Browser":t=vy($t());break;case"Worker":t=`${vy($t())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Uo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(n,e={}){return Di(n,"GET","/v2/passwordPolicy",Oi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=6;class SR{constructor(e){var t,i,o,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:IR,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,l,c,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _y(this),this.idTokenSubscription=new _y(this),this.beforeStateQueue=new ER(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lr(t)),this._initializationPromise=this.queue(async()=>{var i,o,l;if(!this._deleted&&(this.persistenceManager=await Ao.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fc(this,{idToken:e}),i=await qn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Cn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(c){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await pc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(Vr(this));const t=e?pn(e):null;return t&&Ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await TR(this),t=new SR(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await vR(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lr(e)||this._popupRedirectResolver;Ee(t,this,"argument-error"),this.redirectPersistenceManager=await Ao.create(this,[Lr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&eR(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ts(n){return pn(n)}class _y{constructor(e){this.auth=e,this.observer=null,this.addObserver=zI(t=>this.observer=t)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function AR(n){Dc=n}function x_(n){return Dc.loadJS(n)}function CR(){return Dc.recaptchaEnterpriseScript}function PR(){return Dc.gapiScript}function kR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class xR{constructor(){this.enterprise=new bR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class bR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const NR="recaptcha-enterprise",b_="NO_RECAPTCHA";class OR{constructor(e){this.type=NR,this.auth=Ts(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{cR(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new uR(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;py(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(b_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xR().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&py(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=CR();p.length!==0&&(p+=d),x_(p).then(()=>{o(d,l,c)}).catch(y=>{c(y)})}}).catch(d=>{c(d)})})}}async function wy(n,e,t,i=!1,o=!1){const l=new OR(n);let c;if(o)c=b_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function df(n,e,t,i,o){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await wy(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await wy(n,e,t,t==="getOobCode");return i(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(n,e){const t=zf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(fs(l,e??{}))return o;Kn(o,"already-initialized")}return t.initialize({options:e})}function LR(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Lr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function VR(n,e,t){const i=Ts(n);Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=N_(e),{host:c,port:d}=MR(e),p=d===null?"":`:${d}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ee(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ee(fs(y,i.config.emulator)&&fs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=y,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,FR()}function N_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function MR(n){const e=N_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:Ey(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:Ey(c)}}}function Ey(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function FR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,t){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}}async function UR(n,e){return Di(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n,e){return _l(n,"POST","/v1/accounts:signInWithPassword",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BR(n,e){return _l(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))}async function zR(n,e){return _l(n,"POST","/v1/accounts:signInWithEmailLink",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Gf{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new sl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new sl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,t,"signInWithPassword",jR);case"emailLink":return BR(e,{email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return df(e,i,"signUpPassword",UR);case"emailLink":return zR(e,{idToken:t,email:this._email,oobCode:this._password});default:Kn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(n,e){return _l(n,"POST","/v1/accounts:signInWithIdp",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R="http://localhost";class ms extends Gf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Kn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,l=$f(t,["providerId","signInMethod"]);if(!i||!o)return null;const c=new ms(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Co(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Co(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Co(e,t)}buildRequest(){const e={requestUri:$R,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qR(n){const e=Ha(qa(n)).link,t=e?Ha(qa(e)).deep_link_id:null,i=Ha(qa(n)).deep_link_id;return(i?Ha(qa(i)).link:null)||i||t||e||n}class Qf{constructor(e){var t,i,o,l,c,d;const p=Ha(qa(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=HR((o=p.mode)!==null&&o!==void 0?o:null);Ee(y&&_&&E,"argument-error"),this.apiKey=y,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=qR(e);try{return new Qf(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.providerId=jo.PROVIDER_ID}static credential(e,t){return sl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Qf.parseLink(t);return Ee(i,"argument-error"),sl._fromEmailAndCode(e,i.code,i.tenantId)}}jo.PROVIDER_ID="password";jo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";jo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends O_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends wl{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ms._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return gi.credential(t,i)}catch{return null}}}gi.GOOGLE_SIGN_IN_METHOD="google.com";gi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends wl{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:yi.PROVIDER_ID,signInMethod:yi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yi.credentialFromTaggedObject(e)}static credentialFromError(e){return yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yi.credential(e.oauthAccessToken)}catch{return null}}}yi.GITHUB_SIGN_IN_METHOD="github.com";yi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends wl{constructor(){super("twitter.com")}static credential(e,t){return ms._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return vi.credential(t,i)}catch{return null}}}vi.TWITTER_SIGN_IN_METHOD="twitter.com";vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(n,e){return _l(n,"POST","/v1/accounts:signUp",Oi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await qn._fromIdTokenResponse(e,i,o),c=Ty(i);return new gs({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=Ty(i);return new gs({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function Ty(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc extends zr{constructor(e,t,i,o){var l;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,mc.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new mc(e,t,i,o)}}function D_(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?mc._fromErrorAndOperation(n,l,e,i):l})}async function KR(n,e,t=!1){const i=await il(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return gs._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(n,e,t=!1){const{auth:i}=n;if(Cn(i.app))return Promise.reject(Vr(i));const o="reauthenticate";try{const l=await il(n,D_(i,o,e,n),t);Ee(l.idToken,i,"internal-error");const c=Wf(l.idToken);Ee(c,i,"internal-error");const{sub:d}=c;return Ee(n.uid===d,i,"user-mismatch"),gs._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Kn(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L_(n,e,t=!1){if(Cn(n.app))return Promise.reject(Vr(n));const i="signIn",o=await D_(n,i,e),l=await gs._fromIdTokenResponse(n,i,o);return t||await n._updateCurrentUser(l.user),l}async function QR(n,e){return L_(Ts(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(n){const e=Ts(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YR(n,e,t){if(Cn(n.app))return Promise.reject(Vr(n));const i=Ts(n),c=await df(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WR).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&V_(n),p}),d=await gs._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function M_(n,e,t){return Cn(n.app)?Promise.reject(Vr(n)):QR(pn(n),jo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&V_(n),i})}function JR(n,e,t,i){return pn(n).onIdTokenChanged(e,t,i)}function XR(n,e,t){return pn(n).beforeAuthStateChanged(e,t)}function ZR(n,e,t,i){return pn(n).onAuthStateChanged(e,t,i)}function eA(n){return pn(n).signOut()}const gc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gc,"1"),this.storage.removeItem(gc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1e3,nA=10;class U_ extends F_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=P_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);wR()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,nA):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},tA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}U_.type="LOCAL";const rA=U_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends F_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const B_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Lc(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async y=>y(t.origin,l)),p=await iA(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const y=Yf("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(E){const R=E;if(R.data.eventId===y)switch(R.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(R.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function oA(n){ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function aA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lA(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function uA(){return z_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="firebaseLocalStorageDb",cA=1,yc="firebaseLocalStorage",H_="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Vc(n,e){return n.transaction([yc],e?"readwrite":"readonly").objectStore(yc)}function hA(){const n=indexedDB.deleteDatabase($_);return new El(n).toPromise()}function ff(){const n=indexedDB.open($_,cA);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(yc,{keyPath:H_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(yc)?e(i):(i.close(),await hA(),e(await ff()))})})}async function Iy(n,e,t){const i=Vc(n,!0).put({[H_]:e,value:t});return new El(i).toPromise()}async function dA(n,e){const t=Vc(n,!1).get(e),i=await new El(t).toPromise();return i===void 0?null:i.value}function Sy(n,e){const t=Vc(n,!0).delete(e);return new El(t).toPromise()}const fA=800,pA=3;class q_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>pA)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lc._getInstance(uA()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await aA(),!this.activeServiceWorker)return;this.sender=new sA(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||lA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await Iy(e,gc,"1"),await Sy(e,gc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Iy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>dA(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Sy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Vc(o,!1).getAll();return new El(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),fA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}q_.type="LOCAL";const mA=q_;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(n,e){return e?Lr(e):(Ee(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends Gf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Co(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Co(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Co(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yA(n){return L_(n.auth,new Jf(n),n.bypassAuthState)}function vA(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),GR(t,new Jf(n),n.bypassAuthState)}async function _A(n){const{auth:e,user:t}=n;return Ee(t,e,"internal-error"),KR(t,new Jf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yA;case"linkViaPopup":case"linkViaRedirect":return _A;case"reauthViaPopup":case"reauthViaRedirect":return vA;default:Kn(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new vl(2e3,1e4);class So extends W_{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,So.currentPopupAction&&So.currentPopupAction.cancel(),So.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=Yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,So.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wA.get())};e()}}So.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="pendingRedirect",Zu=new Map;class TA extends W_{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zu.get(this.auth._key());if(!e){try{const i=await IA(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zu.set(this.auth._key(),e)}return this.bypassAuthState||Zu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IA(n,e){const t=AA(e),i=RA(n);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function SA(n,e){Zu.set(n._key(),e)}function RA(n){return Lr(n._redirectPersistence)}function AA(n){return Xu(EA,n.config.apiKey,n.name)}async function CA(n,e,t=!1){if(Cn(n.app))return Promise.reject(Vr(n));const i=Ts(n),o=gA(i,e),c=await new TA(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=10*60*1e3;class kA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xA(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!K_(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PA&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ry(e))}saveEventToCache(e){this.cachedEventUids.add(Ry(e)),this.lastProcessedEventTime=Date.now()}}function Ry(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function K_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xA(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return K_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(n,e={}){return Di(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OA=/^https?/;async function DA(n){if(n.config.emulator)return;const{authorizedDomains:e}=await bA(n);for(const t of e)try{if(LA(t))return}catch{}Kn(n,"unauthorized-domain")}function LA(n){const e=cf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!OA.test(t))return!1;if(NA.test(n))return i===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new vl(3e4,6e4);function Ay(){const n=ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function MA(n){return new Promise((e,t)=>{var i,o,l;function c(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),t(lr(n,"network-request-failed"))},timeout:VA.get()})}if(!((o=(i=ur().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=ur().gapi)===null||l===void 0)&&l.load)c();else{const d=kR("iframefcb");return ur()[d]=()=>{gapi.load?c():t(lr(n,"network-request-failed"))},x_(`${PR()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw ec=null,e})}let ec=null;function FA(n){return ec=ec||MA(n),ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new vl(5e3,15e3),jA="__/auth/iframe",BA="emulator/auth/iframe",zA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$A=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HA(n){const e=n.config;Ee(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?qf(e,BA):`https://${n.config.authDomain}/${jA}`,i={apiKey:e.apiKey,appName:n.name,v:Uo},o=$A.get(n.config.apiHost);o&&(i.eid=o);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${yl(i).slice(1)}`}async function qA(n){const e=await FA(n),t=ur().gapi;return Ee(t,n,"internal-error"),e.open({where:document.body,url:HA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zA,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=lr(n,"network-request-failed"),d=ur().setTimeout(()=>{l(c)},UA.get());function p(){ur().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KA=500,GA=600,QA="_blank",YA="http://localhost";class Cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JA(n,e,t,i=KA,o=GA){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p=Object.assign(Object.assign({},WA),{width:i.toString(),height:o.toString(),top:l,left:c}),y=$t().toLowerCase();t&&(d=I_(y)?QA:t),E_(y)&&(e=e||YA,p.scrollbars="yes");const _=Object.entries(p).reduce((R,[D,b])=>`${R}${D}=${b},`,"");if(_R(y)&&d!=="_self")return XA(e||"",d),new Cy(null);const E=window.open(e||"",d,_);Ee(E,n,"popup-blocked");try{E.focus()}catch{}return new Cy(E)}function XA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="__/auth/handler",eC="emulator/auth/handler",tC=encodeURIComponent("fac");async function Py(n,e,t,i,o,l){Ee(n.config.authDomain,n,"auth-domain-config-required"),Ee(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Uo,eventId:o};if(e instanceof O_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",BI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof wl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await n._getAppCheckToken(),y=p?`#${tC}=${encodeURIComponent(p)}`:"";return`${nC(n)}?${yl(d).slice(1)}${y}`}function nC({config:n}){return n.emulator?qf(n,eC):`https://${n.authDomain}/${ZA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd="webStorageSupport";class rC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=B_,this._completeRedirectFn=CA,this._overrideRedirectResult=SA}async _openPopup(e,t,i,o){var l;Ur((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await Py(e,t,i,cf(),o);return JA(e,c,Yf())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await Py(e,t,i,cf(),o);return oA(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Ur(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await qA(e),i=new kA(e);return t.register("authEvent",o=>(Ee(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wd,{type:Wd},o=>{var l;const c=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Wd];c!==void 0&&t(!!c),Kn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=DA(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return P_()||T_()||Kf()}}const iC=rC;var ky="@firebase/auth",xy="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aC(n){ko(new ps("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ee(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k_(n)},y=new RR(i,o,l,p);return LR(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ko(new ps("auth-internal",e=>{const t=Ts(e.getProvider("auth").getImmediate());return(i=>new sC(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Si(ky,xy,oC(n)),Si(ky,xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=5*60,uC=o_("authIdTokenMaxAge")||lC;let by=null;const cC=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>uC)return;const o=t==null?void 0:t.token;by!==o&&(by=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Mc(n=c_()){const e=zf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=DR(n,{popupRedirectResolver:iC,persistence:[mA,rA,B_]}),i=o_("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=cC(l.toString());XR(t,c,()=>c(t.currentUser)),JR(t,d=>c(d))}}const o=i_("auth");return o&&VR(t,`http://${o}`),t}function hC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}AR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",hC().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aC("Browser");var dC="firebase",fC="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Si(dC,fC,"app");var Ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ri,G_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function C(){}C.prototype=I.prototype,x.D=I.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(N,L,U){for(var A=Array(arguments.length-2),it=2;it<arguments.length;it++)A[it-2]=arguments[it];return I.prototype[L].apply(N,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,C){C||(C=0);var N=Array(16);if(typeof I=="string")for(var L=0;16>L;++L)N[L]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(L=0;16>L;++L)N[L]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=x.g[0],C=x.g[1],L=x.g[2];var U=x.g[3],A=I+(U^C&(L^U))+N[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=U+(L^I&(C^L))+N[1]+3905402710&4294967295,U=I+(A<<12&4294967295|A>>>20),A=L+(C^U&(I^C))+N[2]+606105819&4294967295,L=U+(A<<17&4294967295|A>>>15),A=C+(I^L&(U^I))+N[3]+3250441966&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(U^C&(L^U))+N[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(L^I&(C^L))+N[5]+1200080426&4294967295,U=I+(A<<12&4294967295|A>>>20),A=L+(C^U&(I^C))+N[6]+2821735955&4294967295,L=U+(A<<17&4294967295|A>>>15),A=C+(I^L&(U^I))+N[7]+4249261313&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(U^C&(L^U))+N[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(L^I&(C^L))+N[9]+2336552879&4294967295,U=I+(A<<12&4294967295|A>>>20),A=L+(C^U&(I^C))+N[10]+4294925233&4294967295,L=U+(A<<17&4294967295|A>>>15),A=C+(I^L&(U^I))+N[11]+2304563134&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(U^C&(L^U))+N[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=U+(L^I&(C^L))+N[13]+4254626195&4294967295,U=I+(A<<12&4294967295|A>>>20),A=L+(C^U&(I^C))+N[14]+2792965006&4294967295,L=U+(A<<17&4294967295|A>>>15),A=C+(I^L&(U^I))+N[15]+1236535329&4294967295,C=L+(A<<22&4294967295|A>>>10),A=I+(L^U&(C^L))+N[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^L&(I^C))+N[6]+3225465664&4294967295,U=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(U^I))+N[11]+643717713&4294967295,L=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(L^U))+N[0]+3921069994&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^U&(C^L))+N[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^L&(I^C))+N[10]+38016083&4294967295,U=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(U^I))+N[15]+3634488961&4294967295,L=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(L^U))+N[4]+3889429448&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^U&(C^L))+N[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^L&(I^C))+N[14]+3275163606&4294967295,U=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(U^I))+N[3]+4107603335&4294967295,L=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(L^U))+N[8]+1163531501&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(L^U&(C^L))+N[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=U+(C^L&(I^C))+N[2]+4243563512&4294967295,U=I+(A<<9&4294967295|A>>>23),A=L+(I^C&(U^I))+N[7]+1735328473&4294967295,L=U+(A<<14&4294967295|A>>>18),A=C+(U^I&(L^U))+N[12]+2368359562&4294967295,C=L+(A<<20&4294967295|A>>>12),A=I+(C^L^U)+N[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^L)+N[8]+2272392833&4294967295,U=I+(A<<11&4294967295|A>>>21),A=L+(U^I^C)+N[11]+1839030562&4294967295,L=U+(A<<16&4294967295|A>>>16),A=C+(L^U^I)+N[14]+4259657740&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^U)+N[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^L)+N[4]+1272893353&4294967295,U=I+(A<<11&4294967295|A>>>21),A=L+(U^I^C)+N[7]+4139469664&4294967295,L=U+(A<<16&4294967295|A>>>16),A=C+(L^U^I)+N[10]+3200236656&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^U)+N[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^L)+N[0]+3936430074&4294967295,U=I+(A<<11&4294967295|A>>>21),A=L+(U^I^C)+N[3]+3572445317&4294967295,L=U+(A<<16&4294967295|A>>>16),A=C+(L^U^I)+N[6]+76029189&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(C^L^U)+N[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=U+(I^C^L)+N[12]+3873151461&4294967295,U=I+(A<<11&4294967295|A>>>21),A=L+(U^I^C)+N[15]+530742520&4294967295,L=U+(A<<16&4294967295|A>>>16),A=C+(L^U^I)+N[2]+3299628645&4294967295,C=L+(A<<23&4294967295|A>>>9),A=I+(L^(C|~U))+N[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~L))+N[7]+1126891415&4294967295,U=I+(A<<10&4294967295|A>>>22),A=L+(I^(U|~C))+N[14]+2878612391&4294967295,L=U+(A<<15&4294967295|A>>>17),A=C+(U^(L|~I))+N[5]+4237533241&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~U))+N[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~L))+N[3]+2399980690&4294967295,U=I+(A<<10&4294967295|A>>>22),A=L+(I^(U|~C))+N[10]+4293915773&4294967295,L=U+(A<<15&4294967295|A>>>17),A=C+(U^(L|~I))+N[1]+2240044497&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~U))+N[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~L))+N[15]+4264355552&4294967295,U=I+(A<<10&4294967295|A>>>22),A=L+(I^(U|~C))+N[6]+2734768916&4294967295,L=U+(A<<15&4294967295|A>>>17),A=C+(U^(L|~I))+N[13]+1309151649&4294967295,C=L+(A<<21&4294967295|A>>>11),A=I+(L^(C|~U))+N[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=U+(C^(I|~L))+N[11]+3174756917&4294967295,U=I+(A<<10&4294967295|A>>>22),A=L+(I^(U|~C))+N[2]+718787259&4294967295,L=U+(A<<15&4294967295|A>>>17),A=C+(U^(L|~I))+N[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(L+(A<<21&4294967295|A>>>11))&4294967295,x.g[2]=x.g[2]+L&4294967295,x.g[3]=x.g[3]+U&4294967295}i.prototype.u=function(x,I){I===void 0&&(I=x.length);for(var C=I-this.blockSize,N=this.B,L=this.h,U=0;U<I;){if(L==0)for(;U<=C;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<I;)if(N[L++]=x.charCodeAt(U++),L==this.blockSize){o(this,N),L=0;break}}else for(;U<I;)if(N[L++]=x[U++],L==this.blockSize){o(this,N),L=0;break}}this.h=L,this.o+=I},i.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;var C=8*this.o;for(I=x.length-8;I<x.length;++I)x[I]=C&255,C/=256;for(this.u(x),x=Array(16),I=C=0;4>I;++I)for(var N=0;32>N;N+=8)x[C++]=this.g[I]>>>N&255;return x};function l(x,I){var C=d;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=I(x)}function c(x,I){this.h=I;for(var C=[],N=!0,L=x.length-1;0<=L;L--){var U=x[L]|0;N&&U==I||(C[L]=U,N=!1)}this.g=C}var d={};function p(x){return-128<=x&&128>x?l(x,function(I){return new c([I|0],0>I?-1:0)}):new c([x|0],0>x?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return E;if(0>x)return P(y(-x));for(var I=[],C=1,N=0;x>=C;N++)I[N]=x/C|0,C*=4294967296;return new c(I,0)}function _(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return P(_(x.substring(1),I));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(I,8)),N=E,L=0;L<x.length;L+=8){var U=Math.min(8,x.length-L),A=parseInt(x.substring(L,L+U),I);8>U?(U=y(Math.pow(I,U)),N=N.j(U).add(y(A))):(N=N.j(C),N=N.add(y(A)))}return N}var E=p(0),R=p(1),D=p(16777216);n=c.prototype,n.m=function(){if(V(this))return-P(this).m();for(var x=0,I=1,C=0;C<this.g.length;C++){var N=this.i(C);x+=(0<=N?N:4294967296+N)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b(this))return"0";if(V(this))return"-"+P(this).toString(x);for(var I=y(Math.pow(x,6)),C=this,N="";;){var L=ne(C,I).g;C=W(C,L.j(I));var U=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=L,b(C))return U+N;for(;6>U.length;)U="0"+U;N=U+N}},n.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function b(x){if(x.h!=0)return!1;for(var I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function V(x){return x.h==-1}n.l=function(x){return x=W(this,x),V(x)?-1:b(x)?0:1};function P(x){for(var I=x.g.length,C=[],N=0;N<I;N++)C[N]=~x.g[N];return new c(C,~x.h).add(R)}n.abs=function(){return V(this)?P(this):this},n.add=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],N=0,L=0;L<=I;L++){var U=N+(this.i(L)&65535)+(x.i(L)&65535),A=(U>>>16)+(this.i(L)>>>16)+(x.i(L)>>>16);N=A>>>16,U&=65535,A&=65535,C[L]=A<<16|U}return new c(C,C[C.length-1]&-2147483648?-1:0)};function W(x,I){return x.add(P(I))}n.j=function(x){if(b(this)||b(x))return E;if(V(this))return V(x)?P(this).j(P(x)):P(P(this).j(x));if(V(x))return P(this.j(P(x)));if(0>this.l(D)&&0>x.l(D))return y(this.m()*x.m());for(var I=this.g.length+x.g.length,C=[],N=0;N<2*I;N++)C[N]=0;for(N=0;N<this.g.length;N++)for(var L=0;L<x.g.length;L++){var U=this.i(N)>>>16,A=this.i(N)&65535,it=x.i(L)>>>16,Ot=x.i(L)&65535;C[2*N+2*L]+=A*Ot,Y(C,2*N+2*L),C[2*N+2*L+1]+=U*Ot,Y(C,2*N+2*L+1),C[2*N+2*L+1]+=A*it,Y(C,2*N+2*L+1),C[2*N+2*L+2]+=U*it,Y(C,2*N+2*L+2)}for(N=0;N<I;N++)C[N]=C[2*N+1]<<16|C[2*N];for(N=I;N<2*I;N++)C[N]=0;return new c(C,0)};function Y(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function Z(x,I){this.g=x,this.h=I}function ne(x,I){if(b(I))throw Error("division by zero");if(b(x))return new Z(E,E);if(V(x))return I=ne(P(x),I),new Z(P(I.g),P(I.h));if(V(I))return I=ne(x,P(I)),new Z(P(I.g),I.h);if(30<x.g.length){if(V(x)||V(I))throw Error("slowDivide_ only works with positive integers.");for(var C=R,N=I;0>=N.l(x);)C=fe(C),N=fe(N);var L=pe(C,1),U=pe(N,1);for(N=pe(N,2),C=pe(C,2);!b(N);){var A=U.add(N);0>=A.l(x)&&(L=L.add(C),U=A),N=pe(N,1),C=pe(C,1)}return I=W(x,L.j(I)),new Z(L,I)}for(L=E;0<=x.l(I);){for(C=Math.max(1,Math.floor(x.m()/I.m())),N=Math.ceil(Math.log(C)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),U=y(C),A=U.j(I);V(A)||0<A.l(x);)C-=N,U=y(C),A=U.j(I);b(U)&&(U=R),L=L.add(U),x=W(x,A)}return new Z(L,x)}n.A=function(x){return ne(this,x).h},n.and=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)&x.i(N);return new c(C,this.h&x.h)},n.or=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)|x.i(N);return new c(C,this.h|x.h)},n.xor=function(x){for(var I=Math.max(this.g.length,x.g.length),C=[],N=0;N<I;N++)C[N]=this.i(N)^x.i(N);return new c(C,this.h^x.h)};function fe(x){for(var I=x.g.length+1,C=[],N=0;N<I;N++)C[N]=x.i(N)<<1|x.i(N-1)>>>31;return new c(C,x.h)}function pe(x,I){var C=I>>5;I%=32;for(var N=x.g.length-C,L=[],U=0;U<N;U++)L[U]=0<I?x.i(U+C)>>>I|x.i(U+C+1)<<32-I:x.i(U+C);return new c(L,x.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,G_=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Ri=c}).apply(typeof Ny<"u"?Ny:typeof self<"u"?self:typeof window<"u"?window:{});var Wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Q_,Wa,Y_,tc,pf,J_,X_,Z_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wu=="object"&&Wu];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(u,m){if(m)e:{var v=i;u=u.split(".");for(var T=0;T<u.length-1;T++){var j=u[T];if(!(j in v))break e;v=v[j]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var v=0,T=!1,j={next:function(){if(!T&&v<u.length){var H=v++;return{value:m(H,u[H]),done:!1}}return T=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function _(u,m,v){return u.call.apply(u.bind,arguments)}function E(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,T),u.apply(m,j)}}return function(){return u.apply(m,arguments)}}function R(u,m,v){return R=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,R.apply(null,arguments)}function D(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function b(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,j,H){for(var ie=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ie[ze-2]=arguments[ze];return m.prototype[j].apply(T,ie)}}function V(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function P(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(p(T)){const j=u.length||0,H=T.length||0;u.length=j+H;for(let ie=0;ie<H;ie++)u[j+ie]=T[ie]}else u.push(T)}}class W{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Y(u){return/^[\s\xa0]*$/.test(u)}function Z(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ne(u){return ne[" "](u),u}ne[" "]=function(){};var fe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function pe(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function x(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function I(u){const m={};for(const v in u)m[v]=u[v];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,m){let v,T;for(let j=1;j<arguments.length;j++){T=arguments[j];for(v in T)u[v]=T[v];for(let H=0;H<C.length;H++)v=C[H],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function L(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function U(u){d.setTimeout(()=>{throw u},0)}function A(){var u=ge;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class it{constructor(){this.h=this.g=null}add(m,v){const T=Ot.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Ot=new W(()=>new Dt,u=>u.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let $e,se=!1,ge=new it,ae=()=>{const u=d.Promise.resolve(void 0);$e=()=>{u.then(F)}};var F=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(v){U(v)}var m=Ot;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}se=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,m),d.removeEventListener("test",v,m)}catch{}return u}();function ke(u,m){if(me.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(fe){e:{try{ne(m.nodeName);var j=!0;break e}catch{}j=!1}j||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ke.aa.h.call(this)}}b(ke,me);var De={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),je=0;function qe(u,m,v,T,j){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=j,this.key=++je,this.da=this.fa=!1}function wt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function mr(u){this.src=u,this.g={},this.h=0}mr.prototype.add=function(u,m,v,T,j){var H=u.toString();u=this.g[H],u||(u=this.g[H]=[],this.h++);var ie=$r(u,m,T,j);return-1<ie?(m=u[ie],v||(m.fa=!1)):(m=new qe(m,this.src,H,!!T,j),m.fa=v,u.push(m)),m};function Cs(u,m){var v=m.type;if(v in u.g){var T=u.g[v],j=Array.prototype.indexOf.call(T,m,void 0),H;(H=0<=j)&&Array.prototype.splice.call(T,j,1),H&&(wt(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function $r(u,m,v,T){for(var j=0;j<u.length;++j){var H=u[j];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==T)return j}return-1}var Li="closure_lm_"+(1e6*Math.random()|0),Ps={};function Go(u,m,v,T,j){if(Array.isArray(m)){for(var H=0;H<m.length;H++)Go(u,m[H],v,T,j);return null}return v=Jo(v),u&&u[Ue]?u.K(m,v,y(T)?!!T.capture:!1,j):Qo(u,m,v,!1,T,j)}function Qo(u,m,v,T,j,H){if(!m)throw Error("Invalid event type");var ie=y(j)?!!j.capture:!!j,ze=xs(u);if(ze||(u[Li]=ze=new mr(u)),v=ze.add(m,v,T,ie,H),v.proxy)return v;if(T=kl(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)Ce||(j=ie),j===void 0&&(j=!1),u.addEventListener(m.toString(),T,j);else if(u.attachEvent)u.attachEvent(yr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function kl(){function u(v){return m.call(u.src,u.listener,v)}const m=Yo;return u}function ks(u,m,v,T,j){if(Array.isArray(m))for(var H=0;H<m.length;H++)ks(u,m[H],v,T,j);else T=y(T)?!!T.capture:!!T,v=Jo(v),u&&u[Ue]?(u=u.i,m=String(m).toString(),m in u.g&&(H=u.g[m],v=$r(H,v,T,j),-1<v&&(wt(H[v]),Array.prototype.splice.call(H,v,1),H.length==0&&(delete u.g[m],u.h--)))):u&&(u=xs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=$r(m,v,T,j)),(v=-1<u?m[u]:null)&&gr(v))}function gr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Ue])Cs(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(yr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=xs(m))?(Cs(v,u),v.h==0&&(v.src=null,m[Li]=null)):wt(u)}}}function yr(u){return u in Ps?Ps[u]:Ps[u]="on"+u}function Yo(u,m){if(u.da)u=!0;else{m=new ke(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&gr(u),u=v.call(T,m)}return u}function xs(u){return u=u[Li],u instanceof mr?u:null}var bs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jo(u){return typeof u=="function"?u:(u[bs]||(u[bs]=function(m){return u.handleEvent(m)}),u[bs])}function dt(){G.call(this),this.i=new mr(this),this.M=this,this.F=null}b(dt,G),dt.prototype[Ue]=!0,dt.prototype.removeEventListener=function(u,m,v,T){ks(this,u,m,v,T)};function ft(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new me(m,u);else if(m instanceof me)m.target=m.target||u;else{var j=m;m=new me(T,u),N(m,j)}if(j=!0,v)for(var H=v.length-1;0<=H;H--){var ie=m.g=v[H];j=vr(ie,T,!0,m)&&j}if(ie=m.g=u,j=vr(ie,T,!0,m)&&j,j=vr(ie,T,!1,m)&&j,v)for(H=0;H<v.length;H++)ie=m.g=v[H],j=vr(ie,T,!1,m)&&j}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)wt(v[T]);delete u.g[m],u.h--}}this.F=null},dt.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},dt.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function vr(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var j=!0,H=0;H<m.length;++H){var ie=m[H];if(ie&&!ie.da&&ie.capture==v){var ze=ie.listener,pt=ie.ha||ie.src;ie.fa&&Cs(u.i,ie),j=ze.call(pt,T)!==!1&&j}}return j&&!T.defaultPrevented}function Xo(u,m,v){if(typeof u=="function")v&&(u=R(u,v));else if(u&&typeof u.handleEvent=="function")u=R(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Hr(u){u.g=Xo(()=>{u.g=null,u.i&&(u.i=!1,Hr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Vi extends G{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Hr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(u){G.call(this),this.h=u,this.g={}}b(Mi,G);var Zo=[];function ea(u){pe(u.g,function(m,v){this.g.hasOwnProperty(v)&&gr(m)},u),u.g={}}Mi.prototype.N=function(){Mi.aa.N.call(this),ea(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ta=d.JSON.stringify,na=d.JSON.parse,ra=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Fi(){}Fi.prototype.h=null;function Ns(u){return u.h||(u.h=u.i())}function Os(){}var mn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qn(){me.call(this,"d")}b(Qn,me);function Ds(){me.call(this,"c")}b(Ds,me);var Yn={},ia=null;function Ui(){return ia=ia||new dt}Yn.La="serverreachability";function sa(u){me.call(this,Yn.La,u)}b(sa,me);function _r(u){const m=Ui();ft(m,new sa(m))}Yn.STAT_EVENT="statevent";function oa(u,m){me.call(this,Yn.STAT_EVENT,u),this.stat=m}b(oa,me);function st(u){const m=Ui();ft(m,new oa(m,u))}Yn.Ma="timingevent";function Ls(u,m){me.call(this,Yn.Ma,u),this.size=m}b(Ls,me);function xn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function ji(){this.g=!0}ji.prototype.xa=function(){this.g=!1};function Bi(u,m,v,T,j,H){u.info(function(){if(u.g)if(H)for(var ie="",ze=H.split("&"),pt=0;pt<ze.length;pt++){var Le=ze[pt].split("=");if(1<Le.length){var Et=Le[0];Le=Le[1];var lt=Et.split("_");ie=2<=lt.length&&lt[1]=="type"?ie+(Et+"="+Le+"&"):ie+(Et+"=redacted&")}}else ie=null;else ie=H;return"XMLHTTP REQ ("+T+") [attempt "+j+"]: "+m+`
`+v+`
`+ie})}function Vs(u,m,v,T,j,H,ie){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+j+"]: "+m+`
`+v+`
`+H+" "+ie})}function bn(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+lh(u,v)+(T?" "+T:"")})}function aa(u,m){u.info(function(){return"TIMEOUT: "+m})}ji.prototype.info=function(){};function lh(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var j=T[1];if(Array.isArray(j)&&!(1>j.length)){var H=j[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ie=1;ie<j.length;ie++)j[ie]=""}}}}return ta(v)}catch{return m}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nn;function zi(){}b(zi,Fi),zi.prototype.g=function(){return new XMLHttpRequest},zi.prototype.i=function(){return{}},Nn=new zi;function On(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Mi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bl}function bl(){this.i=null,this.g="",this.h=!1}var la={},Fs={};function Us(u,m,v){u.L=1,u.v=Qr(ln(m)),u.m=v,u.P=!0,ua(u,null)}function ua(u,m){u.F=Date.now(),We(u),u.A=ln(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Jr(v.i,"t",T),u.C=0,v=u.j.J,u.h=new bl,u.g=Ql(u.j,v?m:null,!u.m),0<u.O&&(u.M=new Vi(R(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var j="readystatechange";Array.isArray(j)||(j&&(Zo[0]=j.toString()),j=Zo);for(var H=0;H<j.length;H++){var ie=Go(v,j[H],T||m.handleEvent,!1,m.h||m);if(!ie)break;m.g[ie.key]=ie}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),_r(),Bi(u.i,u.u,u.A,u.l,u.R,u.m)}On.prototype.ca=function(u){u=u.target;const m=this.M;m&&Qt(u)==3?m.j():this.Y(u)},On.prototype.Y=function(u){try{if(u==this.g)e:{const lt=Qt(this.g);var m=this.g.Ba();const vn=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||ma(this.g)))){this.J||lt!=4||m==7||(m==8||0>=vn?_r(3):_r(2)),$i(this);var v=this.g.Z();this.X=v;t:if(Nl(this)){var T=ma(this.g);u="";var j=T.length,H=Qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),qr(this);var ie="";break t}this.h.i=new d.TextDecoder}for(m=0;m<j;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(H&&m==j-1)});T.length=0,this.h.g+=u,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=v==200,Vs(this.i,this.u,this.A,this.l,this.R,lt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,pt=this.g;if((ze=pt.g?pt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(ze)){var Le=ze;break t}}Le=null}if(v=Le)bn(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ca(this,v);else{this.o=!1,this.s=3,st(12),gn(this),qr(this);break e}}if(this.P){v=!0;let cn;for(;!this.J&&this.C<ie.length;)if(cn=uh(this,ie),cn==Fs){lt==4&&(this.s=4,st(14),v=!1),bn(this.i,this.l,null,"[Incomplete Response]");break}else if(cn==la){this.s=4,st(15),bn(this.i,this.l,ie,"[Invalid Chunk]"),v=!1;break}else bn(this.i,this.l,cn,null),ca(this,cn);if(Nl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||ie.length!=0||this.h.h||(this.s=1,st(16),v=!1),this.o=this.o&&v,!v)bn(this.i,this.l,ie,"[Invalid Chunked Response]"),gn(this),qr(this);else if(0<ie.length&&!this.W){this.W=!0;var Et=this.j;Et.g==this&&Et.ba&&!Et.M&&(Et.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),ya(Et),Et.M=!0,st(11))}}else bn(this.i,this.l,ie,null),ca(this,ie);lt==4&&gn(this),this.o&&!this.J&&(lt==4?Ys(this.j,this):(this.o=!1,We(this)))}else qs(this.g),v==400&&0<ie.indexOf("Unknown SID")?(this.s=3,st(12)):(this.s=0,st(13)),gn(this),qr(this)}}}catch{}finally{}};function Nl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function uh(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?Fs:(v=Number(m.substring(v,T)),isNaN(v)?la:(T+=1,T+v>m.length?Fs:(m=m.slice(T,T+v),u.C=T+v,m)))}On.prototype.cancel=function(){this.J=!0,gn(this)};function We(u){u.S=Date.now()+u.I,Ol(u,u.I)}function Ol(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xn(R(u.ba,u),m)}function $i(u){u.B&&(d.clearTimeout(u.B),u.B=null)}On.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(aa(this.i,this.A),this.L!=2&&(_r(),st(17)),gn(this),this.s=2,qr(this)):Ol(this,this.S-u)};function qr(u){u.j.G==0||u.J||Ys(u.j,u)}function gn(u){$i(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ea(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function ca(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ht(v.h,u))){if(!u.K&&Ht(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var j=T;if(j[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Qs(v),Fn(v);else break e;Gs(v),st(18)}}else v.za=j[1],0<v.za-v.T&&37500>j[2]&&v.F&&v.v==0&&!v.C&&(v.C=xn(R(v.Za,v),6e3));if(1>=Ll(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Sr(v,11)}else if((u.K||v.g==u)&&Qs(v),!Y(m))for(j=v.Da.g.parse(m),m=0;m<j.length;m++){let Le=j[m];if(v.T=Le[0],Le=Le[1],v.G==2)if(Le[0]=="c"){v.K=Le[1],v.ia=Le[2];const Et=Le[3];Et!=null&&(v.la=Et,v.j.info("VER="+v.la));const lt=Le[4];lt!=null&&(v.Aa=lt,v.j.info("SVER="+v.Aa));const vn=Le[5];vn!=null&&typeof vn=="number"&&0<vn&&(T=1.5*vn,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const cn=u.g;if(cn){const Yi=cn.g?cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yi){var H=T.h;H.g||Yi.indexOf("spdy")==-1&&Yi.indexOf("quic")==-1&&Yi.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ha(H,H.h),H.h=null))}if(T.D){const Xs=cn.g?cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xs&&(T.ya=Xs,He(T.I,T.D,Xs))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var ie=u;if(T.qa=Gl(T,T.J?T.ia:null,T.W),ie.K){Vl(T.h,ie);var ze=ie,pt=T.L;pt&&(ze.I=pt),ze.B&&($i(ze),We(ze)),T.g=ie}else Qi(T);0<v.i.length&&er(v)}else Le[0]!="stop"&&Le[0]!="close"||Sr(v,7);else v.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Sr(v,7):Ct(v):Le[0]!="noop"&&v.l&&v.l.ta(Le),v.v=0)}}_r(4)}catch{}}var Dl=class{constructor(u,m){this.g=u,this.map=m}};function Hi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function an(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ll(u){return u.h?1:u.g?u.g.size:0}function Ht(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function ha(u,m){u.g?u.g.add(m):u.h=m}function Vl(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Hi.prototype.cancel=function(){if(this.i=Ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ml(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return V(u.i)}function js(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function Bs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function Wr(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=Bs(u),T=js(u),j=T.length,H=0;H<j;H++)m.call(void 0,T[H],v&&v[H],u)}var qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ch(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),j=null;if(0<=T){var H=u[v].substring(0,T);j=u[v].substring(T+1)}else H=u[v];m(H,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function wr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof wr){this.h=u.h,Wi(this,u.j),this.o=u.o,this.g=u.g,Kr(this,u.s),this.l=u.l;var m=u.i,v=new Jn;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Gr(this,v),this.m=u.m}else u&&(m=String(u).match(qi))?(this.h=!1,Wi(this,m[1]||"",!0),this.o=Oe(m[2]||""),this.g=Oe(m[3]||"",!0),Kr(this,m[4]),this.l=Oe(m[5]||"",!0),Gr(this,m[6]||"",!0),this.m=Oe(m[7]||"")):(this.h=!1,this.i=new Jn(null,this.h))}wr.prototype.toString=function(){var u=[],m=this.j;m&&u.push(Yr(m,zs,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Yr(m,zs,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Yr(v,v.charAt(0)=="/"?jl:Ul,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Yr(v,da)),u.join("")};function ln(u){return new wr(u)}function Wi(u,m,v){u.j=v?Oe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function Kr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Gr(u,m,v){m instanceof Jn?(u.i=m,Xn(u.i,u.h)):(v||(m=Yr(m,Bl)),u.i=new Jn(m,u.h))}function He(u,m,v){u.i.set(m,v)}function Qr(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Oe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yr(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Fl),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Fl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var zs=/[#\/\?@]/g,Ul=/[#\?:]/g,jl=/[#\?]/g,Bl=/[#\?@]/g,da=/#/g;function Jn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function At(u){u.g||(u.g=new Map,u.h=0,u.i&&ch(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}n=Jn.prototype,n.add=function(u,m){At(this),this.i=null,u=yn(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function Dn(u,m){At(u),m=yn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ln(u,m){return At(u),m=yn(u,m),u.g.has(m)}n.forEach=function(u,m){At(this),this.g.forEach(function(v,T){v.forEach(function(j){u.call(m,j,T,this)},this)},this)},n.na=function(){At(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const j=u[T];for(let H=0;H<j.length;H++)v.push(m[T])}return v},n.V=function(u){At(this);let m=[];if(typeof u=="string")Ln(this,u)&&(m=m.concat(this.g.get(yn(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},n.set=function(u,m){return At(this),this.i=null,u=yn(this,u),Ln(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},n.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Jr(u,m,v){Dn(u,m),0<v.length&&(u.i=null,u.g.set(yn(u,m),V(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const H=encodeURIComponent(String(T)),ie=this.V(T);for(T=0;T<ie.length;T++){var j=H;ie[T]!==""&&(j+="="+encodeURIComponent(String(ie[T]))),u.push(j)}}return this.i=u.join("&")};function yn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Xn(u,m){m&&!u.j&&(At(u),u.i=null,u.g.forEach(function(v,T){var j=T.toLowerCase();T!=j&&(Dn(this,T),Jr(this,j,v))},u)),u.j=m}function hh(u,m){const v=new ji;if(d.Image){const T=new Image;T.onload=D(Gt,v,"TestLoadImage: loaded",!0,m,T),T.onerror=D(Gt,v,"TestLoadImage: error",!1,m,T),T.onabort=D(Gt,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=D(Gt,v,"TestLoadImage: timeout",!1,m,T),d.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function zl(u,m){const v=new ji,T=new AbortController,j=setTimeout(()=>{T.abort(),Gt(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(H=>{clearTimeout(j),H.ok?Gt(v,"TestPingServer: ok",!0,m):Gt(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(j),Gt(v,"TestPingServer: error",!1,m)})}function Gt(u,m,v,T,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),T(v)}catch{}}function dh(){this.g=new ra}function $l(u,m,v){const T=v||"";try{Wr(u,function(j,H){let ie=j;y(j)&&(ie=ta(j)),m.push(T+H+"="+encodeURIComponent(ie))})}catch(j){throw m.push(T+"type="+encodeURIComponent("_badmap")),j}}function Er(u){this.l=u.Ub||null,this.j=u.eb||!1}b(Er,Fi),Er.prototype.g=function(){return new Ki(this.l,this.j)},Er.prototype.i=function(u){return function(){return u}}({});function Ki(u,m){dt.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ki,dt),n=Ki.prototype,n.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Mn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vn(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mn(this)),this.g&&(this.readyState=3,Mn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?Vn(this):Mn(this),this.readyState==3&&Hl(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Vn(this))},n.Qa=function(u){this.g&&(this.response=u,Vn(this))},n.ga=function(){this.g&&Vn(this)};function Vn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mn(u)}n.setRequestHeader=function(u,m){this.u.append(u,m)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Mn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ki.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Tr(u){let m="";return pe(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Xr(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=Tr(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):He(u,m,v))}function Ye(u){dt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ye,dt);var fh=/^https?$/i,fa=["POST","PUT"];n=Ye.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nn.g(),this.v=this.o?Ns(this.o):Ns(Nn),this.g.onreadystatechange=R(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(H){Gi(this,H);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var j in T)v.set(j,T[j]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const H of T.keys())v.set(H,T.get(H));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),j=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(fa,m,void 0))||T||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ie]of v)this.g.setRequestHeader(H,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hs(this),this.u=!0,this.g.send(u),this.u=!1}catch(H){Gi(this,H)}};function Gi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,$s(u),un(u)}function $s(u){u.A||(u.A=!0,ft(u,"complete"),ft(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ft(this,"complete"),ft(this,"abort"),un(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),un(this,!0)),Ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pa(this):this.bb())},n.bb=function(){pa(this)};function pa(u){if(u.h&&typeof c<"u"&&(!u.v[1]||Qt(u)!=4||u.Z()!=2)){if(u.u&&Qt(u)==4)Xo(u.Ea,0,u);else if(ft(u,"readystatechange"),Qt(u)==4){u.h=!1;try{const ie=u.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=ie===0){var j=String(u.D).match(qi)[1]||null;!j&&d.self&&d.self.location&&(j=d.self.location.protocol.slice(0,-1)),T=!fh.test(j?j.toLowerCase():"")}v=T}if(v)ft(u,"complete"),ft(u,"success");else{u.m=6;try{var H=2<Qt(u)?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.Z()+"]",$s(u)}}finally{un(u)}}}}function un(u,m){if(u.g){Hs(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ft(u,"ready");try{v.onreadystatechange=T}catch{}}}function Hs(u){u.I&&(d.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Qt(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Qt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),na(m)}};function ma(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function qs(u){const m={};u=(u.g&&2<=Qt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(Y(u[T]))continue;var v=L(u[T]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[j]||[];m[j]=H,H.push(v)}x(m,function(T){return T.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zn(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function ga(u){this.Aa=0,this.i=[],this.j=new ji,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zn("baseRetryDelayMs",5e3,u),this.cb=Zn("retryDelaySeedMs",1e4,u),this.Wa=Zn("forwardChannelMaxRetries",2,u),this.wa=Zn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Hi(u&&u.concurrentRequestLimit),this.Da=new dh,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ga.prototype,n.la=8,n.G=1,n.connect=function(u,m,v,T){st(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Gl(this,null,this.W),er(this)};function Ct(u){if(Ws(u),u.G==3){var m=u.U++,v=ln(u.I);if(He(v,"SID",u.K),He(v,"RID",m),He(v,"TYPE","terminate"),Ir(u,v),m=new On(u,u.j,m),m.L=2,m.v=Qr(ln(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=m.v,v=!0),v||(m.g=Ql(m.j,null),m.g.ea(m.v)),m.F=Date.now(),We(m)}Kl(u)}function Fn(u){u.g&&(ya(u),u.g.cancel(),u.g=null)}function Ws(u){Fn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Qs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function er(u){if(!an(u.h)&&!u.s){u.s=!0;var m=u.Ga;$e||ae(),se||($e(),se=!0),ge.add(m,u),u.B=0}}function ph(u,m){return Ll(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xn(R(u.Ga,u,m),Wl(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const j=new On(this,this.j,u);let H=this.o;if(this.S&&(H?(H=I(H),N(H,this.S)):H=this.S),this.m!==null||this.O||(j.H=H,H=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=Zr(this,j,m),v=ln(this.I),He(v,"RID",u),He(v,"CVER",22),this.D&&He(v,"X-HTTP-Session-Id",this.D),Ir(this,v),H&&(this.O?m="headers="+encodeURIComponent(String(Tr(H)))+"&"+m:this.m&&Xr(v,this.m,H)),ha(this.h,j),this.Ua&&He(v,"TYPE","init"),this.P?(He(v,"$req",m),He(v,"SID","null"),j.T=!0,Us(j,v,null)):Us(j,v,m),this.G=2}}else this.G==3&&(u?Ks(this,u):this.i.length==0||an(this.h)||Ks(this))};function Ks(u,m){var v;m?v=m.l:v=u.U++;const T=ln(u.I);He(T,"SID",u.K),He(T,"RID",v),He(T,"AID",u.T),Ir(u,T),u.m&&u.o&&Xr(T,u.m,u.o),v=new On(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=Zr(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),ha(u.h,v),Us(v,T,m)}function Ir(u,m){u.H&&pe(u.H,function(v,T){He(m,T,v)}),u.l&&Wr({},function(v,T){He(m,T,v)})}function Zr(u,m,v){v=Math.min(u.i.length,v);var T=u.l?R(u.l.Na,u.l,u):null;e:{var j=u.i;let H=-1;for(;;){const ie=["count="+v];H==-1?0<v?(H=j[0].g,ie.push("ofs="+H)):H=0:ie.push("ofs="+H);let ze=!0;for(let pt=0;pt<v;pt++){let Le=j[pt].g;const Et=j[pt].map;if(Le-=H,0>Le)H=Math.max(0,j[pt].g-100),ze=!1;else try{$l(Et,ie,"req"+Le+"_")}catch{T&&T(Et)}}if(ze){T=ie.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function Qi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;$e||ae(),se||($e(),se=!0),ge.add(m,u),u.v=0}}function Gs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xn(R(u.Fa,u),Wl(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xn(R(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,st(10),Fn(this),ql(this))};function ya(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function ql(u){u.g=new On(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=ln(u.qa);He(m,"RID","rpc"),He(m,"SID",u.K),He(m,"AID",u.T),He(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(m,"TO",u.ja),He(m,"TYPE","xmlhttp"),Ir(u,m),u.m&&u.o&&Xr(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Qr(ln(m)),v.m=null,v.P=!0,ua(v,u)}n.Za=function(){this.C!=null&&(this.C=null,Fn(this),Gs(this),st(19))};function Qs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ys(u,m){var v=null;if(u.g==m){Qs(u),ya(u),u.g=null;var T=2}else if(Ht(u.h,m))v=m.D,Vl(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var j=u.B;T=Ui(),ft(T,new Ls(T,v)),er(u)}else Qi(u);else if(j=m.s,j==3||j==0&&0<m.X||!(T==1&&ph(u,m)||T==2&&Gs(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),j){case 1:Sr(u,5);break;case 4:Sr(u,10);break;case 3:Sr(u,6);break;default:Sr(u,2)}}}function Wl(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Sr(u,m){if(u.j.info("Error code "+m),m==2){var v=R(u.fb,u),T=u.Xa;const j=!T;T=new wr(T||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wi(T,"https"),Qr(T),j?hh(T.toString(),v):zl(T.toString(),v)}else st(2);u.G=0,u.l&&u.l.sa(m),Kl(u),Ws(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),st(2)):(this.j.info("Failed to ping google.com"),st(1))};function Kl(u){if(u.G=0,u.ka=[],u.l){const m=Ml(u.h);(m.length!=0||u.i.length!=0)&&(P(u.ka,m),P(u.ka,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.ra()}}function Gl(u,m,v){var T=v instanceof wr?ln(v):new wr(v);if(T.g!="")m&&(T.g=m+"."+T.g),Kr(T,T.s);else{var j=d.location;T=j.protocol,m=m?m+"."+j.hostname:j.hostname,j=+j.port;var H=new wr(null);T&&Wi(H,T),m&&(H.g=m),j&&Kr(H,j),v&&(H.l=v),T=H}return v=u.D,m=u.ya,v&&m&&He(T,v,m),He(T,"VER",u.la),Ir(u,T),T}function Ql(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ye(new Er({eb:v})):new Ye(u.pa),m.Ha(u.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function va(){}n=va.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Js(){}Js.prototype.g=function(u,m){return new qt(u,m)};function qt(u,m){dt.call(this),this.g=new ga(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!Y(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!Y(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new tr(this)}b(qt,dt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){Ct(this.g)},qt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ta(u),u=v);m.i.push(new Dl(m.Ya++,u)),m.G==3&&er(m)},qt.prototype.N=function(){this.g.l=null,delete this.j,Ct(this.g),delete this.g,qt.aa.N.call(this)};function Yl(u){Qn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}b(Yl,Qn);function Jl(){Ds.call(this),this.status=1}b(Jl,Ds);function tr(u){this.g=u}b(tr,va),tr.prototype.ua=function(){ft(this.g,"a")},tr.prototype.ta=function(u){ft(this.g,new Yl(u))},tr.prototype.sa=function(u){ft(this.g,new Jl)},tr.prototype.ra=function(){ft(this.g,"b")},Js.prototype.createWebChannel=Js.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,Z_=function(){return new Js},X_=function(){return Ui()},J_=Yn,pf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,tc=Ms,xl.COMPLETE="complete",Y_=xl,Os.EventType=mn,mn.OPEN="a",mn.CLOSE="b",mn.ERROR="c",mn.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Wa=Os,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,Q_=Ye}).apply(typeof Wu<"u"?Wu:typeof self<"u"?self:typeof window<"u"?window:{});const Oy="@firebase/firestore",Dy="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new jf("@firebase/firestore");function wo(){return ys.logLevel}function le(n,...e){if(ys.logLevel<=be.DEBUG){const t=e.map(Xf);ys.debug(`Firestore (${Bo}): ${n}`,...t)}}function jr(n,...e){if(ys.logLevel<=be.ERROR){const t=e.map(Xf);ys.error(`Firestore (${Bo}): ${n}`,...t)}}function xo(n,...e){if(ys.logLevel<=be.WARN){const t=e.map(Xf);ys.warn(`Firestore (${Bo}): ${n}`,...t)}}function Xf(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,e0(n,i,t)}function e0(n,e,t){let i=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw jr(i),new Error(i)}function Be(n,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,n||e0(e,o,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends zr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class pC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(jt.UNAUTHENTICATED))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class gC{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Be(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ai,e.enqueueRetryable(()=>o(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ai)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Be(typeof i.accessToken=="string",31837,{l:i}),new t0(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Be(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class yC{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class vC{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new yC(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ly{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Be(this.o===void 0,3512);const i=l=>{l.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,le("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const o=l=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ly(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Be(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ly(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=wC(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function mf(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),o=e.codePointAt(t);if(i!==o){if(i<128&&o<128)return Pe(i,o);{const l=n0(),c=EC(l.encode(Vy(n,t)),l.encode(Vy(e,t)));return c!==0?c:Pe(i,o)}}t+=i>65535?2:1}return Pe(n.length,e.length)}function Vy(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function EC(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Pe(n[t],e[t]);return Pe(n.length,e.length)}function bo(n,e,t){return n.length===e.length&&n.every((i,o)=>t(i,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=-62135596800,Fy=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Fy);return new vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<My)throw new _e(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fy}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-My;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new vt(0,0))}static max(){return new Se(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Te(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=ar.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Pe(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),o=ar.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?ar.extractNumericId(e).compare(ar.extractNumericId(t)):mf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ri.fromString(e.substring(4,e.length-2))}}class rt extends ar{construct(e,t,i){return new rt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new _e(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(o=>o.length>0))}return new rt(t)}static emptyPath(){return new rt([])}}const TC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ar{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return TC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Uy}static keyField(){return new bt([Uy])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new _e(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new _e(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new _e(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(rt.fromString(e))}static fromName(e){return new we(rt.fromString(e).popFirst(5))}static empty(){return new we(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return rt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new rt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=-1;function IC(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(i===1e9?new vt(t+1,0):new vt(t,i));return new Ci(o,we.empty(),e)}function SC(n){return new Ci(n.readTime,n.key,ol)}class Ci{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ci(Se.min(),we.empty(),ol)}static max(){return new Ci(Se.max(),we.empty(),ol)}}function RC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==AC)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):K.reject(t)}static resolve(e){return new K((t,i)=>{t(e)})}static reject(e){return new K((t,i)=>{i(e)})}static waitFor(e){return new K((t,i)=>{let o=0,l=0,c=!1;e.forEach(d=>{++o,d.next(()=>{++l,c&&l===o&&t()},p=>i(p))}),c=!0,l===o&&t()})}static or(e){let t=K.resolve(!1);for(const i of e)t=t.next(o=>o?K.resolve(o):i());return t}static forEach(e,t){const i=[];return e.forEach((o,l)=>{i.push(t.call(this,o,l))}),this.waitFor(i)}static mapArray(e,t){return new K((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(_=>{c[y]=_,++d,d===l&&i(c)},_=>o(_))}})}static doWhile(e,t){return new K((i,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):i()};l()})}}function PC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $o(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Fc.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf=-1;function Uc(n){return n==null}function vc(n){return n===0&&1/n==-1/0}function kC(n){return typeof n=="number"&&Number.isInteger(n)&&!vc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="";function xC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jy(e)),e=bC(n.get(t),e);return jy(e)}function bC(n,e){let t=e;const i=n.length;for(let o=0;o<i;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case i0:t+="";break;default:t+=l}}return t}function jy(n){return n+i0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Is(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function s0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}}class Ku{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??xt.RED,this.left=o??xt.EMPTY,this.right=l??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new xt(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return xt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zy(this.data.getIterator())}getIteratorFrom(e){return new zy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof _t)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _t(this.comparator);return t.data=e,t}}class zy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new _t(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new o0("Invalid base64 string: "+l):l}}(e);return new Nt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l}(e);return new Nt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const NC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(Be(!!n,39018),typeof n=="string"){let e=0;const t=NC.exec(n);if(Be(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(n.seconds),nanos:at(n.nanos)}}function at(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ki(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0="server_timestamp",l0="__type__",u0="__previous_value__",c0="__local_write_time__";function ep(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[l0])===null||t===void 0?void 0:t.stringValue)===a0}function jc(n){const e=n.mapValue.fields[u0];return ep(e)?jc(e):e}function al(n){const e=Pi(n.mapValue.fields[c0].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,i,o,l,c,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}const _c="(default)";class ll{constructor(e,t){this.projectId=e,this.database=t||_c}static empty(){return new ll("","")}get isDefaultDatabase(){return this.database===_c}isEqual(e){return e instanceof ll&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__type__",DC="__max__",Gu={mapValue:{}},d0="__vector__",wc="value";function xi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ep(n)?4:VC(n)?9007199254740991:LC(n)?10:11:Te(28295,{value:n})}function dr(n,e){if(n===e)return!0;const t=xi(n);if(t!==xi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return al(n).isEqual(al(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Pi(o.timestampValue),d=Pi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(o,l){return ki(o.bytesValue).isEqual(ki(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(o,l){return at(o.geoPointValue.latitude)===at(l.geoPointValue.latitude)&&at(o.geoPointValue.longitude)===at(l.geoPointValue.longitude)}(n,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return at(o.integerValue)===at(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=at(o.doubleValue),d=at(l.doubleValue);return c===d?vc(c)===vc(d):isNaN(c)&&isNaN(d)}return!1}(n,e);case 9:return bo(n.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(By(c)!==By(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!dr(c[p],d[p])))return!1;return!0}(n,e);default:return Te(52216,{left:n})}}function ul(n,e){return(n.values||[]).find(t=>dr(t,e))!==void 0}function No(n,e){if(n===e)return 0;const t=xi(n),i=xi(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return function(l,c){const d=at(l.integerValue||l.doubleValue),p=at(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(n,e);case 3:return $y(n.timestampValue,e.timestampValue);case 4:return $y(al(n),al(e));case 5:return mf(n.stringValue,e.stringValue);case 6:return function(l,c){const d=ki(l),p=ki(c);return d.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const d=l.split("/"),p=c.split("/");for(let y=0;y<d.length&&y<p.length;y++){const _=Pe(d[y],p[y]);if(_!==0)return _}return Pe(d.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const d=Pe(at(l.latitude),at(c.latitude));return d!==0?d:Pe(at(l.longitude),at(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Hy(n.arrayValue,e.arrayValue);case 10:return function(l,c){var d,p,y,_;const E=l.fields||{},R=c.fields||{},D=(d=E[wc])===null||d===void 0?void 0:d.arrayValue,b=(p=R[wc])===null||p===void 0?void 0:p.arrayValue,V=Pe(((y=D==null?void 0:D.values)===null||y===void 0?void 0:y.length)||0,((_=b==null?void 0:b.values)===null||_===void 0?void 0:_.length)||0);return V!==0?V:Hy(D,b)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===Gu.mapValue&&c===Gu.mapValue)return 0;if(l===Gu.mapValue)return 1;if(c===Gu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const R=mf(p[E],_[E]);if(R!==0)return R;const D=No(d[p[E]],y[_[E]]);if(D!==0)return D}return Pe(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Te(23264,{Pe:t})}}function $y(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=Pi(n),i=Pi(e),o=Pe(t.seconds,i.seconds);return o!==0?o:Pe(t.nanos,i.nanos)}function Hy(n,e){const t=n.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=No(t[o],i[o]);if(l)return l}return Pe(t.length,i.length)}function Oo(n){return gf(n)}function gf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Pi(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ki(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return we.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=gf(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${gf(t.fields[c])}`;return o+"}"}(n.mapValue):Te(61005,{value:n})}function nc(n){switch(xi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=jc(n);return e?16+nc(e):16;case 5:return 2*n.stringValue.length;case 6:return ki(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((o,l)=>o+nc(l),0)}(n.arrayValue);case 10:case 11:return function(i){let o=0;return Is(i.fields,(l,c)=>{o+=l.length+nc(c)}),o}(n.mapValue);default:throw Te(13486,{value:n})}}function yf(n){return!!n&&"integerValue"in n}function tp(n){return!!n&&"arrayValue"in n}function qy(n){return!!n&&"nullValue"in n}function Wy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rc(n){return!!n&&"mapValue"in n}function LC(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[h0])===null||t===void 0?void 0:t.stringValue)===d0}function Ya(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Is(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ya(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ya(n.arrayValue.values[t]);return e}return Object.assign({},n)}function VC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===DC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ya(t)}setAll(e){let t=bt.emptyPath(),i={},o=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Ya(c):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());rc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];rc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Is(t,(o,l)=>e[o]=l);for(const o of i)delete e[o]}clone(){return new Pn(Ya(this.value))}}function f0(n){const e=[];return Is(n.fields,(t,i)=>{const o=new bt([t]);if(rc(i)){const l=f0(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new Bt(e,0,Se.min(),Se.min(),Se.min(),Pn.empty(),0)}static newFoundDocument(e,t,i,o){return new Bt(e,1,t,Se.min(),i,o,0)}static newNoDocument(e,t){return new Bt(e,2,t,Se.min(),Se.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new Bt(e,3,t,Se.min(),Se.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.position=e,this.inclusive=t}}function Ky(n,e,t){let i=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?i=we.comparator(we.fromName(c.referenceValue),t.key):i=No(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function MC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{}class yt extends p0{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new UC(e,t,i):t==="array-contains"?new zC(e,i):t==="in"?new $C(e,i):t==="not-in"?new HC(e,i):t==="array-contains-any"?new qC(e,i):new yt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new jC(e,i):new BC(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&xi(this.value)===xi(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends p0{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new fr(e,t)}matches(e){return m0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function m0(n){return n.op==="and"}function g0(n){return FC(n)&&m0(n)}function FC(n){for(const e of n.filters)if(e instanceof fr)return!1;return!0}function vf(n){if(n instanceof yt)return n.field.canonicalString()+n.op.toString()+Oo(n.value);if(g0(n))return n.filters.map(e=>vf(e)).join(",");{const e=n.filters.map(t=>vf(t)).join(",");return`${n.op}(${e})`}}function y0(n,e){return n instanceof yt?function(i,o){return o instanceof yt&&i.op===o.op&&i.field.isEqual(o.field)&&dr(i.value,o.value)}(n,e):n instanceof fr?function(i,o){return o instanceof fr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce((l,c,d)=>l&&y0(c,o.filters[d]),!0):!1}(n,e):void Te(19439)}function v0(n){return n instanceof yt?function(t){return`${t.field.canonicalString()} ${t.op} ${Oo(t.value)}`}(n):n instanceof fr?function(t){return t.op.toString()+" {"+t.getFilters().map(v0).join(" ,")+"}"}(n):"Filter"}class UC extends yt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class jC extends yt{constructor(e,t){super(e,"in",t),this.keys=_0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class BC extends yt{constructor(e,t){super(e,"not-in",t),this.keys=_0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function _0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>we.fromName(i.referenceValue))}class zC extends yt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return tp(t)&&ul(t.arrayValue,this.value)}}class $C extends yt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ul(this.value.arrayValue,t)}}class HC extends yt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ul(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ul(this.value.arrayValue,t)}}class qC extends yt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!tp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ul(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Ie=null}}function Qy(n,e=null,t=[],i=[],o=null,l=null,c=null){return new WC(n,e,t,i,o,l,c)}function np(n){const e=Re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>vf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Oo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Oo(i)).join(",")),e.Ie=t}return e.Ie}function rp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!MC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!y0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gy(n.startAt,e.startAt)&&Gy(n.endAt,e.endAt)}function _f(n){return we.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function KC(n,e,t,i,o,l,c,d){return new Bc(n,e,t,i,o,l,c,d)}function ip(n){return new Bc(n)}function Yy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GC(n){return n.collectionGroup!==null}function Ja(n){const e=Re(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ee.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new _t(bt.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ee.push(new Tc(l,i))}),t.has(bt.keyField().canonicalString())||e.Ee.push(new Tc(bt.keyField(),i))}return e.Ee}function cr(n){const e=Re(n);return e.de||(e.de=QC(e,Ja(n))),e.de}function QC(n,e){if(n.limitType==="F")return Qy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new Tc(o.field,l)});const t=n.endAt?new Ec(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ec(n.startAt.position,n.startAt.inclusive):null;return Qy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function wf(n,e,t){return new Bc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zc(n,e){return rp(cr(n),cr(e))&&n.limitType===e.limitType}function w0(n){return`${np(cr(n))}|lt:${n.limitType}`}function Eo(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(o=>v0(o)).join(", ")}]`),Uc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(o=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(o)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(o=>Oo(o)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(o=>Oo(o)).join(",")),`Target(${i})`}(cr(n))}; limitType=${n.limitType})`}function $c(n,e){return e.isFoundDocument()&&function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):we.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,o){for(const l of Ja(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0}(n,e)&&function(i,o){return!(i.startAt&&!function(c,d,p){const y=Ky(c,d,p);return c.inclusive?y<=0:y<0}(i.startAt,Ja(i),o)||i.endAt&&!function(c,d,p){const y=Ky(c,d,p);return c.inclusive?y>=0:y>0}(i.endAt,Ja(i),o))}(n,e)}function YC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function E0(n){return(e,t)=>{let i=!1;for(const o of Ja(n)){const l=JC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function JC(n,e,t){const i=n.field.isKeyField()?we.comparator(e.key,t.key):function(l,c,d){const p=c.data.field(l),y=d.data.field(l);return p!==null&&y!==null?No(p,y):Te(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Te(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(t,i)=>{for(const[o,l]of i)e(o,l)})}isEmpty(){return s0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new et(we.comparator);function Br(){return XC}const T0=new et(we.comparator);function Ka(...n){let e=T0;for(const t of n)e=e.insert(t.key,t);return e}function I0(n){let e=T0;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function cs(){return Xa()}function S0(){return Xa()}function Xa(){return new Ss(n=>n.toString(),(n,e)=>n.isEqual(e))}const ZC=new et(we.comparator),eP=new _t(we.comparator);function Ne(...n){let e=eP;for(const t of n)e=e.add(t);return e}const tP=new _t(Pe);function nP(){return tP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vc(e)?"-0":e}}function R0(n){return{integerValue:""+n}}function rP(n,e){return kC(e)?R0(e):sp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this._=void 0}}function iP(n,e,t){return n instanceof Ic?function(o,l){const c={fields:{[l0]:{stringValue:a0},[c0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ep(l)&&(l=jc(l)),l&&(c.fields[u0]=l),{mapValue:c}}(t,e):n instanceof cl?C0(n,e):n instanceof hl?P0(n,e):function(o,l){const c=A0(o,l),d=Jy(c)+Jy(o.Re);return yf(c)&&yf(o.Re)?R0(d):sp(o.serializer,d)}(n,e)}function sP(n,e,t){return n instanceof cl?C0(n,e):n instanceof hl?P0(n,e):t}function A0(n,e){return n instanceof Sc?function(i){return yf(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class Ic extends Hc{}class cl extends Hc{constructor(e){super(),this.elements=e}}function C0(n,e){const t=k0(e);for(const i of n.elements)t.some(o=>dr(o,i))||t.push(i);return{arrayValue:{values:t}}}class hl extends Hc{constructor(e){super(),this.elements=e}}function P0(n,e){let t=k0(e);for(const i of n.elements)t=t.filter(o=>!dr(o,i));return{arrayValue:{values:t}}}class Sc extends Hc{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Jy(n){return at(n.integerValue||n.doubleValue)}function k0(n){return tp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function oP(n,e){return n.field.isEqual(e.field)&&function(i,o){return i instanceof cl&&o instanceof cl||i instanceof hl&&o instanceof hl?bo(i.elements,o.elements,dr):i instanceof Sc&&o instanceof Sc?dr(i.Re,o.Re):i instanceof Ic&&o instanceof Ic}(n.transform,e.transform)}class aP{constructor(e,t){this.version=e,this.transformResults=t}}class Mr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mr}static exists(e){return new Mr(void 0,e)}static updateTime(e){return new Mr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qc{}function x0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new N0(n.key,Mr.none()):new Tl(n.key,n.data,Mr.none());{const t=n.data,i=Pn.empty();let o=new _t(bt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new Rs(n.key,i,new Wn(o.toArray()),Mr.none())}}function lP(n,e,t){n instanceof Tl?function(o,l,c){const d=o.value.clone(),p=Zy(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Rs?function(o,l,c){if(!ic(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Zy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(b0(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Za(n,e,t,i){return n instanceof Tl?function(l,c,d,p){if(!ic(l.precondition,c))return d;const y=l.value.clone(),_=ev(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null}(n,e,t,i):n instanceof Rs?function(l,c,d,p){if(!ic(l.precondition,c))return d;const y=ev(l.fieldTransforms,p,c),_=c.data;return _.setAll(b0(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,c,d){return ic(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d}(n,e,t)}function uP(n,e){let t=null;for(const i of n.fieldTransforms){const o=e.data.field(i.field),l=A0(i.transform,o||null);l!=null&&(t===null&&(t=Pn.empty()),t.set(i.field,l))}return t||null}function Xy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&bo(i,o,(l,c)=>oP(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends qc{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Rs extends qc{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function b0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Zy(n,e,t){const i=new Map;Be(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,sP(c,d,t[o]))}return i}function ev(n,e,t){const i=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);i.set(o.field,iP(l,c,e))}return i}class N0 extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cP extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&lP(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Za(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Za(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=S0();return this.mutations.forEach(o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=x0(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,(t,i)=>Xy(t,i))&&bo(this.baseMutations,e.baseMutations,(t,i)=>Xy(t,i))}}class op{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){Be(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let o=function(){return ZC}();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new op(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,Ve;function pP(n){switch(n){case te.OK:return Te(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te(15467,{code:n})}}function O0(n){if(n===void 0)return jr("GRPC error has no .code"),te.UNKNOWN;switch(n){case ct.OK:return te.OK;case ct.CANCELLED:return te.CANCELLED;case ct.UNKNOWN:return te.UNKNOWN;case ct.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case ct.INTERNAL:return te.INTERNAL;case ct.UNAVAILABLE:return te.UNAVAILABLE;case ct.UNAUTHENTICATED:return te.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case ct.NOT_FOUND:return te.NOT_FOUND;case ct.ALREADY_EXISTS:return te.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return te.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case ct.ABORTED:return te.ABORTED;case ct.OUT_OF_RANGE:return te.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return te.UNIMPLEMENTED;case ct.DATA_LOSS:return te.DATA_LOSS;default:return Te(39323,{code:n})}}(Ve=ct||(ct={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=new Ri([4294967295,4294967295],0);function tv(n){const e=n0().encode(n),t=new G_;return t.update(e),new Uint8Array(t.digest())}function nv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ri([t,i],0),new Ri([o,l],0)]}class ap{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ga(`Invalid padding: ${t}`);if(i<0)throw new Ga(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ga(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ga(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ri.fromNumber(this.pe)}we(e,t,i){let o=e.add(t.multiply(Ri.fromNumber(i)));return o.compare(mP)===1&&(o=new Ri([o.getBits(0),o.getBits(1)],0)),o.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=tv(e),[i,o]=nv(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,o,l);if(!this.be(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new ap(l,o,t);return i.forEach(d=>c.insert(d)),c}insert(e){if(this.pe===0)return;const t=tv(e),[i,o]=nv(t);for(let l=0;l<this.hashCount;l++){const c=this.we(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ga extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Wc(Se.min(),o,new et(Pe),Br(),Ne())}}class Il{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Il(i,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t,i,o){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=o}}class D0{constructor(e,t){this.targetId=e,this.Ce=t}}class L0{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class rv{constructor(){this.Fe=0,this.Me=iv(),this.xe=Nt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ne(),t=Ne(),i=Ne();return this.Me.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Te(38017,{changeType:l})}}),new Il(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=iv()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Be(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class gP{constructor(e){this.ze=e,this.je=new Map,this.He=Br(),this.Je=Qu(),this.Ye=Qu(),this.Ze=new et(Pe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,o)=>{this.it(o)&&t(o)})}ot(e){const t=e.targetId,i=e.Ce.count,o=this._t(t);if(o){const l=o.target;if(_f(l))if(i===0){const c=new we(l.path);this.tt(t,c,Bt.newNoDocument(c,Se.min()))}else Be(i===1,20013,{expectedCount:i});else{const c=this.ut(t);if(c!==i){const d=this.ct(e),p=d?this.lt(d,e,c):1;if(p!==0){this.st(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=ki(i).toUint8Array()}catch(p){if(p instanceof o0)return xo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new ap(c,o,l)}catch(p){return xo(p instanceof Ga?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.pe===0?null:d}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let o=0;return i.forEach(l=>{const c=this.ze.Pt(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.tt(t,l,null),o++)}),o}It(e){const t=new Map;this.je.forEach((l,c)=>{const d=this._t(c);if(d){if(l.current&&_f(d.target)){const p=new we(d.target.path);this.Et(p).has(c)||this.dt(c,p)||this.tt(c,p,Bt.newNoDocument(p,e))}l.Le&&(t.set(c,l.qe()),l.Qe())}});let i=Ne();this.Ye.forEach((l,c)=>{let d=!0;c.forEachWhile(p=>{const y=this._t(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(i=i.add(l))}),this.He.forEach((l,c)=>c.setReadTime(e));const o=new Wc(e,t,this.Ze,this.He,i);return this.He=Br(),this.Je=Qu(),this.Ye=Qu(),this.Ze=new et(Pe),o}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const o=this.rt(e);this.dt(e,t)?o.$e(t,1):o.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new rv,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new _t(Pe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new _t(Pe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new rv),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Qu(){return new et(we.comparator)}function iv(){return new et(we.comparator)}const yP={asc:"ASCENDING",desc:"DESCENDING"},vP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_P={and:"AND",or:"OR"};class wP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ef(n,e){return n.useProto3Json||Uc(e)?e:{value:e}}function Rc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function V0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EP(n,e){return Rc(n,e.toTimestamp())}function hr(n){return Be(!!n,49232),Se.fromTimestamp(function(t){const i=Pi(t);return new vt(i.seconds,i.nanos)}(n))}function lp(n,e){return Tf(n,e).canonicalString()}function Tf(n,e){const t=function(o){return new rt(["projects",o.projectId,"databases",o.database])}(n).child("documents");return e===void 0?t:t.child(e)}function M0(n){const e=rt.fromString(n);return Be(z0(e),10190,{key:e.toString()}),e}function If(n,e){return lp(n.databaseId,e.path)}function Kd(n,e){const t=M0(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new we(U0(t))}function F0(n,e){return lp(n.databaseId,e)}function TP(n){const e=M0(n);return e.length===4?rt.emptyPath():U0(e)}function Sf(n){return new rt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U0(n){return Be(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function sv(n,e,t){return{name:If(n,e),fields:t.value.mapValue.fields}}function IP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,_){return y.useProto3Json?(Be(_===void 0||typeof _=="string",58123),Nt.fromBase64String(_||"")):(Be(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Nt.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(y){const _=y.code===void 0?te.UNKNOWN:O0(y.code);return new _e(_,y.message||"")}(c);t=new L0(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=Kd(n,i.document.name),l=hr(i.document.updateTime),c=i.document.createTime?hr(i.document.createTime):Se.min(),d=new Pn({mapValue:{fields:i.document.fields}}),p=Bt.newFoundDocument(o,l,c,d),y=i.targetIds||[],_=i.removedTargetIds||[];t=new sc(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=Kd(n,i.document),l=i.readTime?hr(i.readTime):Se.min(),c=Bt.newNoDocument(o,l),d=i.removedTargetIds||[];t=new sc([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=Kd(n,i.document),l=i.removedTargetIds||[];t=new sc([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new fP(o,l),d=i.targetId;t=new D0(d,c)}}return t}function SP(n,e){let t;if(e instanceof Tl)t={update:sv(n,e.key,e.value)};else if(e instanceof N0)t={delete:If(n,e.key)};else if(e instanceof Rs)t={update:sv(n,e.key,e.data),updateMask:OP(e.fieldMask)};else{if(!(e instanceof cP))return Te(16599,{ft:e.type});t={verify:If(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const d=c.transform;if(d instanceof Ic)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof cl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof hl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Sc)return{fieldPath:c.field.canonicalString(),increment:d.Re};throw Te(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:EP(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)}(n,e.precondition)),t}function RP(n,e){return n&&n.length>0?(Be(e!==void 0,14353),n.map(t=>function(o,l){let c=o.updateTime?hr(o.updateTime):hr(l);return c.isEqual(Se.min())&&(c=hr(l)),new aP(c,o.transformResults||[])}(t,e))):[]}function AP(n,e){return{documents:[F0(n,e.path)]}}function CP(n,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=F0(n,o);const l=function(y){if(y.length!==0)return B0(fr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(y){if(y.length!==0)return y.map(_=>function(R){return{field:To(R.field),direction:xP(R.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Ef(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{gt:t,parent:o}}function PP(n){let e=TP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){Be(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const R=j0(E);return R instanceof fr&&g0(R)?R.getFilters():[R]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(R=>function(b){return new Tc(Io(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(R))}(t.orderBy));let d=null;t.limit&&(d=function(E){let R;return R=typeof E=="object"?E.value:E,Uc(R)?null:R}(t.limit));let p=null;t.startAt&&(p=function(E){const R=!!E.before,D=E.values||[];return new Ec(D,R)}(t.startAt));let y=null;return t.endAt&&(y=function(E){const R=!E.before,D=E.values||[];return new Ec(D,R)}(t.endAt)),KC(e,o,c,l,d,"F",p,y)}function kP(n,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function j0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Io(t.unaryFilter.field);return yt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return yt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Io(t.unaryFilter.field);return yt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(n):n.fieldFilter!==void 0?function(t){return yt.create(Io(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return fr.create(t.compositeFilter.filters.map(i=>j0(i)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(t.compositeFilter.op))}(n):Te(30097,{filter:n})}function xP(n){return yP[n]}function bP(n){return vP[n]}function NP(n){return _P[n]}function To(n){return{fieldPath:n.canonicalString()}}function Io(n){return bt.fromServerFormat(n.fieldPath)}function B0(n){return n instanceof yt?function(t){if(t.op==="=="){if(Wy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NAN"}};if(qy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Wy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NAN"}};if(qy(t.value))return{unaryFilter:{field:To(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(t.field),op:bP(t.op),value:t.value}}}(n):n instanceof fr?function(t){const i=t.getFilters().map(o=>B0(o));return i.length===1?i[0]:{compositeFilter:{op:NP(t.op),filters:i}}}(n):Te(54877,{filter:n})}function OP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function z0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e,t,i,o,l=Se.min(),c=Se.min(),d=Nt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e){this.wt=e}}function LP(n){const e=PP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(){this.yn=new MP}addToCollectionParentIndex(e,t){return this.yn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(Ci.min())}updateCollectionGroup(e,t,i){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class MP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new _t(rt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new _t(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$0=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn($0,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new Do(0)}static ir(){return new Do(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="LruGarbageCollector",FP=1048576;function lv([n,e],[t,i]){const o=Pe(n,t);return o===0?Pe(e,i):o}class UP{constructor(e){this.cr=e,this.buffer=new _t(lv),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();lv(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class jP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){le(av,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?le(av,"Ignoring IndexedDB error during garbage collection: ",t):await zo(t)}await this.Ir(3e5)})}}class BP{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Fc.le);const i=new UP(t);return this.Er.forEachTarget(e,o=>i.Pr(o.sequenceNumber)).next(()=>this.Er.Ar(e,o=>i.Pr(o))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Er.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(ov)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ov):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let i,o,l,c,d,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o))).next(E=>(i=E,d=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(y=Date.now(),wo()<=be.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E})))}}function zP(n,e){return new BP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.changes=new Ss(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?K.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qP{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(i=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(i!==null&&Za(i.mutation,o,Wn.empty(),vt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ne()){const o=cs();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,i).next(l=>{let c=Ka();return l.forEach((d,p)=>{c=c.insert(d,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=cs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ne()))}populateOverlays(e,t,i){const o=[];return i.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,o){let l=Br();const c=Xa(),d=function(){return Xa()}();return t.forEach((p,y)=>{const _=i.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Rs)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),Za(_.mutation,y,_.mutation.getFieldMask(),vt.now())):c.set(y.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,_)=>c.set(y,_)),t.forEach((y,_)=>{var E;return d.set(y,new HP(_,(E=c.get(y))!==null&&E!==void 0?E:null))}),d))}recalculateAndSaveOverlays(e,t){const i=Xa();let o=new et((c,d)=>c-d),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let _=i.get(p)||Wn.empty();_=d.applyToLocalView(y,_),i.set(p,_);const E=(o.get(d.batchId)||Ne()).add(p);o=o.insert(d.batchId,E)})}).next(()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,_=p.value,E=S0();_.forEach(R=>{if(!l.has(R)){const D=x0(t.get(R),i.get(R));D!==null&&E.set(R,D),l=l.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,o){return function(c){return we.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next(l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):K.resolve(cs());let d=ol,p=l;return c.next(y=>K.forEach(y,(_,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(_)?K.resolve():this.remoteDocumentCache.getEntry(e,_).next(R=>{p=p.insert(_,R)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Ne())).next(_=>({batchId:d,changes:I0(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next(i=>{let o=Ka();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Ka();return this.indexManager.getCollectionParents(e,l).next(d=>K.forEach(d,p=>{const y=function(E,R){return new Bc(R,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,i,o).next(_=>{_.forEach((E,R)=>{c=c.insert(E,R)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o))).next(c=>{l.forEach((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,Bt.newInvalidDocument(_)))});let d=Ka();return c.forEach((p,y)=>{const _=l.get(p);_!==void 0&&Za(_.mutation,y,Wn.empty(),vt.now()),$c(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return K.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:hr(o.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(o){return{name:o.name,query:LP(o.bundledQuery),readTime:hr(o.readTime)}}(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(){this.overlays=new et(we.comparator),this.Or=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const i=cs();return K.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&i.set(o,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((o,l)=>{this.St(e,t,l)}),K.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Or.get(i);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Or.delete(i)),K.resolve()}getOverlaysForCollection(e,t,i){const o=cs(),l=t.length+1,c=new we(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new et((y,_)=>y-_);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let _=l.get(y.largestBatchId);_===null&&(_=cs(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const d=cs(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,_)=>d.set(y,_)),!(d.size()>=o)););return K.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.Or.get(o.largestBatchId).delete(i.key);this.Or.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new dP(t,i));let l=this.Or.get(t);l===void 0&&(l=Ne(),this.Or.set(t,l)),this.Or.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(){this.Nr=new _t(Rt.Br),this.Lr=new _t(Rt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const i=new Rt(e,t);this.Nr=this.Nr.add(i),this.Lr=this.Lr.add(i)}qr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Qr(new Rt(e,t))}$r(e,t){e.forEach(i=>this.removeReference(i,t))}Ur(e){const t=new we(new rt([])),i=new Rt(t,e),o=new Rt(t,e+1),l=[];return this.Lr.forEachInRange([i,o],c=>{this.Qr(c),l.push(c.key)}),l}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new we(new rt([])),i=new Rt(t,e),o=new Rt(t,e+1);let l=Ne();return this.Lr.forEachInRange([i,o],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new Rt(e,0),i=this.Nr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Rt{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return we.comparator(e.key,t.key)||Pe(e.Gr,t.Gr)}static kr(e,t){return Pe(e.Gr,t.Gr)||we.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new _t(Rt.Br)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new hP(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.zr=this.zr.add(new Rt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(c)}lookupMutationBatch(e,t){return K.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.Hr(i),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?Zf:this.Jn-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Rt(t,0),o=new Rt(t,Number.POSITIVE_INFINITY),l=[];return this.zr.forEachInRange([i,o],c=>{const d=this.jr(c.Gr);l.push(d)}),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new _t(Pe);return t.forEach(o=>{const l=new Rt(o,0),c=new Rt(o,Number.POSITIVE_INFINITY);this.zr.forEachInRange([l,c],d=>{i=i.add(d.Gr)})}),K.resolve(this.Jr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;we.isDocumentKey(l)||(l=l.child(""));const c=new Rt(new we(l),0);let d=new _t(Pe);return this.zr.forEachWhile(p=>{const y=p.key.path;return!!i.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.Gr)),!0)},c),K.resolve(this.Jr(d))}Jr(e){const t=[];return e.forEach(i=>{const o=this.jr(i);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Be(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.zr;return K.forEach(t.mutations,o=>{const l=new Rt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.zr=i})}Xn(e){}containsKey(e,t){const i=new Rt(t,0),o=this.zr.firstAfterOrEqual(i);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.Zr=e,this.docs=function(){return new et(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.Zr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return K.resolve(i?i.document.mutableCopy():Bt.newInvalidDocument(t))}getEntries(e,t){let i=Br();return t.forEach(o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():Bt.newInvalidDocument(o))}),K.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Br();const c=t.path,d=new we(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||RC(SC(_),i)<=0||(o.has(_.key)||$c(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Te(9500)}Xr(e,t){return K.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new JP(this)}getSize(e){return K.resolve(this.size)}}class JP extends $P{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((i,o)=>{o.isValidDocument()?t.push(this.vr.addEntry(e,o)):this.vr.removeEntry(i)}),K.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e){this.persistence=e,this.ei=new Ss(t=>np(t),rp),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.ti=0,this.ni=new up,this.targetCount=0,this.ri=Do.rr()}forEachTarget(e,t){return this.ei.forEach((i,o)=>t(o)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ti&&(this.ti=t),K.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new Do(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.ar(t),K.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.ei.forEach((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.ei.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),K.waitFor(l).next(()=>o)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const i=this.ei.get(t)||null;return K.resolve(i)}addMatchingKeys(e,t,i){return this.ni.qr(t,i),K.resolve()}removeMatchingKeys(e,t,i){this.ni.$r(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(c=>{l.push(o.markPotentiallyOrphaned(e,c))}),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),K.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ni.Wr(t);return K.resolve(i)}containsKey(e,t){return K.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t){this.ii={},this.overlays={},this.si=new Fc(0),this.oi=!1,this.oi=!0,this._i=new GP,this.referenceDelegate=e(this),this.ai=new XP(this),this.indexManager=new VP,this.remoteDocumentCache=function(o){return new YP(o)}(i=>this.referenceDelegate.ui(i)),this.serializer=new DP(t),this.ci=new WP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ii[e.toKey()];return i||(i=new QP(t,this.referenceDelegate),this.ii[e.toKey()]=i),i}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,i){le("MemoryPersistence","Starting transaction:",e);const o=new ZP(this.si.next());return this.referenceDelegate.li(),i(o).next(l=>this.referenceDelegate.hi(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Pi(e,t){return K.or(Object.values(this.ii).map(i=>()=>i.containsKey(e,t)))}}class ZP extends CC{constructor(e){super(),this.currentSequenceNumber=e}}class cp{constructor(e){this.persistence=e,this.Ti=new up,this.Ii=null}static Ei(e){return new cp(e)}get di(){if(this.Ii)return this.Ii;throw Te(60996)}addReference(e,t,i){return this.Ti.addReference(i,t),this.di.delete(i.toString()),K.resolve()}removeReference(e,t,i){return this.Ti.removeReference(i,t),this.di.add(i.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(o=>this.di.add(o.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.di.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.di,i=>{const o=we.fromPath(i);return this.Ai(e,o).next(l=>{l||t.removeEntry(o,Se.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return K.or([()=>K.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Ac{constructor(e,t){this.persistence=e,this.Ri=new Ss(i=>xC(i.path),(i,o)=>i.isEqual(o)),this.garbageCollector=zP(this,t)}static Ei(e,t){return new Ac(e,t)}li(){}hi(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(o=>i+o))}Vr(e){let t=0;return this.Ar(e,i=>{t++}).next(()=>t)}Ar(e,t){return K.forEach(this.Ri,(i,o)=>this.gr(e,i,o).next(l=>l?K.resolve():t(o)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Xr(e,c=>this.gr(e,c,t).next(d=>{d||(i++,l.removeEntry(c,Se.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),K.resolve()}removeReference(e,t,i){return this.Ri.set(i,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),K.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}gr(e,t,i){return K.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.Ri.get(t);return K.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.ls=i,this.hs=o}static Ps(e,t){let i=Ne(),o=Ne();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new hp(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return LI()?8:PC($t())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.Rs(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.Vs(e,t,o,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new e1;return this.fs(e,t,c).next(d=>{if(l.result=d,this.Is)return this.gs(e,t,c,d.size)})}).next(()=>l.result)}gs(e,t,i,o){return i.documentReadCount<this.Es?(wo()<=be.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Eo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),K.resolve()):(wo()<=be.DEBUG&&le("QueryEngine","Query:",Eo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.ds*o?(wo()<=be.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Eo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(t))):K.resolve())}Rs(e,t){if(Yy(t))return K.resolve(null);let i=cr(t);return this.indexManager.getIndexType(e,i).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=wf(t,null,"F"),i=cr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Ne(...l);return this.As.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(p=>{const y=this.ps(t,d);return this.ys(t,y,c,p.readTime)?this.Rs(e,wf(t,null,"F")):this.ws(e,y,t,p)}))})))}Vs(e,t,i,o){return Yy(t)||o.isEqual(Se.min())?K.resolve(null):this.As.getDocuments(e,i).next(l=>{const c=this.ps(t,l);return this.ys(t,c,i,o)?K.resolve(null):(wo()<=be.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Eo(t)),this.ws(e,c,t,IC(o,ol)).next(d=>d))})}ps(e,t){let i=new _t(E0(e));return t.forEach((o,l)=>{$c(e,l)&&(i=i.add(l))}),i}ys(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}fs(e,t,i){return wo()<=be.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Eo(t)),this.As.getDocumentsMatchingQuery(e,t,Ci.min(),i)}ws(e,t,i,o){return this.As.getDocumentsMatchingQuery(e,i,o).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="LocalStore",n1=3e8;class r1{constructor(e,t,i,o){this.persistence=e,this.bs=t,this.serializer=o,this.Ss=new et(Pe),this.Ds=new Ss(l=>np(l),rp),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(i)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qP(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function i1(n,e,t,i){return new r1(n,e,t,i)}async function q0(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next(l=>(o=l,t.Fs(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],d=[];let p=Ne();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){d.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(y=>({Ms:y,removedBatchIds:c,addedBatchIds:d}))})})}function s1(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const o=e.batch.keys(),l=t.Cs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,_){const E=y.batch,R=E.keys();let D=K.resolve();return R.forEach(b=>{D=D.next(()=>_.getEntry(p,b)).next(V=>{const P=y.docVersions.get(b);Be(P!==null,48541),V.version.compareTo(P)<0&&(E.applyToRemoteDocument(V,y),V.isValidDocument()&&(V.setReadTime(y.commitVersion),_.addEntry(V)))})}),D.next(()=>d.mutationQueue.removeMutationBatch(p,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(d){let p=Ne();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,o))})}function W0(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function o1(n,e){const t=Re(n),i=e.snapshotVersion;let o=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Cs.newChangeBuffer({trackRemovals:!0});o=t.Ss;const d=[];e.targetChanges.forEach((_,E)=>{const R=o.get(E);if(!R)return;d.push(t.ai.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.ai.addMatchingKeys(l,_.addedDocuments,E)));let D=R.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?D=D.withResumeToken(Nt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):_.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(_.resumeToken,i)),o=o.insert(E,D),function(V,P,W){return V.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-V.snapshotVersion.toMicroseconds()>=n1?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(R,D,_)&&d.push(t.ai.updateTargetData(l,D))});let p=Br(),y=Ne();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),d.push(a1(l,c,e.documentUpdates).next(_=>{p=_.xs,y=_.Os})),!i.isEqual(Se.min())){const _=t.ai.getLastRemoteSnapshotVersion(l).next(E=>t.ai.setTargetsMetadata(l,l.currentSequenceNumber,i));d.push(_)}return K.waitFor(d).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.Ss=o,l))}function a1(n,e,t){let i=Ne(),o=Ne();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Br();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):le(dp,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{xs:c,Os:o}})}function l1(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Zf),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function u1(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let o;return t.ai.getTargetData(i,e).next(l=>l?(o=l,K.resolve(o)):t.ai.allocateTargetId(i).next(c=>(o=new wi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.ai.addTargetData(i,o).next(()=>o))))}).then(i=>{const o=t.Ss.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(i.targetId,i),t.Ds.set(e,i.targetId)),i})}async function Rf(n,e,t){const i=Re(n),o=i.Ss.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,o))}catch(c){if(!$o(c))throw c;le(dp,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ss=i.Ss.remove(e),i.Ds.delete(o.target)}function uv(n,e,t){const i=Re(n);let o=Se.min(),l=Ne();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,y,_){const E=Re(p),R=E.Ds.get(_);return R!==void 0?K.resolve(E.Ss.get(R)):E.ai.getTargetData(y,_)}(i,c,cr(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.ai.getMatchingKeysForTargetId(c,d.targetId).next(p=>{l=p})}).next(()=>i.bs.getDocumentsMatchingQuery(c,e,t?o:Se.min(),t?l:Ne())).next(d=>(c1(i,YC(e),d),{documents:d,Ns:l})))}function c1(n,e,t){let i=n.vs.get(e)||Se.min();t.forEach((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.vs.set(e,i)}class cv{constructor(){this.activeTargetIds=nP()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class h1{constructor(){this.So=new cv,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,i){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new cv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="ConnectivityMonitor";class dv{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){le(hv,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){le(hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yu=null;function Af(){return Yu===null?Yu=function(){return 268435456+Math.round(2147483648*Math.random())}():Yu++,"0x"+Yu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="RestConnection",f1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class p1{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${i}/databases/${o}`,this.qo=this.databaseId.database===_c?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Qo(e,t,i,o,l){const c=Af(),d=this.$o(e,t.toUriEncodedString());le(Gd,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(p,o,l),this.Ko(e,d,p,i).then(y=>(le(Gd,`Received RPC '${e}' ${c}: `,y),y),y=>{throw xo(Gd,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",i),y})}Wo(e,t,i,o,l,c){return this.Qo(e,t,i,o,l)}Uo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,l)=>e[l]=o),i&&i.headers.forEach((o,l)=>e[l]=o)}$o(e,t){const i=f1[e];return`${this.Lo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="WebChannelConnection";class g1 extends p1{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,i,o){const l=Af();return new Promise((c,d)=>{const p=new Q_;p.setWithCredentials(!0),p.listenOnce(Y_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case tc.NO_ERROR:const _=p.getResponseJson();le(Ut,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),c(_);break;case tc.TIMEOUT:le(Ut,`RPC '${e}' ${l} timed out`),d(new _e(te.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:const E=p.getStatus();if(le(Ut,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const D=R==null?void 0:R.error;if(D&&D.status&&D.message){const b=function(P){const W=P.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(W)>=0?W:te.UNKNOWN}(D.status);d(new _e(b,D.message))}else d(new _e(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new _e(te.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{s_:e,streamId:l,o_:p.getLastErrorCode(),__:p.getLastError()})}}finally{le(Ut,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);le(Ut,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,i,15)})}a_(e,t,i){const o=Af(),l=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=Z_(),d=X_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Uo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");le(Ut,`Creating RPC '${e}' stream ${o}: ${_}`,p);const E=c.createWebChannel(_,p);let R=!1,D=!1;const b=new m1({Go:P=>{D?le(Ut,`Not sending because RPC '${e}' stream ${o} is closed:`,P):(R||(le(Ut,`Opening RPC '${e}' stream ${o} transport.`),E.open(),R=!0),le(Ut,`RPC '${e}' stream ${o} sending:`,P),E.send(P))},zo:()=>E.close()}),V=(P,W,Y)=>{P.listen(W,Z=>{try{Y(Z)}catch(ne){setTimeout(()=>{throw ne},0)}})};return V(E,Wa.EventType.OPEN,()=>{D||(le(Ut,`RPC '${e}' stream ${o} transport opened.`),b.t_())}),V(E,Wa.EventType.CLOSE,()=>{D||(D=!0,le(Ut,`RPC '${e}' stream ${o} transport closed`),b.r_())}),V(E,Wa.EventType.ERROR,P=>{D||(D=!0,xo(Ut,`RPC '${e}' stream ${o} transport errored. Name:`,P.name,"Message:",P.message),b.r_(new _e(te.UNAVAILABLE,"The operation could not be completed")))}),V(E,Wa.EventType.MESSAGE,P=>{var W;if(!D){const Y=P.data[0];Be(!!Y,16349);const Z=Y,ne=(Z==null?void 0:Z.error)||((W=Z[0])===null||W===void 0?void 0:W.error);if(ne){le(Ut,`RPC '${e}' stream ${o} received error:`,ne);const fe=ne.status;let pe=function(C){const N=ct[C];if(N!==void 0)return O0(N)}(fe),x=ne.message;pe===void 0&&(pe=te.INTERNAL,x="Unknown error status: "+fe+" with message "+ne.message),D=!0,b.r_(new _e(pe,x)),E.close()}else le(Ut,`RPC '${e}' stream ${o} received:`,Y),b.i_(Y)}}),V(d,J_.STAT_EVENT,P=>{P.stat===pf.PROXY?le(Ut,`RPC '${e}' stream ${o} detected buffering proxy`):P.stat===pf.NOPROXY&&le(Ut,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{b.n_()},0),b}}function Qd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(n){return new wP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(e,t,i=1e3,o=1.5,l=6e4){this.bi=e,this.timerId=t,this.u_=i,this.c_=o,this.l_=l,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),i=Math.max(0,Date.now()-this.T_),o=Math.max(0,t-i);o>0&&le("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,o,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="PersistentStream";class G0{constructor(e,t,i,o,l,c,d,p){this.bi=e,this.R_=i,this.V_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new K0(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(jr(t.toString()),jr("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,o])=>{this.m_===t&&this.B_(i,o)},i=>{e(()=>{const o=new _e(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.L_(o)})})}B_(e,t){const i=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{i(()=>this.listener.jo())}),this.stream.Jo(()=>{i(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(o=>{i(()=>this.L_(o))}),this.stream.onMessage(o=>{i(()=>++this.p_==1?this.q_(o):this.onNext(o))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return le(fv,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(le(fv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class y1 extends G0{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=IP(this.serializer,e),i=function(l){if(!("targetChange"in l))return Se.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Se.min():c.readTime?hr(c.readTime):Se.min()}(e);return this.listener.Q_(t,i)}U_(e){const t={};t.database=Sf(this.serializer),t.addTarget=function(l,c){let d;const p=c.target;if(d=_f(p)?{documents:AP(l,p)}:{query:CP(l,p).gt},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=V0(l,c.resumeToken);const y=Ef(l,c.expectedCount);y!==null&&(d.expectedCount=y)}else if(c.snapshotVersion.compareTo(Se.min())>0){d.readTime=Rc(l,c.snapshotVersion.toTimestamp());const y=Ef(l,c.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const i=kP(this.serializer,e);i&&(t.labels=i),this.F_(t)}K_(e){const t={};t.database=Sf(this.serializer),t.removeTarget=e,this.F_(t)}}class v1 extends G0{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return Be(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Be(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){Be(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=RP(e.writeResults,e.commitTime),i=hr(e.commitTime);return this.listener.j_(i,t)}H_(){const e={};e.database=Sf(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>SP(this.serializer,i))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{}class w1 extends _1{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.J_=!1}Y_(){if(this.J_)throw new _e(te.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Qo(e,Tf(t,i),o,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(te.UNKNOWN,l.toString())})}Wo(e,t,i,o,l){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Wo(e,Tf(t,i),o,c,d,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(te.UNKNOWN,c.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class E1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(jr(t),this.ea=!1):le("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="RemoteStore";class T1{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=l,this.ca.vo(c=>{i.enqueueAndForget(async()=>{As(this)&&(le(vs,"Restarting streams for network reachability change."),await async function(p){const y=Re(p);y.aa.add(4),await Sl(y),y.la.set("Unknown"),y.aa.delete(4),await Gc(y)}(this))})}),this.la=new E1(i,o)}}async function Gc(n){if(As(n))for(const e of n.ua)await e(!0)}async function Sl(n){for(const e of n.ua)await e(!1)}function Q0(n,e){const t=Re(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),gp(t)?mp(t):Ho(t).b_()&&pp(t,e))}function fp(n,e){const t=Re(n),i=Ho(t);t._a.delete(e),i.b_()&&Y0(t,e),t._a.size===0&&(i.b_()?i.v_():As(t)&&t.la.set("Unknown"))}function pp(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(n).U_(e)}function Y0(n,e){n.ha.Ke(e),Ho(n).K_(e)}function mp(n){n.ha=new gP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ho(n).start(),n.la.ta()}function gp(n){return As(n)&&!Ho(n).w_()&&n._a.size>0}function As(n){return Re(n).aa.size===0}function J0(n){n.ha=void 0}async function I1(n){n.la.set("Online")}async function S1(n){n._a.forEach((e,t)=>{pp(n,e)})}async function R1(n,e){J0(n),gp(n)?(n.la.ia(e),mp(n)):n.la.set("Unknown")}async function A1(n,e,t){if(n.la.set("Online"),e instanceof L0&&e.state===2&&e.cause)try{await async function(o,l){const c=l.cause;for(const d of l.targetIds)o._a.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o._a.delete(d),o.ha.removeTarget(d))}(n,e)}catch(i){le(vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Cc(n,i)}else if(e instanceof sc?n.ha.Xe(e):e instanceof D0?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Se.min()))try{const i=await W0(n.localStore);t.compareTo(i)>=0&&await function(l,c){const d=l.ha.It(c);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l._a.get(y);_&&l._a.set(y,_.withResumeToken(p.resumeToken,c))}}),d.targetMismatches.forEach((p,y)=>{const _=l._a.get(p);if(!_)return;l._a.set(p,_.withResumeToken(Nt.EMPTY_BYTE_STRING,_.snapshotVersion)),Y0(l,p);const E=new wi(_.target,p,y,_.sequenceNumber);pp(l,E)}),l.remoteSyncer.applyRemoteEvent(d)}(n,t)}catch(i){le(vs,"Failed to raise snapshot:",i),await Cc(n,i)}}async function Cc(n,e,t){if(!$o(e))throw e;n.aa.add(1),await Sl(n),n.la.set("Offline"),t||(t=()=>W0(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{le(vs,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await Gc(n)})}function X0(n,e){return e().catch(t=>Cc(n,t,e))}async function Qc(n){const e=Re(n),t=bi(e);let i=e.oa.length>0?e.oa[e.oa.length-1].batchId:Zf;for(;C1(e);)try{const o=await l1(e.localStore,i);if(o===null){e.oa.length===0&&t.v_();break}i=o.batchId,P1(e,o)}catch(o){await Cc(e,o)}Z0(e)&&ew(e)}function C1(n){return As(n)&&n.oa.length<10}function P1(n,e){n.oa.push(e);const t=bi(n);t.b_()&&t.W_&&t.G_(e.mutations)}function Z0(n){return As(n)&&!bi(n).w_()&&n.oa.length>0}function ew(n){bi(n).start()}async function k1(n){bi(n).H_()}async function x1(n){const e=bi(n);for(const t of n.oa)e.G_(t.mutations)}async function b1(n,e,t){const i=n.oa.shift(),o=op.from(i,e,t);await X0(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),await Qc(n)}async function N1(n,e){e&&bi(n).W_&&await async function(i,o){if(function(c){return pP(c)&&c!==te.ABORTED}(o.code)){const l=i.oa.shift();bi(i).D_(),await X0(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Qc(i)}}(n,e),Z0(n)&&ew(n)}async function pv(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),le(vs,"RemoteStore received new credentials");const i=As(t);t.aa.add(3),await Sl(t),i&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await Gc(t)}async function O1(n,e){const t=Re(n);e?(t.aa.delete(2),await Gc(t)):e||(t.aa.add(2),await Sl(t),t.la.set("Unknown"))}function Ho(n){return n.Pa||(n.Pa=function(t,i,o){const l=Re(t);return l.Y_(),new y1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{jo:I1.bind(null,n),Jo:S1.bind(null,n),Zo:R1.bind(null,n),Q_:A1.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),gp(n)?mp(n):n.la.set("Unknown")):(await n.Pa.stop(),J0(n))})),n.Pa}function bi(n){return n.Ta||(n.Ta=function(t,i,o){const l=Re(t);return l.Y_(),new v1(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:k1.bind(null,n),Zo:N1.bind(null,n),z_:x1.bind(null,n),j_:b1.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await Qc(n)):(await n.Ta.stop(),n.oa.length>0&&(le(vs,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new yp(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vp(n,e){if(jr("AsyncQueue",`${e}: ${n}`),$o(n))return new _e(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.Ia=new et(we.comparator)}track(e){const t=e.doc.key,i=this.Ia.get(t);i?e.type!==0&&i.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&i.type!==1?this.Ia=this.Ia.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Ia=this.Ia.remove(t):e.type===1&&i.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Te(63341,{Vt:e,Ea:i}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,i)=>{e.push(i)}),e}}class Lo{constructor(e,t,i,o,l,c,d,p,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new Lo(e,t,Po.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class L1{constructor(){this.queries=gv(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,i){const o=Re(t),l=o.queries;o.queries=gv(),l.forEach((c,d)=>{for(const p of d.Ra)p.onError(i)})})(this,new _e(te.ABORTED,"Firestore shutting down"))}}function gv(){return new Ss(n=>w0(n),zc)}async function V1(n,e){const t=Re(n);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.Va()&&e.ma()&&(i=2):(l=new D1,i=e.ma()?0:1);try{switch(i){case 0:l.Aa=await t.onListen(o,!0);break;case 1:l.Aa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=vp(c,`Initialization of query '${Eo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Ra.push(e),e.ga(t.onlineState),l.Aa&&e.pa(l.Aa)&&_p(t)}async function M1(n,e){const t=Re(n),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Ra.indexOf(e);c>=0&&(l.Ra.splice(c,1),l.Ra.length===0?o=e.ma()?0:1:!l.Va()&&e.ma()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function F1(n,e){const t=Re(n);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Ra)d.pa(o)&&(i=!0);c.Aa=o}}i&&_p(t)}function U1(n,e,t){const i=Re(n),o=i.queries.get(e);if(o)for(const l of o.Ra)l.onError(t);i.queries.delete(e)}function _p(n){n.fa.forEach(e=>{e.next()})}var Cf,yv;(yv=Cf||(Cf={})).ya="default",yv.Cache="cache";class j1{constructor(e,t,i){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=i||{}}pa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const i=t!=="Offline";return(!this.options.Fa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=Lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==Cf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(e){this.key=e}}class nw{constructor(e){this.key=e}}class B1{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ne(),this.mutatedKeys=Ne(),this.Ua=E0(e),this.Ka=new Po(this.Ua)}get Wa(){return this.qa}Ga(e,t){const i=t?t.za:new mv,o=t?t.Ka:this.Ka;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((_,E)=>{const R=o.get(_),D=$c(this.query,E)?E:null,b=!!R&&this.mutatedKeys.has(R.key),V=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let P=!1;R&&D?R.data.isEqual(D.data)?b!==V&&(i.track({type:3,doc:D}),P=!0):this.ja(R,D)||(i.track({type:2,doc:D}),P=!0,(p&&this.Ua(D,p)>0||y&&this.Ua(D,y)<0)&&(d=!0)):!R&&D?(i.track({type:0,doc:D}),P=!0):R&&!D&&(i.track({type:1,doc:R}),P=!0,(p||y)&&(d=!0)),P&&(D?(c=c.add(D),l=V?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{Ka:c,za:i,ys:d,mutatedKeys:l}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const c=e.za.da();c.sort((_,E)=>function(D,b){const V=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Vt:P})}};return V(D)-V(b)}(_.type,E.type)||this.Ua(_.doc,E.doc)),this.Ha(i),o=o!=null&&o;const d=t&&!o?this.Ja():[],p=this.$a.size===0&&this.current&&!o?1:0,y=p!==this.Qa;return this.Qa=p,c.length!==0||y?{snapshot:new Lo(this.query,e.Ka,l,c,e.mutatedKeys,p===0,y,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ya:d}:{Ya:d}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new mv,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ne(),this.Ka.forEach(i=>{this.Za(i.key)&&(this.$a=this.$a.add(i.key))});const t=[];return e.forEach(i=>{this.$a.has(i)||t.push(new nw(i))}),this.$a.forEach(i=>{e.has(i)||t.push(new tw(i))}),t}Xa(e){this.qa=e.Ns,this.$a=Ne();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return Lo.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const wp="SyncEngine";class z1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class $1{constructor(e){this.key=e,this.tu=!1}}class H1{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.nu={},this.ru=new Ss(d=>w0(d),zc),this.iu=new Map,this.su=new Set,this.ou=new et(we.comparator),this._u=new Map,this.au=new up,this.uu={},this.cu=new Map,this.lu=Do.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function q1(n,e,t=!0){const i=lw(n);let o;const l=i.ru.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.eu()):o=await rw(i,e,t,!0),o}async function W1(n,e){const t=lw(n);await rw(t,e,!0,!1)}async function rw(n,e,t,i){const o=await u1(n.localStore,cr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await K1(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Q0(n.remoteStore,o),d}async function K1(n,e,t,i,o){n.Pu=(E,R,D)=>async function(V,P,W,Y){let Z=P.view.Ga(W);Z.ys&&(Z=await uv(V.localStore,P.query,!1).then(({documents:x})=>P.view.Ga(x,Z)));const ne=Y&&Y.targetChanges.get(P.targetId),fe=Y&&Y.targetMismatches.get(P.targetId)!=null,pe=P.view.applyChanges(Z,V.isPrimaryClient,ne,fe);return _v(V,P.targetId,pe.Ya),pe.snapshot}(n,E,R,D);const l=await uv(n.localStore,e,!0),c=new B1(e,l.Ns),d=c.Ga(l.documents),p=Il.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",o),y=c.applyChanges(d,n.isPrimaryClient,p);_v(n,t,y.Ya);const _=new z1(e,t,c);return n.ru.set(e,_),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),y.snapshot}async function G1(n,e,t){const i=Re(n),o=i.ru.get(e),l=i.iu.get(o.targetId);if(l.length>1)return i.iu.set(o.targetId,l.filter(c=>!zc(c,e))),void i.ru.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Rf(i.localStore,o.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(o.targetId),t&&fp(i.remoteStore,o.targetId),Pf(i,o.targetId)}).catch(zo)):(Pf(i,o.targetId),await Rf(i.localStore,o.targetId,!0))}async function Q1(n,e){const t=Re(n),i=t.ru.get(e),o=t.iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),fp(t.remoteStore,i.targetId))}async function Y1(n,e,t){const i=rk(n);try{const o=await function(c,d){const p=Re(c),y=vt.now(),_=d.reduce((D,b)=>D.add(b.key),Ne());let E,R;return p.persistence.runTransaction("Locally write mutations","readwrite",D=>{let b=Br(),V=Ne();return p.Cs.getEntries(D,_).next(P=>{b=P,b.forEach((W,Y)=>{Y.isValidDocument()||(V=V.add(W))})}).next(()=>p.localDocuments.getOverlayedDocuments(D,b)).next(P=>{E=P;const W=[];for(const Y of d){const Z=uP(Y,E.get(Y.key).overlayedDocument);Z!=null&&W.push(new Rs(Y.key,Z,f0(Z.value.mapValue),Mr.exists(!0)))}return p.mutationQueue.addMutationBatch(D,y,W,d)}).next(P=>{R=P;const W=P.applyToLocalDocumentSet(E,V);return p.documentOverlayCache.saveOverlays(D,P.batchId,W)})}).then(()=>({batchId:R.batchId,changes:I0(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),function(c,d,p){let y=c.uu[c.currentUser.toKey()];y||(y=new et(Pe)),y=y.insert(d,p),c.uu[c.currentUser.toKey()]=y}(i,o.batchId,t),await Rl(i,o.changes),await Qc(i.remoteStore)}catch(o){const l=vp(o,"Failed to persist write");t.reject(l)}}async function iw(n,e){const t=Re(n);try{const i=await o1(t.localStore,e);e.targetChanges.forEach((o,l)=>{const c=t._u.get(l);c&&(Be(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.tu=!0:o.modifiedDocuments.size>0?Be(c.tu,14607):o.removedDocuments.size>0&&(Be(c.tu,42227),c.tu=!1))}),await Rl(t,i,e)}catch(i){await zo(i)}}function vv(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.ru.forEach((l,c)=>{const d=c.view.ga(e);d.snapshot&&o.push(d.snapshot)}),function(c,d){const p=Re(c);p.onlineState=d;let y=!1;p.queries.forEach((_,E)=>{for(const R of E.Ra)R.ga(d)&&(y=!0)}),y&&_p(p)}(i.eventManager,e),o.length&&i.nu.Q_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function J1(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i._u.get(e),l=o&&o.key;if(l){let c=new et(we.comparator);c=c.insert(l,Bt.newNoDocument(l,Se.min()));const d=Ne().add(l),p=new Wc(Se.min(),new Map,new et(Pe),c,d);await iw(i,p),i.ou=i.ou.remove(l),i._u.delete(e),Ep(i)}else await Rf(i.localStore,e,!1).then(()=>Pf(i,e,t)).catch(zo)}async function X1(n,e){const t=Re(n),i=e.batch.batchId;try{const o=await s1(t.localStore,e);ow(t,i,null),sw(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Rl(t,o)}catch(o){await zo(o)}}async function Z1(n,e,t){const i=Re(n);try{const o=await function(c,d){const p=Re(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let _;return p.mutationQueue.lookupMutationBatch(y,d).next(E=>(Be(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_)).next(()=>p.localDocuments.getDocuments(y,_))})}(i.localStore,e);ow(i,e,t),sw(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Rl(i,o)}catch(o){await zo(o)}}function sw(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function ow(n,e,t){const i=Re(n);let o=i.uu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.uu[i.currentUser.toKey()]=o}}function Pf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.iu.get(e))n.ru.delete(i),t&&n.nu.Tu(i,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(i=>{n.au.containsKey(i)||aw(n,i)})}function aw(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(fp(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),Ep(n))}function _v(n,e,t){for(const i of t)i instanceof tw?(n.au.addReference(i.key,e),ek(n,i)):i instanceof nw?(le(wp,"Document no longer in limbo: "+i.key),n.au.removeReference(i.key,e),n.au.containsKey(i.key)||aw(n,i.key)):Te(19791,{Iu:i})}function ek(n,e){const t=e.key,i=t.path.canonicalString();n.ou.get(t)||n.su.has(i)||(le(wp,"New document in limbo: "+t),n.su.add(i),Ep(n))}function Ep(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new we(rt.fromString(e)),i=n.lu.next();n._u.set(i,new $1(t)),n.ou=n.ou.insert(t,i),Q0(n.remoteStore,new wi(cr(ip(t.path)),i,"TargetPurposeLimboResolution",Fc.le))}}async function Rl(n,e,t){const i=Re(n),o=[],l=[],c=[];i.ru.isEmpty()||(i.ru.forEach((d,p)=>{c.push(i.Pu(p,e,t).then(y=>{var _;if((y||t)&&i.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=hp.Ps(p.targetId,y);l.push(E)}}))}),await Promise.all(c),i.nu.Q_(o),await async function(p,y){const _=Re(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>K.forEach(y,R=>K.forEach(R.ls,D=>_.persistence.referenceDelegate.addReference(E,R.targetId,D)).next(()=>K.forEach(R.hs,D=>_.persistence.referenceDelegate.removeReference(E,R.targetId,D)))))}catch(E){if(!$o(E))throw E;le(dp,"Failed to update sequence numbers: "+E)}for(const E of y){const R=E.targetId;if(!E.fromCache){const D=_.Ss.get(R),b=D.snapshotVersion,V=D.withLastLimboFreeSnapshotVersion(b);_.Ss=_.Ss.insert(R,V)}}}(i.localStore,l))}async function tk(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){le(wp,"User change. New user:",e.toKey());const i=await q0(t.localStore,e);t.currentUser=e,function(l,c){l.cu.forEach(d=>{d.forEach(p=>{p.reject(new _e(te.CANCELLED,c))})}),l.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Rl(t,i.Ms)}}function nk(n,e){const t=Re(n),i=t._u.get(e);if(i&&i.tu)return Ne().add(i.key);{let o=Ne();const l=t.iu.get(e);if(!l)return o;for(const c of l){const d=t.ru.get(c);o=o.unionWith(d.view.Wa)}return o}}function lw(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J1.bind(null,e),e.nu.Q_=F1.bind(null,e.eventManager),e.nu.Tu=U1.bind(null,e.eventManager),e}function rk(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z1.bind(null,e),e}class Pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return i1(this.persistence,new t1,e.initialUser,this.serializer)}Ru(e){return new H0(cp.Ei,this.serializer)}Au(e){return new h1}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pc.provider={build:()=>new Pc};class ik extends Pc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){Be(this.persistence.referenceDelegate instanceof Ac,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jP(i,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new H0(i=>Ac.Ei(i,t),this.serializer)}}class kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tk.bind(null,this.syncEngine),await O1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new L1}()}createDatastore(e){const t=Kc(e.databaseInfo.databaseId),i=function(l){return new g1(l)}(e.databaseInfo);return function(l,c,d,p){return new w1(l,c,d,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,o,l,c,d){return new T1(i,o,l,c,d)}(this.localStore,this.datastore,e.asyncQueue,t=>vv(this.syncEngine,t,0),function(){return dv.C()?new dv:new d1}())}createSyncEngine(e,t){return function(o,l,c,d,p,y,_){const E=new H1(o,l,c,d,p,y);return _&&(E.hu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Re(o);le(vs,"RemoteStore shutting down."),l.aa.add(5),await Sl(l),l.ca.shutdown(),l.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}kf.provider={build:()=>new kf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):jr("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="FirestoreClient";class ok{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=jt.UNAUTHENTICATED,this.clientId=r0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{le(Ni,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(le(Ni,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=vp(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Yd(n,e){n.asyncQueue.verifyOperationInProgress(),le(Ni,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async o=>{i.isEqual(o)||(await q0(e.localStore,o),i=o)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function wv(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ak(n);le(Ni,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>pv(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>pv(e.remoteStore,o)),n._onlineComponents=e}async function ak(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(Ni,"Using user provided OfflineComponentProvider");try{await Yd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;xo("Error using user provided cache. Falling back to memory cache: "+t),await Yd(n,new Pc)}}else le(Ni,"Using default OfflineComponentProvider"),await Yd(n,new ik(void 0));return n._offlineComponents}async function uw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(Ni,"Using user provided OnlineComponentProvider"),await wv(n,n._uninitializedComponentsProvider._online)):(le(Ni,"Using default OnlineComponentProvider"),await wv(n,new kf))),n._onlineComponents}function lk(n){return uw(n).then(e=>e.syncEngine)}async function uk(n){const e=await uw(n),t=e.eventManager;return t.onListen=q1.bind(null,e.syncEngine),t.onUnlisten=G1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Q1.bind(null,e.syncEngine),t}function ck(n,e,t={}){const i=new Ai;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,d,p,y){const _=new sk({next:R=>{_.yu(),c.enqueueAndForget(()=>M1(l,E));const D=R.docs.has(d);!D&&R.fromCache?y.reject(new _e(te.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&R.fromCache&&p&&p.source==="server"?y.reject(new _e(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(R)},error:R=>y.reject(R)}),E=new j1(ip(d.path),_,{includeMetadataChanges:!0,Fa:!0});return V1(l,E)}(await uk(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ev=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n,e,t){if(!t)throw new _e(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function dk(n,e,t,i){if(e===!0&&i===!0)throw new _e(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tv(n){if(!we.isDocumentKey(n))throw new _e(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Te(12329,{type:typeof n})}function dl(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tp(n);throw new _e(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="firestore.googleapis.com",Iv=!0;class Sv{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=hw,this.ssl=Iv}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Iv;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=$0;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<FP)throw new _e(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cw((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new _e(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,o){return i.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ip{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new pC;switch(i.type){case"firstParty":return new vC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new _e(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Ev.get(t);i&&(le("ComponentProvider","Removing Datastore"),Ev.delete(t),i.terminate())}(this),Promise.resolve()}}function fk(n,e,t,i={}){var o;const l=(n=dl(n,Ip))._getSettings(),c=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),d=`${e}:${t}`;l.host!==hw&&l.host!==d&&xo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:d,ssl:!1,emulatorOptions:i});if(!fs(p,c)&&(n._setSettings(p),i.mockUserToken)){let y,_;if(typeof i.mockUserToken=="string")y=i.mockUserToken,_=jt.MOCK_USER;else{y=PI(i.mockUserToken,(o=n._app)===null||o===void 0?void 0:o.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new _e(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new jt(E)}n._authCredentials=new mC(new t0(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Sp(this.firestore,e,this._query)}}class kn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class fl extends Sp{constructor(e,t,i){super(e,t,ip(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new we(e))}withConverter(e){return new fl(this.firestore,e,this._path)}}function dw(n,e,...t){if(n=pn(n),arguments.length===1&&(e=r0.newId()),hk("doc","path",e),n instanceof Ip){const i=rt.fromString(e,...t);return Tv(i),new kn(n,null,new we(i))}{if(!(n instanceof kn||n instanceof fl))throw new _e(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(rt.fromString(e,...t));return Tv(i),new kn(n.firestore,n instanceof fl?n.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="AsyncQueue";class Av{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new K0(this,"async_queue_retry"),this.ju=()=>{const i=Qd();i&&le(Rv,"Visibility state changed to "+i.visibilityState),this.y_.A_()},this.Hu=e;const t=Qd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=Qd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new Ai;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!$o(e))throw e;le(Rv,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(i=>{throw this.Ku=i,this.Wu=!1,jr("INTERNAL UNHANDLED ERROR: ",Cv(i)),i}).then(i=>(this.Wu=!1,i))));return this.Hu=t,t}enqueueAfterDelay(e,t,i){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const o=yp.createAndSchedule(this,e,t,i,l=>this.Xu(l));return this.Uu.push(o),o}Ju(){this.Ku&&Te(47125,{ec:Cv(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function Cv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rp extends Ip{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new Av,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Av(e),this._firestoreClient=void 0,await e}}}function pk(n,e){const t=typeof n=="object"?n:c_(),i=typeof n=="string"?n:_c,o=zf(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=AI("firestore");l&&fk(o,...l)}return o}function fw(n){if(n._terminated)throw new _e(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||mk(n),n._firestoreClient}function mk(n){var e,t,i;const o=n._freezeSettings(),l=function(d,p,y,_){return new OC(d,p,y,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,cw(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,o);n._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),n._firestoreClient=new ok(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vo(Nt.fromBase64String(e))}catch(t){throw new _e(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Vo(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=/^__.*__$/;class yk{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}function mw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{oc:n})}}class kp{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this._c(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o.lc(e),o}hc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.ac({path:i,cc:!1});return o._c(),o}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return kc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(mw(this.oc)&&gk.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class vk{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Kc(e)}dc(e,t,i,o=!1){return new kp({oc:e,methodName:t,Ec:i,path:bt.emptyPath(),cc:!1,Ic:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _k(n){const e=n._freezeSettings(),t=Kc(n._databaseId);return new vk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function wk(n,e,t,i,o,l={}){const c=n.dc(l.merge||l.mergeFields?2:0,e,t,o);_w("Data must be an object, but it was:",c,i);const d=yw(i,c);let p,y;if(l.merge)p=new Wn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const R=Ek(e,E,t);if(!c.contains(R))throw new _e(te.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);Ik(_,R)||_.push(R)}p=new Wn(_),y=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,y=c.fieldTransforms;return new yk(new Pn(d),p,y)}function gw(n,e){if(vw(n=pn(n)))return _w("Unsupported field value:",e,n),yw(n,e);if(n instanceof pw)return function(i,o){if(!mw(o.oc))throw o.Tc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Tc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(i,o){const l=[];let c=0;for(const d of i){let p=gw(d,o.Pc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,o){if((i=pn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return rP(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=vt.fromDate(i);return{timestampValue:Rc(o.serializer,l)}}if(i instanceof vt){const l=new vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Rc(o.serializer,l)}}if(i instanceof Cp)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Vo)return{bytesValue:V0(o.serializer,i._byteString)};if(i instanceof kn){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Tc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:lp(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Pp)return function(c,d){return{mapValue:{fields:{[h0]:{stringValue:d0},[wc]:{arrayValue:{values:c.toArray().map(y=>{if(typeof y!="number")throw d.Tc("VectorValues must only contain numeric values.");return sp(d.serializer,y)})}}}}}}(i,o);throw o.Tc(`Unsupported field value: ${Tp(i)}`)}(n,e)}function yw(n,e){const t={};return s0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(n,(i,o)=>{const l=gw(o,e.uc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function vw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Cp||n instanceof Vo||n instanceof kn||n instanceof pw||n instanceof Pp)}function _w(n,e,t){if(!vw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const i=Tp(t);throw i==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+i)}}function Ek(n,e,t){if((e=pn(e))instanceof Ap)return e._internalPath;if(typeof e=="string")return ww(n,e);throw kc("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tk=new RegExp("[~\\*/\\[\\]]");function ww(n,e,t){if(e.search(Tk)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ap(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function kc(n,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new _e(te.INVALID_ARGUMENT,d+n+p)}function Ik(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Tw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Sk extends Ew{data(){return super.data()}}function Tw(n,e){return typeof e=="string"?ww(n,e):e instanceof Ap?e._internalPath:e._delegate._internalPath}class Rk{convertValue(e,t="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Is(e,(o,l)=>{i[o]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,o;const l=(o=(i=(t=e.fields)===null||t===void 0?void 0:t[wc].arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map(c=>at(c.doubleValue));return new Pp(l)}convertGeoPoint(e){return new Cp(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=jc(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(al(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=rt.fromString(e);Be(z0(i),9688,{name:e});const o=new ll(i.get(1),i.get(3)),l=new we(i.popFirst(5));return o.isEqual(t)||jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Iw extends Ew{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Tw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Pk extends Iw{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n){n=dl(n,kn);const e=dl(n.firestore,Rp);return ck(fw(e),n._key).then(t=>Ok(e,n,t))}class xk extends Rk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function bk(n,e,t){n=dl(n,kn);const i=dl(n.firestore,Rp),o=Ak(n.converter,e);return Nk(i,[wk(_k(i),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Mr.none())])}function Nk(n,e){return function(i,o){const l=new Ai;return i.asyncQueue.enqueueAndForget(async()=>Y1(await lk(i),o,l)),l.promise}(fw(n),e)}function Ok(n,e,t){const i=t.docs.get(e._key),o=new xk(n);return new Iw(n,o,e._key,i,new Ck(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){Bo=o})(Uo),ko(new ps("firestore",(i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new Rp(new gC(i.getProvider("auth-internal")),new _C(c,i.getProvider("app-check-internal")),function(y,_){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new _e(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ll(y.options.projectId,_)}(c,o),c);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),Si(Oy,Dy,e),Si(Oy,Dy,"esm2017")})();const Dk={apiKey:"AIzaSyCj9bjaoQUopBGdATQ-U1PnGIKxke6qUY4",authDomain:"digital-coop-a3083.firebaseapp.com",projectId:"digital-coop-a3083",storageBucket:"digital-coop-a3083.appspot.com",messagingSenderId:"925403828694",appId:"1:925403828694:web:26224650e09df2a2531477",measurementId:"G-CCWK2CWY7L"},Sw=u_(Dk),el=Mc(Sw),Rw=pk(Sw);function Lk(){const[n,e]=Q.useState(""),[t,i]=Q.useState(""),[o,l]=Q.useState(""),[c,d]=Q.useState(!1),p=pr(),y=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),_=async E=>{if(E.preventDefault(),l(""),!y(n)){l("Please enter a valid email address.");return}if(t.length<6){l("Password must be at least 6 characters.");return}d(!0);try{await YR(el,n,t),p("/onboarding")}catch(R){R.code==="auth/email-already-in-use"?l("This email is already registered. Please log in instead."):l("Something went wrong. Please try again.")}finally{d(!1)}};return M.jsxs("form",{onSubmit:_,className:"p-4 space-y-4",children:[M.jsx("h2",{className:"text-xl font-bold",children:"Sign Up"}),M.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:E=>e(E.target.value),className:"w-full p-2 border rounded"}),M.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:E=>i(E.target.value),className:"w-full p-2 border rounded"}),o&&M.jsx("p",{className:"text-red-600",children:o}),M.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded w-full",disabled:c,children:c?"Creating account...":"Continue"}),M.jsxs("div",{className:"text-center text-sm mt-2",children:["Already have an account?"," ",M.jsx(rf,{to:"/login",className:"text-blue-600 underline",children:"Log in"})]})]})}function Vk(){const[n,e]=Q.useState(""),[t,i]=Q.useState(""),o=pr(),l=async c=>{c.preventDefault();try{await M_(el,n,t),o("/dashboard")}catch(d){console.error("Login error",d)}};return M.jsxs("form",{onSubmit:l,className:"p-4 space-y-4",children:[M.jsx("h2",{className:"text-xl font-bold",children:"Log In"}),M.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:c=>e(c.target.value),className:"w-full p-2 border rounded"}),M.jsx("input",{type:"password",placeholder:"Password",value:t,onChange:c=>i(c.target.value),className:"w-full p-2 border rounded"}),M.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:"Log In"})]})}function Mk(){var Z;const n=Fo(),[e,t]=Q.useState(0),[i,o]=Q.useState(((Z=n.state)==null?void 0:Z.answers)||{}),[l,c]=Q.useState([]),[d,p]=Q.useState(!1),[y,_]=Q.useState("");Q.useRef(null);const E=pr();Mc();const R=[{key:"org_type",question:"What type of organisation are you?",required:!0,options:["Union","NGO","Political Party","Community Group","Social Enterprise","Other"]},{key:"scale",question:"What is your operational scale?",required:!0,options:["Local","Statewide","National","International","Federation with Local Branches","Other"]},{key:"membership_size",question:"How many members/supporters do you have?",required:!1,options:["<100","1001000","10005000","500010,000","10,000+"]},{key:"campaign_budget",question:"Typical campaign budget range?",required:!1,options:["Under $5,000","$5,000$20,000","$20,000$100,000","Over $100,000"]},{key:"staff_count",question:"How many paid staff?",required:!1,options:["0","15","620","21100","100+"]},{key:"volunteer_count",question:"How many active volunteers?",required:!1,options:["0","110","1150","51200","200+"]},{key:"tech_stack",question:"Which campaign tools do you use? (Select all that apply, then press Submit)",required:!1,multi:!0,options:["Action Network","Yabbr","NationBuilder","Mailchimp","Hootsuite","Canva","HubSpot","Zoho Campaigns","Other"]}],D=R[e],b=ne=>{ne==="Other"?p(!0):Y(D.key,ne)},V=()=>{y.trim()&&(Y(D.key,y.trim()),_(""),p(!1))},P=ne=>{c(fe=>fe.includes(ne)?fe.filter(pe=>pe!==ne):[...fe,ne])},W=()=>{const ne=l.includes("Other")&&y.trim()?[...l.filter(fe=>fe!=="Other"),y.trim()]:l;Y(D.key,ne),c([]),_(""),p(!1)},Y=(ne,fe)=>{const pe={...i,[ne]:fe};o(pe),e+1<R.length?t(e+1):E("/onboarding/summary",{state:{answers:pe}})};return M.jsxs("div",{className:"p-4 max-w-xl mx-auto",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Onboarding"}),M.jsx("p",{className:"mb-4",children:D.question}),M.jsx("div",{className:"space-y-2",children:D.multi?M.jsxs(M.Fragment,{children:[D.options.map(ne=>M.jsx("button",{className:`block w-full text-left px-4 py-2 border rounded ${l.includes(ne)?"bg-blue-600 text-white":"bg-gray-100"}`,onClick:()=>P(ne),children:ne},ne)),l.includes("Other")&&M.jsx("input",{className:"w-full mt-2 p-2 border rounded",value:y,onChange:ne=>_(ne.target.value),placeholder:"Please specify"}),M.jsx("button",{className:"mt-4 px-4 py-2 bg-green-600 text-white rounded",onClick:W,children:"Submit"})]}):d?M.jsxs(M.Fragment,{children:[M.jsx("input",{className:"w-full p-2 border rounded",value:y,onChange:ne=>_(ne.target.value),placeholder:"Please specify"}),M.jsx("button",{className:"mt-2 px-4 py-2 bg-green-600 text-white rounded",onClick:V,children:"Continue"})]}):D.options.map(ne=>M.jsx("button",{className:"block w-full text-left px-4 py-2 border rounded bg-gray-100 hover:bg-blue-100",onClick:()=>b(ne),children:ne},ne))})]})}function Fk(){const{state:n}=Fo(),e=pr(),t=Mc(),i=(n==null?void 0:n.answers)??{},o=["org_type","scale","membership_size","campaign_budget","staff_count","volunteer_count","tech_stack"],l=async()=>{const d=t.currentUser;d&&(await bk(dw(Rw,"organisations",d.uid),i),e("/dashboard"))},c=d=>{const p=o.indexOf(d);p>=0&&e("/onboarding",{state:{answers:i,stepIndex:p}})};return M.jsxs("div",{className:"p-4 max-w-xl mx-auto",children:[M.jsx("h2",{className:"text-xl font-bold mb-4",children:"Review Your Answers"}),M.jsx("ul",{className:"space-y-4",children:Object.entries(i).map(([d,p])=>M.jsx("li",{className:"border p-3 rounded shadow-sm bg-white",children:M.jsxs("div",{className:"flex justify-between items-start",children:[M.jsxs("div",{children:[M.jsxs("strong",{children:[d.replace(/_/g," "),":"]}),M.jsx("br",{}),Array.isArray(p)?p.join(", "):p]}),M.jsx("button",{onClick:()=>c(d),className:"ml-4 px-2 py-1 text-sm bg-yellow-400 text-black rounded",children:"Edit"})]})},d))}),M.jsxs("div",{className:"mt-6 flex space-x-4",children:[M.jsx("button",{onClick:()=>e("/onboarding",{state:{answers:i}}),className:"px-4 py-2 bg-gray-300 text-black rounded",children:"Edit All"}),M.jsx("button",{onClick:l,className:"px-4 py-2 bg-green-600 text-white rounded",children:"Confirm & Continue"})]})]})}const Aw=Q.createContext();function Cw(){return Q.useContext(Aw)}function Uk({children:n}){const[e,t]=Q.useState(null),[i,o]=Q.useState(!0);Q.useEffect(()=>ZR(el,y=>{t(y||null),o(!1)}),[]);const d={user:e,loading:i,login:(p,y)=>M_(el,p,y),logout:()=>eA(el)};return M.jsx(Aw.Provider,{value:d,children:n})}function Pw(n,e){return function(){return n.apply(e,arguments)}}const{toString:jk}=Object.prototype,{getPrototypeOf:xp}=Object,{iterator:Yc,toStringTag:kw}=Symbol,Jc=(n=>e=>{const t=jk.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=n=>(n=n.toLowerCase(),e=>Jc(e)===n),Xc=n=>e=>typeof e===n,{isArray:qo}=Array,pl=Xc("undefined");function Bk(n){return n!==null&&!pl(n)&&n.constructor!==null&&!pl(n.constructor)&&sn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const xw=Gn("ArrayBuffer");function zk(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&xw(n.buffer),e}const $k=Xc("string"),sn=Xc("function"),bw=Xc("number"),Zc=n=>n!==null&&typeof n=="object",Hk=n=>n===!0||n===!1,oc=n=>{if(Jc(n)!=="object")return!1;const e=xp(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(kw in n)&&!(Yc in n)},qk=Gn("Date"),Wk=Gn("File"),Kk=Gn("Blob"),Gk=Gn("FileList"),Qk=n=>Zc(n)&&sn(n.pipe),Yk=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||sn(n.append)&&((e=Jc(n))==="formdata"||e==="object"&&sn(n.toString)&&n.toString()==="[object FormData]"))},Jk=Gn("URLSearchParams"),[Xk,Zk,ex,tx]=["ReadableStream","Request","Response","Headers"].map(Gn),nx=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Al(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,o;if(typeof n!="object"&&(n=[n]),qo(n))for(i=0,o=n.length;i<o;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let d;for(i=0;i<c;i++)d=l[i],e.call(null,n[d],d,n)}}function Nw(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,o;for(;i-- >0;)if(o=t[i],e===o.toLowerCase())return o;return null}const hs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ow=n=>!pl(n)&&n!==hs;function xf(){const{caseless:n}=Ow(this)&&this||{},e={},t=(i,o)=>{const l=n&&Nw(e,o)||o;oc(e[l])&&oc(i)?e[l]=xf(e[l],i):oc(i)?e[l]=xf({},i):qo(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Al(arguments[i],t);return e}const rx=(n,e,t,{allOwnKeys:i}={})=>(Al(e,(o,l)=>{t&&sn(o)?n[l]=Pw(o,t):n[l]=o},{allOwnKeys:i}),n),ix=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),sx=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},ox=(n,e,t,i)=>{let o,l,c;const d={};if(e=e||{},n==null)return e;do{for(o=Object.getOwnPropertyNames(n),l=o.length;l-- >0;)c=o[l],(!i||i(c,n,e))&&!d[c]&&(e[c]=n[c],d[c]=!0);n=t!==!1&&xp(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},ax=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},lx=n=>{if(!n)return null;if(qo(n))return n;let e=n.length;if(!bw(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},ux=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&xp(Uint8Array)),cx=(n,e)=>{const i=(n&&n[Yc]).call(n);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(n,l[0],l[1])}},hx=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},dx=Gn("HTMLFormElement"),fx=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,o){return i.toUpperCase()+o}),Pv=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),px=Gn("RegExp"),Dw=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};Al(t,(o,l)=>{let c;(c=e(o,l,n))!==!1&&(i[l]=c||o)}),Object.defineProperties(n,i)},mx=n=>{Dw(n,(e,t)=>{if(sn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(sn(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},gx=(n,e)=>{const t={},i=o=>{o.forEach(l=>{t[l]=!0})};return qo(n)?i(n):i(String(n).split(e)),t},yx=()=>{},vx=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function _x(n){return!!(n&&sn(n.append)&&n[kw]==="FormData"&&n[Yc])}const wx=n=>{const e=new Array(10),t=(i,o)=>{if(Zc(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=qo(i)?[]:{};return Al(i,(c,d)=>{const p=t(c,o+1);!pl(p)&&(l[d]=p)}),e[o]=void 0,l}}return i};return t(n,0)},Ex=Gn("AsyncFunction"),Tx=n=>n&&(Zc(n)||sn(n))&&sn(n.then)&&sn(n.catch),Lw=((n,e)=>n?setImmediate:e?((t,i)=>(hs.addEventListener("message",({source:o,data:l})=>{o===hs&&l===t&&i.length&&i.shift()()},!1),o=>{i.push(o),hs.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",sn(hs.postMessage)),Ix=typeof queueMicrotask<"u"?queueMicrotask.bind(hs):typeof process<"u"&&process.nextTick||Lw,Sx=n=>n!=null&&sn(n[Yc]),q={isArray:qo,isArrayBuffer:xw,isBuffer:Bk,isFormData:Yk,isArrayBufferView:zk,isString:$k,isNumber:bw,isBoolean:Hk,isObject:Zc,isPlainObject:oc,isReadableStream:Xk,isRequest:Zk,isResponse:ex,isHeaders:tx,isUndefined:pl,isDate:qk,isFile:Wk,isBlob:Kk,isRegExp:px,isFunction:sn,isStream:Qk,isURLSearchParams:Jk,isTypedArray:ux,isFileList:Gk,forEach:Al,merge:xf,extend:rx,trim:nx,stripBOM:ix,inherits:sx,toFlatObject:ox,kindOf:Jc,kindOfTest:Gn,endsWith:ax,toArray:lx,forEachEntry:cx,matchAll:hx,isHTMLForm:dx,hasOwnProperty:Pv,hasOwnProp:Pv,reduceDescriptors:Dw,freezeMethods:mx,toObjectSet:gx,toCamelCase:fx,noop:yx,toFiniteNumber:vx,findKey:Nw,global:hs,isContextDefined:Ow,isSpecCompliantForm:_x,toJSONObject:wx,isAsyncFn:Ex,isThenable:Tx,setImmediate:Lw,asap:Ix,isIterable:Sx};function Ae(n,e,t,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),o&&(this.response=o,this.status=o.status?o.status:null)}q.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:q.toJSONObject(this.config),code:this.code,status:this.status}}});const Vw=Ae.prototype,Mw={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Mw[n]={value:n}});Object.defineProperties(Ae,Mw);Object.defineProperty(Vw,"isAxiosError",{value:!0});Ae.from=(n,e,t,i,o,l)=>{const c=Object.create(Vw);return q.toFlatObject(n,c,function(p){return p!==Error.prototype},d=>d!=="isAxiosError"),Ae.call(c,n.message,e,t,i,o),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const Rx=null;function bf(n){return q.isPlainObject(n)||q.isArray(n)}function Fw(n){return q.endsWith(n,"[]")?n.slice(0,-2):n}function kv(n,e,t){return n?n.concat(e).map(function(o,l){return o=Fw(o),!t&&l?"["+o+"]":o}).join(t?".":""):e}function Ax(n){return q.isArray(n)&&!n.some(bf)}const Cx=q.toFlatObject(q,{},null,function(e){return/^is[A-Z]/.test(e)});function eh(n,e,t){if(!q.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=q.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(V,P){return!q.isUndefined(P[V])});const i=t.metaTokens,o=t.visitor||_,l=t.dots,c=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&q.isSpecCompliantForm(e);if(!q.isFunction(o))throw new TypeError("visitor must be a function");function y(b){if(b===null)return"";if(q.isDate(b))return b.toISOString();if(!p&&q.isBlob(b))throw new Ae("Blob is not supported. Use a Buffer instead.");return q.isArrayBuffer(b)||q.isTypedArray(b)?p&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function _(b,V,P){let W=b;if(b&&!P&&typeof b=="object"){if(q.endsWith(V,"{}"))V=i?V:V.slice(0,-2),b=JSON.stringify(b);else if(q.isArray(b)&&Ax(b)||(q.isFileList(b)||q.endsWith(V,"[]"))&&(W=q.toArray(b)))return V=Fw(V),W.forEach(function(Z,ne){!(q.isUndefined(Z)||Z===null)&&e.append(c===!0?kv([V],ne,l):c===null?V:V+"[]",y(Z))}),!1}return bf(b)?!0:(e.append(kv(P,V,l),y(b)),!1)}const E=[],R=Object.assign(Cx,{defaultVisitor:_,convertValue:y,isVisitable:bf});function D(b,V){if(!q.isUndefined(b)){if(E.indexOf(b)!==-1)throw Error("Circular reference detected in "+V.join("."));E.push(b),q.forEach(b,function(W,Y){(!(q.isUndefined(W)||W===null)&&o.call(e,W,q.isString(Y)?Y.trim():Y,V,R))===!0&&D(W,V?V.concat(Y):[Y])}),E.pop()}}if(!q.isObject(n))throw new TypeError("data must be an object");return D(n),e}function xv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function bp(n,e){this._pairs=[],n&&eh(n,this,e)}const Uw=bp.prototype;Uw.append=function(e,t){this._pairs.push([e,t])};Uw.toString=function(e){const t=e?function(i){return e.call(this,i,xv)}:xv;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function Px(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jw(n,e,t){if(!e)return n;const i=t&&t.encode||Px;q.isFunction(t)&&(t={serialize:t});const o=t&&t.serialize;let l;if(o?l=o(e,t):l=q.isURLSearchParams(e)?e.toString():new bp(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class bv{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){q.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Bw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kx=typeof URLSearchParams<"u"?URLSearchParams:bp,xx=typeof FormData<"u"?FormData:null,bx=typeof Blob<"u"?Blob:null,Nx={isBrowser:!0,classes:{URLSearchParams:kx,FormData:xx,Blob:bx},protocols:["http","https","file","blob","url","data"]},Np=typeof window<"u"&&typeof document<"u",Nf=typeof navigator=="object"&&navigator||void 0,Ox=Np&&(!Nf||["ReactNative","NativeScript","NS"].indexOf(Nf.product)<0),Dx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Lx=Np&&window.location.href||"http://localhost",Vx=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Np,hasStandardBrowserEnv:Ox,hasStandardBrowserWebWorkerEnv:Dx,navigator:Nf,origin:Lx},Symbol.toStringTag,{value:"Module"})),zt={...Vx,...Nx};function Mx(n,e){return eh(n,new zt.classes.URLSearchParams,Object.assign({visitor:function(t,i,o,l){return zt.isNode&&q.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function Fx(n){return q.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Ux(n){const e={},t=Object.keys(n);let i;const o=t.length;let l;for(i=0;i<o;i++)l=t[i],e[l]=n[l];return e}function zw(n){function e(t,i,o,l){let c=t[l++];if(c==="__proto__")return!0;const d=Number.isFinite(+c),p=l>=t.length;return c=!c&&q.isArray(o)?o.length:c,p?(q.hasOwnProp(o,c)?o[c]=[o[c],i]:o[c]=i,!d):((!o[c]||!q.isObject(o[c]))&&(o[c]=[]),e(t,i,o[c],l)&&q.isArray(o[c])&&(o[c]=Ux(o[c])),!d)}if(q.isFormData(n)&&q.isFunction(n.entries)){const t={};return q.forEachEntry(n,(i,o)=>{e(Fx(i),o,t,0)}),t}return null}function jx(n,e,t){if(q.isString(n))try{return(e||JSON.parse)(n),q.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Cl={transitional:Bw,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",o=i.indexOf("application/json")>-1,l=q.isObject(e);if(l&&q.isHTMLForm(e)&&(e=new FormData(e)),q.isFormData(e))return o?JSON.stringify(zw(e)):e;if(q.isArrayBuffer(e)||q.isBuffer(e)||q.isStream(e)||q.isFile(e)||q.isBlob(e)||q.isReadableStream(e))return e;if(q.isArrayBufferView(e))return e.buffer;if(q.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Mx(e,this.formSerializer).toString();if((d=q.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return eh(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||o?(t.setContentType("application/json",!1),jx(e)):e}],transformResponse:[function(e){const t=this.transitional||Cl.transitional,i=t&&t.forcedJSONParsing,o=this.responseType==="json";if(q.isResponse(e)||q.isReadableStream(e))return e;if(e&&q.isString(e)&&(i&&!this.responseType||o)){const c=!(t&&t.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(c)throw d.name==="SyntaxError"?Ae.from(d,Ae.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:zt.classes.FormData,Blob:zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};q.forEach(["delete","get","head","post","put","patch"],n=>{Cl.headers[n]={}});const Bx=q.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zx=n=>{const e={};let t,i,o;return n&&n.split(`
`).forEach(function(c){o=c.indexOf(":"),t=c.substring(0,o).trim().toLowerCase(),i=c.substring(o+1).trim(),!(!t||e[t]&&Bx[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Nv=Symbol("internals");function $a(n){return n&&String(n).trim().toLowerCase()}function ac(n){return n===!1||n==null?n:q.isArray(n)?n.map(ac):String(n)}function $x(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const Hx=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Jd(n,e,t,i,o){if(q.isFunction(i))return i.call(this,e,t);if(o&&(e=t),!!q.isString(e)){if(q.isString(i))return e.indexOf(i)!==-1;if(q.isRegExp(i))return i.test(e)}}function qx(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Wx(n,e){const t=q.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(o,l,c){return this[i].call(this,e,o,l,c)},configurable:!0})})}let on=class{constructor(e){e&&this.set(e)}set(e,t,i){const o=this;function l(d,p,y){const _=$a(p);if(!_)throw new Error("header name must be a non-empty string");const E=q.findKey(o,_);(!E||o[E]===void 0||y===!0||y===void 0&&o[E]!==!1)&&(o[E||p]=ac(d))}const c=(d,p)=>q.forEach(d,(y,_)=>l(y,_,p));if(q.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(q.isString(e)&&(e=e.trim())&&!Hx(e))c(zx(e),t);else if(q.isObject(e)&&q.isIterable(e)){let d={},p,y;for(const _ of e){if(!q.isArray(_))throw TypeError("Object iterator must return a key-value pair");d[y=_[0]]=(p=d[y])?q.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}c(d,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=$a(e),e){const i=q.findKey(this,e);if(i){const o=this[i];if(!t)return o;if(t===!0)return $x(o);if(q.isFunction(t))return t.call(this,o,i);if(q.isRegExp(t))return t.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=$a(e),e){const i=q.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||Jd(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let o=!1;function l(c){if(c=$a(c),c){const d=q.findKey(i,c);d&&(!t||Jd(i,i[d],d,t))&&(delete i[d],o=!0)}}return q.isArray(e)?e.forEach(l):l(e),o}clear(e){const t=Object.keys(this);let i=t.length,o=!1;for(;i--;){const l=t[i];(!e||Jd(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const t=this,i={};return q.forEach(this,(o,l)=>{const c=q.findKey(i,l);if(c){t[c]=ac(o),delete t[l];return}const d=e?qx(l):String(l).trim();d!==l&&delete t[l],t[d]=ac(o),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return q.forEach(this,(i,o)=>{i!=null&&i!==!1&&(t[o]=e&&q.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Nv]=this[Nv]={accessors:{}}).accessors,o=this.prototype;function l(c){const d=$a(c);i[d]||(Wx(o,c),i[d]=!0)}return q.isArray(e)?e.forEach(l):l(e),this}};on.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);q.reduceDescriptors(on.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});q.freezeMethods(on);function Xd(n,e){const t=this||Cl,i=e||t,o=on.from(i.headers);let l=i.data;return q.forEach(n,function(d){l=d.call(t,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function $w(n){return!!(n&&n.__CANCEL__)}function Wo(n,e,t){Ae.call(this,n??"canceled",Ae.ERR_CANCELED,e,t),this.name="CanceledError"}q.inherits(Wo,Ae,{__CANCEL__:!0});function Hw(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ae("Request failed with status code "+t.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Kx(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function Gx(n,e){n=n||10;const t=new Array(n),i=new Array(n);let o=0,l=0,c;return e=e!==void 0?e:1e3,function(p){const y=Date.now(),_=i[l];c||(c=y),t[o]=p,i[o]=y;let E=l,R=0;for(;E!==o;)R+=t[E++],E=E%n;if(o=(o+1)%n,o===l&&(l=(l+1)%n),y-c<e)return;const D=_&&y-_;return D?Math.round(R*1e3/D):void 0}}function Qx(n,e){let t=0,i=1e3/e,o,l;const c=(y,_=Date.now())=>{t=_,o=null,l&&(clearTimeout(l),l=null),n.apply(null,y)};return[(...y)=>{const _=Date.now(),E=_-t;E>=i?c(y,_):(o=y,l||(l=setTimeout(()=>{l=null,c(o)},i-E)))},()=>o&&c(o)]}const xc=(n,e,t=3)=>{let i=0;const o=Gx(50,250);return Qx(l=>{const c=l.loaded,d=l.lengthComputable?l.total:void 0,p=c-i,y=o(p),_=c<=d;i=c;const E={loaded:c,total:d,progress:d?c/d:void 0,bytes:p,rate:y||void 0,estimated:y&&d&&_?(d-c)/y:void 0,event:l,lengthComputable:d!=null,[e?"download":"upload"]:!0};n(E)},t)},Ov=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Dv=n=>(...e)=>q.asap(()=>n(...e)),Yx=zt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,zt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(zt.origin),zt.navigator&&/(msie|trident)/i.test(zt.navigator.userAgent)):()=>!0,Jx=zt.hasStandardBrowserEnv?{write(n,e,t,i,o,l){const c=[n+"="+encodeURIComponent(e)];q.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),q.isString(i)&&c.push("path="+i),q.isString(o)&&c.push("domain="+o),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Xx(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Zx(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function qw(n,e,t){let i=!Xx(e);return n&&(i||t==!1)?Zx(n,e):e}const Lv=n=>n instanceof on?{...n}:n;function _s(n,e){e=e||{};const t={};function i(y,_,E,R){return q.isPlainObject(y)&&q.isPlainObject(_)?q.merge.call({caseless:R},y,_):q.isPlainObject(_)?q.merge({},_):q.isArray(_)?_.slice():_}function o(y,_,E,R){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y,E,R)}else return i(y,_,E,R)}function l(y,_){if(!q.isUndefined(_))return i(void 0,_)}function c(y,_){if(q.isUndefined(_)){if(!q.isUndefined(y))return i(void 0,y)}else return i(void 0,_)}function d(y,_,E){if(E in e)return i(y,_);if(E in n)return i(void 0,y)}const p={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:d,headers:(y,_,E)=>o(Lv(y),Lv(_),E,!0)};return q.forEach(Object.keys(Object.assign({},n,e)),function(_){const E=p[_]||o,R=E(n[_],e[_],_);q.isUndefined(R)&&E!==d||(t[_]=R)}),t}const Ww=n=>{const e=_s({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:c,auth:d}=e;e.headers=c=on.from(c),e.url=jw(qw(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),d&&c.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let p;if(q.isFormData(t)){if(zt.hasStandardBrowserEnv||zt.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((p=c.getContentType())!==!1){const[y,..._]=p?p.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([y||"multipart/form-data",..._].join("; "))}}if(zt.hasStandardBrowserEnv&&(i&&q.isFunction(i)&&(i=i(e)),i||i!==!1&&Yx(e.url))){const y=o&&l&&Jx.read(l);y&&c.set(o,y)}return e},eb=typeof XMLHttpRequest<"u",tb=eb&&function(n){return new Promise(function(t,i){const o=Ww(n);let l=o.data;const c=on.from(o.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:y}=o,_,E,R,D,b;function V(){D&&D(),b&&b(),o.cancelToken&&o.cancelToken.unsubscribe(_),o.signal&&o.signal.removeEventListener("abort",_)}let P=new XMLHttpRequest;P.open(o.method.toUpperCase(),o.url,!0),P.timeout=o.timeout;function W(){if(!P)return;const Z=on.from("getAllResponseHeaders"in P&&P.getAllResponseHeaders()),fe={data:!d||d==="text"||d==="json"?P.responseText:P.response,status:P.status,statusText:P.statusText,headers:Z,config:n,request:P};Hw(function(x){t(x),V()},function(x){i(x),V()},fe),P=null}"onloadend"in P?P.onloadend=W:P.onreadystatechange=function(){!P||P.readyState!==4||P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0)||setTimeout(W)},P.onabort=function(){P&&(i(new Ae("Request aborted",Ae.ECONNABORTED,n,P)),P=null)},P.onerror=function(){i(new Ae("Network Error",Ae.ERR_NETWORK,n,P)),P=null},P.ontimeout=function(){let ne=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const fe=o.transitional||Bw;o.timeoutErrorMessage&&(ne=o.timeoutErrorMessage),i(new Ae(ne,fe.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,n,P)),P=null},l===void 0&&c.setContentType(null),"setRequestHeader"in P&&q.forEach(c.toJSON(),function(ne,fe){P.setRequestHeader(fe,ne)}),q.isUndefined(o.withCredentials)||(P.withCredentials=!!o.withCredentials),d&&d!=="json"&&(P.responseType=o.responseType),y&&([R,b]=xc(y,!0),P.addEventListener("progress",R)),p&&P.upload&&([E,D]=xc(p),P.upload.addEventListener("progress",E),P.upload.addEventListener("loadend",D)),(o.cancelToken||o.signal)&&(_=Z=>{P&&(i(!Z||Z.type?new Wo(null,n,P):Z),P.abort(),P=null)},o.cancelToken&&o.cancelToken.subscribe(_),o.signal&&(o.signal.aborted?_():o.signal.addEventListener("abort",_)));const Y=Kx(o.url);if(Y&&zt.protocols.indexOf(Y)===-1){i(new Ae("Unsupported protocol "+Y+":",Ae.ERR_BAD_REQUEST,n));return}P.send(l||null)})},nb=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,o;const l=function(y){if(!o){o=!0,d();const _=y instanceof Error?y:this.reason;i.abort(_ instanceof Ae?_:new Wo(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,l(new Ae(`timeout ${e} of ms exceeded`,Ae.ETIMEDOUT))},e);const d=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),n=null)};n.forEach(y=>y.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>q.asap(d),p}},rb=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,o;for(;i<t;)o=i+e,yield n.slice(i,o),i=o},ib=async function*(n,e){for await(const t of sb(n))yield*rb(t,e)},sb=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Vv=(n,e,t,i)=>{const o=ib(n,e);let l=0,c,d=p=>{c||(c=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:y,value:_}=await o.next();if(y){d(),p.close();return}let E=_.byteLength;if(t){let R=l+=E;t(R)}p.enqueue(new Uint8Array(_))}catch(y){throw d(y),y}},cancel(p){return d(p),o.return()}},{highWaterMark:2})},th=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Kw=th&&typeof ReadableStream=="function",ob=th&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),Gw=(n,...e)=>{try{return!!n(...e)}catch{return!1}},ab=Kw&&Gw(()=>{let n=!1;const e=new Request(zt.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Mv=64*1024,Of=Kw&&Gw(()=>q.isReadableStream(new Response("").body)),bc={stream:Of&&(n=>n.body)};th&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!bc[e]&&(bc[e]=q.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new Ae(`Response type '${e}' is not supported`,Ae.ERR_NOT_SUPPORT,i)})})})(new Response);const lb=async n=>{if(n==null)return 0;if(q.isBlob(n))return n.size;if(q.isSpecCompliantForm(n))return(await new Request(zt.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(q.isArrayBufferView(n)||q.isArrayBuffer(n))return n.byteLength;if(q.isURLSearchParams(n)&&(n=n+""),q.isString(n))return(await ob(n)).byteLength},ub=async(n,e)=>{const t=q.toFiniteNumber(n.getContentLength());return t??lb(e)},cb=th&&(async n=>{let{url:e,method:t,data:i,signal:o,cancelToken:l,timeout:c,onDownloadProgress:d,onUploadProgress:p,responseType:y,headers:_,withCredentials:E="same-origin",fetchOptions:R}=Ww(n);y=y?(y+"").toLowerCase():"text";let D=nb([o,l&&l.toAbortSignal()],c),b;const V=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let P;try{if(p&&ab&&t!=="get"&&t!=="head"&&(P=await ub(_,i))!==0){let fe=new Request(e,{method:"POST",body:i,duplex:"half"}),pe;if(q.isFormData(i)&&(pe=fe.headers.get("content-type"))&&_.setContentType(pe),fe.body){const[x,I]=Ov(P,xc(Dv(p)));i=Vv(fe.body,Mv,x,I)}}q.isString(E)||(E=E?"include":"omit");const W="credentials"in Request.prototype;b=new Request(e,{...R,signal:D,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:W?E:void 0});let Y=await fetch(b);const Z=Of&&(y==="stream"||y==="response");if(Of&&(d||Z&&V)){const fe={};["status","statusText","headers"].forEach(C=>{fe[C]=Y[C]});const pe=q.toFiniteNumber(Y.headers.get("content-length")),[x,I]=d&&Ov(pe,xc(Dv(d),!0))||[];Y=new Response(Vv(Y.body,Mv,x,()=>{I&&I(),V&&V()}),fe)}y=y||"text";let ne=await bc[q.findKey(bc,y)||"text"](Y,n);return!Z&&V&&V(),await new Promise((fe,pe)=>{Hw(fe,pe,{data:ne,headers:on.from(Y.headers),status:Y.status,statusText:Y.statusText,config:n,request:b})})}catch(W){throw V&&V(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,n,b),{cause:W.cause||W}):Ae.from(W,W&&W.code,n,b)}}),Df={http:Rx,xhr:tb,fetch:cb};q.forEach(Df,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Fv=n=>`- ${n}`,hb=n=>q.isFunction(n)||n===null||n===!1,Qw={getAdapter:n=>{n=q.isArray(n)?n:[n];const{length:e}=n;let t,i;const o={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!hb(t)&&(i=Df[(c=String(t)).toLowerCase()],i===void 0))throw new Ae(`Unknown adapter '${c}'`);if(i)break;o[c||"#"+l]=i}if(!i){const l=Object.entries(o).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(Fv).join(`
`):" "+Fv(l[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:Df};function Zd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Wo(null,n)}function Uv(n){return Zd(n),n.headers=on.from(n.headers),n.data=Xd.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),Qw.getAdapter(n.adapter||Cl.adapter)(n).then(function(i){return Zd(n),i.data=Xd.call(n,n.transformResponse,i),i.headers=on.from(i.headers),i},function(i){return $w(i)||(Zd(n),i&&i.response&&(i.response.data=Xd.call(n,n.transformResponse,i.response),i.response.headers=on.from(i.response.headers))),Promise.reject(i)})}const Yw="1.9.0",nh={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{nh[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const jv={};nh.transitional=function(e,t,i){function o(l,c){return"[Axios v"+Yw+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,d)=>{if(e===!1)throw new Ae(o(c," has been removed"+(t?" in "+t:"")),Ae.ERR_DEPRECATED);return t&&!jv[c]&&(jv[c]=!0,console.warn(o(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,d):!0}};nh.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function db(n,e,t){if(typeof n!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let o=i.length;for(;o-- >0;){const l=i[o],c=e[l];if(c){const d=n[l],p=d===void 0||c(d,l,n);if(p!==!0)throw new Ae("option "+l+" must be "+p,Ae.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ae("Unknown option "+l,Ae.ERR_BAD_OPTION)}}const lc={assertOptions:db,validators:nh},or=lc.validators;let ds=class{constructor(e){this.defaults=e||{},this.interceptors={request:new bv,response:new bv}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=_s(this.defaults,t);const{transitional:i,paramsSerializer:o,headers:l}=t;i!==void 0&&lc.assertOptions(i,{silentJSONParsing:or.transitional(or.boolean),forcedJSONParsing:or.transitional(or.boolean),clarifyTimeoutError:or.transitional(or.boolean)},!1),o!=null&&(q.isFunction(o)?t.paramsSerializer={serialize:o}:lc.assertOptions(o,{encode:or.function,serialize:or.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),lc.assertOptions(t,{baseUrl:or.spelling("baseURL"),withXsrfToken:or.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&q.merge(l.common,l[t.method]);l&&q.forEach(["delete","get","head","post","put","patch","common"],b=>{delete l[b]}),t.headers=on.concat(c,l);const d=[];let p=!0;this.interceptors.request.forEach(function(V){typeof V.runWhen=="function"&&V.runWhen(t)===!1||(p=p&&V.synchronous,d.unshift(V.fulfilled,V.rejected))});const y=[];this.interceptors.response.forEach(function(V){y.push(V.fulfilled,V.rejected)});let _,E=0,R;if(!p){const b=[Uv.bind(this),void 0];for(b.unshift.apply(b,d),b.push.apply(b,y),R=b.length,_=Promise.resolve(t);E<R;)_=_.then(b[E++],b[E++]);return _}R=d.length;let D=t;for(E=0;E<R;){const b=d[E++],V=d[E++];try{D=b(D)}catch(P){V.call(this,P);break}}try{_=Uv.call(this,D)}catch(b){return Promise.reject(b)}for(E=0,R=y.length;E<R;)_=_.then(y[E++],y[E++]);return _}getUri(e){e=_s(this.defaults,e);const t=qw(e.baseURL,e.url,e.allowAbsoluteUrls);return jw(t,e.params,e.paramsSerializer)}};q.forEach(["delete","get","head","options"],function(e){ds.prototype[e]=function(t,i){return this.request(_s(i||{},{method:e,url:t,data:(i||{}).data}))}});q.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,d){return this.request(_s(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}ds.prototype[e]=t(),ds.prototype[e+"Form"]=t(!0)});let fb=class Jw{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const c=new Promise(d=>{i.subscribe(d),l=d}).then(o);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,d){i.reason||(i.reason=new Wo(l,c,d),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Jw(function(o){e=o}),cancel:e}}};function pb(n){return function(t){return n.apply(null,t)}}function mb(n){return q.isObject(n)&&n.isAxiosError===!0}const Lf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Lf).forEach(([n,e])=>{Lf[e]=n});function Xw(n){const e=new ds(n),t=Pw(ds.prototype.request,e);return q.extend(t,ds.prototype,e,{allOwnKeys:!0}),q.extend(t,e,null,{allOwnKeys:!0}),t.create=function(o){return Xw(_s(n,o))},t}const tt=Xw(Cl);tt.Axios=ds;tt.CanceledError=Wo;tt.CancelToken=fb;tt.isCancel=$w;tt.VERSION=Yw;tt.toFormData=eh;tt.AxiosError=Ae;tt.Cancel=tt.CanceledError;tt.all=function(e){return Promise.all(e)};tt.spread=pb;tt.isAxiosError=mb;tt.mergeConfig=_s;tt.AxiosHeaders=on;tt.formToJSON=n=>zw(q.isHTMLForm(n)?new FormData(n):n);tt.getAdapter=Qw.getAdapter;tt.HttpStatusCode=Lf;tt.default=tt;const{Axios:jb,AxiosError:Bb,CanceledError:zb,isCancel:$b,CancelToken:Hb,VERSION:qb,all:Wb,Cancel:Kb,isAxiosError:Gb,spread:Qb,toFormData:Yb,AxiosHeaders:Jb,HttpStatusCode:Xb,formToJSON:Zb,getAdapter:eN,mergeConfig:tN}=tt;function gb(){console.log(" Dashboard component mounted");const{currentUser:n,getIdToken:e}=Cw(),t=pr(),[i,o]=Q.useState(null),[l,c]=Q.useState([]),[d,p]=Q.useState(!0),[y,_]=Q.useState(!0),[E,R]=Q.useState("");return Q.useEffect(()=>{(async()=>{var V;if(console.log("Dashboard Effect: currentUser from useAuth():",n),!n){console.log("Dashboard Effect: No user logged in. Setting loading states to false."),p(!1),_(!1);return}p(!0);let b=!1;try{console.log(`Dashboard Effect: Fetching organisation data for UID: ${n.uid}`);const P=dw(Rw,"organisations",n.uid),W=await kk(P);if(W.exists()){b=!0;const Y=W.data();console.log("Dashboard Effect: Fetched organization data:",Y),o(Y)}else{console.log("Dashboard Effect: No organization data found for user. Redirecting to onboarding."),t("/onboarding"),p(!1),_(!1);return}}catch(P){console.error("Dashboard Effect: Error fetching organization data:",P),R("Failed to load organization details."),b=!1}finally{p(!1)}if(b&&!E){_(!0);let P=null;try{if(console.log("Dashboard Effect: Attempting to get Firebase ID token via getIdToken()..."),P=await e(),console.log("Dashboard Effect: Got Firebase ID token (first 10 chars):",P?P.substring(0,10)+"...":"No token found"),!P){console.error("Dashboard Effect: Authentication token not available after call."),R(Y=>Y+(Y?" | ":"")+"Authentication token unavailable."),c([]),_(!1);return}console.log("Dashboard Effect: Calling GET /api/campaigns with token.");const W=await tt.get("/api/campaigns",{headers:{Authorization:`Bearer ${P}`}});console.log("Dashboard Effect: Received response from /api/campaigns:",W),console.log("Dashboard Effect: Campaigns data:",W.data),c(W.data||[])}catch(W){if(console.error("Dashboard Effect: Error fetching campaigns from API:",W),W.response){console.error("Dashboard Effect: API Error Response Data:",W.response.data),console.error("Dashboard Effect: API Error Response Status:",W.response.status),console.error("Dashboard Effect: API Error Response Headers:",W.response.headers);let Y=`API Error ${W.response.status}: Failed to load campaigns.`;W.response.status===401||W.response.status===403?Y+=" (Authorization Failed)":(V=W.response.data)!=null&&V.message&&(Y+=` Backend Message: ${W.response.data.message}`),R(Z=>Z+(Z?" | ":"")+Y)}else W.request?(console.error("Dashboard Effect: API Error Request:",W.request),R(Y=>Y+(Y?" | ":"")+"Network error or no response from server when fetching campaigns.")):(console.error("Dashboard Effect: API Error Message:",W.message),R(Y=>Y+(Y?" | ":"")+"Error setting up request to fetch campaigns."));c([])}finally{_(!1)}}else b||(console.log("Dashboard Effect: Skipping campaign fetch because organization data check failed or redirected."),_(!1))})()},[n,e,t]),console.log(`Dashboard Render: LoadingOrg=${d}, LoadingCampaigns=${y}, Error='${E}', Campaigns Count=${l==null?void 0:l.length}`),d||y?M.jsx("div",{className:"p-6",children:"Loading dashboard data..."}):E?M.jsxs("div",{className:"p-6 text-red-700 bg-red-100 border border-red-400 rounded",children:[M.jsx("h2",{className:"font-bold text-lg mb-2",children:"Error Loading Dashboard"}),M.jsx("p",{children:E})]}):M.jsxs("div",{className:"p-6 space-y-6 max-w-5xl mx-auto",children:[M.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),M.jsx("p",{children:"Welcome back! Manage your organisation and campaigns here."}),M.jsx("button",{onClick:()=>t("/app/campaign/new"),className:"bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700",children:"Start a New Campaign"}),i&&M.jsxs("div",{className:"bg-white shadow p-6 rounded-lg mt-6",children:[M.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Organisation Overview"}),M.jsx("ul",{children:Object.entries(i).map(([D,b])=>M.jsxs("li",{className:"text-sm mb-1",children:[M.jsxs("strong",{className:"capitalize",children:[D.replace(/_/g," "),":"]})," ",Array.isArray(b)?b.join(", "):String(b)]},D))})]}),M.jsxs("div",{className:"bg-white shadow p-6 rounded-lg mt-6",children:[M.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Your Campaigns"}),Array.isArray(l)&&l.length>0?M.jsx("ul",{className:"list-disc list-inside space-y-2",children:l.map(D=>{var b;return M.jsxs("li",{className:"mb-2 text-sm",children:[M.jsx("span",{className:"font-medium",children:D.name||`Campaign ${D.id.substring(0,5)}`}),((b=D.createdAt)==null?void 0:b.seconds)&&M.jsxs("span",{className:"text-gray-500 text-xs ml-2",children:["(Created: ",new Date(D.createdAt.seconds*1e3).toLocaleDateString(),")"]})]},D.id)})}):M.jsx("p",{className:"text-gray-500",children:"You haven't created any campaigns yet."})]})]})}function yb(...n){return n.filter(Boolean).join(" ")}const Zw=Q.forwardRef(({className:n,...e},t)=>M.jsx("textarea",{className:yb("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...e}));Zw.displayName="Textarea";function Or(...n){return n.filter(Boolean).join(" ")}const rh=Q.forwardRef(({className:n,children:e,variant:t,size:i,...o},l)=>{let c=Or("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background hover:bg-primary/90 h-10 px-4 py-2",n);switch(t){case"outline":c=Or(c,"border border-input bg-background hover:bg-accent hover:text-accent-foreground");break;case"secondary":c=Or(c,"bg-secondary text-secondary-foreground hover:bg-secondary/80");break;case"ghost":c=Or(c,"hover:bg-accent hover:text-accent-foreground");break;case"link":c=Or(c,"hover:underline underline-offset-4");break;default:c=Or(c,"bg-primary text-primary-foreground shadow-sm")}switch(i){case"sm":c=Or(c,"h-9 px-3 rounded-md");break;case"lg":c=Or(c,"h-11 px-8 rounded-md");break;case"icon":c=Or(c,"h-10 w-10");break}return M.jsx("button",{className:c,ref:l,...o,children:e})});rh.displayName="Button";function vb(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}Array(12).fill(0);let Vf=1;class _b{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:i,...o}=e,l=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Vf++,c=this.toasts.find(p=>p.id===l),d=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(p=>p.id===l?(this.publish({...p,...e,id:l,title:i}),{...p,...e,id:l,dismissible:d,title:i}):p):this.addToast({title:i,...o,dismissible:d,id:l}),l},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(i=>i({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let i;t.loading!==void 0&&(i=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(e instanceof Function?e():e);let l=i!==void 0,c;const d=o.then(async y=>{if(c=["resolve",y],rn.isValidElement(y))l=!1,this.create({id:i,type:"default",message:y});else if(Eb(y)&&!y.ok){l=!1;const E=typeof t.error=="function"?await t.error(`HTTP error! status: ${y.status}`):t.error,R=typeof t.description=="function"?await t.description(`HTTP error! status: ${y.status}`):t.description,b=typeof E=="object"&&!rn.isValidElement(E)?E:{message:E};this.create({id:i,type:"error",description:R,...b})}else if(y instanceof Error){l=!1;const E=typeof t.error=="function"?await t.error(y):t.error,R=typeof t.description=="function"?await t.description(y):t.description,b=typeof E=="object"&&!rn.isValidElement(E)?E:{message:E};this.create({id:i,type:"error",description:R,...b})}else if(t.success!==void 0){l=!1;const E=typeof t.success=="function"?await t.success(y):t.success,R=typeof t.description=="function"?await t.description(y):t.description,b=typeof E=="object"&&!rn.isValidElement(E)?E:{message:E};this.create({id:i,type:"success",description:R,...b})}}).catch(async y=>{if(c=["reject",y],t.error!==void 0){l=!1;const _=typeof t.error=="function"?await t.error(y):t.error,E=typeof t.description=="function"?await t.description(y):t.description,D=typeof _=="object"&&!rn.isValidElement(_)?_:{message:_};this.create({id:i,type:"error",description:E,...D})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),t.finally==null||t.finally.call(t)}),p=()=>new Promise((y,_)=>d.then(()=>c[0]==="reject"?_(c[1]):y(c[1])).catch(_));return typeof i!="string"&&typeof i!="number"?{unwrap:p}:Object.assign(i,{unwrap:p})},this.custom=(e,t)=>{const i=(t==null?void 0:t.id)||Vf++;return this.create({jsx:e(i),id:i,...t}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const An=new _b,wb=(n,e)=>{const t=(e==null?void 0:e.id)||Vf++;return An.addToast({title:n,...e,id:t}),t},Eb=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",Tb=wb,Ib=()=>An.toasts,Sb=()=>An.getActiveToasts(),Rb=Object.assign(Tb,{success:An.success,info:An.info,warning:An.warning,error:An.error,custom:An.custom,message:An.message,promise:An.promise,dismiss:An.dismiss,loading:An.loading},{getHistory:Ib,getToasts:Sb});vb("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");const Op=()=>({toast:({title:e,description:t,action:i,...o})=>Rb(e,{description:t,action:i,...o})});function Ko(...n){return n.filter(Boolean).join(" ")}const ih=rn.forwardRef(({className:n,...e},t)=>M.jsx("div",{className:Ko("rounded-lg border bg-card text-card-foreground shadow-sm",n),ref:t,...e}));ih.displayName="Card";const sh=rn.forwardRef(({className:n,...e},t)=>M.jsx("div",{className:Ko("flex flex-col space-y-1.5 p-6",n),ref:t,...e}));sh.displayName="CardHeader";const oh=rn.forwardRef(({className:n,...e},t)=>M.jsx("h3",{className:Ko("text-lg font-semibold leading-none tracking-tight",n),ref:t,...e}));oh.displayName="CardTitle";const Ab=rn.forwardRef(({className:n,...e},t)=>M.jsx("p",{className:Ko("text-sm text-muted-foreground",n),ref:t,...e}));Ab.displayName="CardDescription";const ah=rn.forwardRef(({className:n,...e},t)=>M.jsx("div",{className:Ko("p-6 pt-0",n),ref:t,...e}));ah.displayName="CardContent";const Cb=rn.forwardRef(({className:n,...e},t)=>M.jsx("div",{className:Ko("flex items-center p-6 pt-0",n),ref:t,...e}));Cb.displayName="CardFooter";const eE=Q.createContext(),Pl=()=>Q.useContext(eE),Pb=({children:n})=>{const[e,t]=Q.useState([]),[i,o]=Q.useState({summary:null,classification:null,plan:null,messagingGuide:null,name:""}),p={campaigns:e,fetchCampaigns:async()=>{const _=Mc().currentUser;if(!_){console.warn(" No user logged in, loading mock campaigns.");const E=[{id:"mock001",name:"Mock Campaign",summary:{purpose:"Test",audience:"Developers",goals:["issue awareness"]},classification:{primary_type:"Union",sub_type:"Workplace"}}];return t(E),E}try{const E=await _.getIdToken(),R=await fetch("/api/campaigns",{headers:{Authorization:`Bearer ${E}`}});if(!R.ok)throw new Error(`Server responded with ${R.status}`);const D=await R.json();return t(D),console.log(" Campaigns loaded:",D),D}catch(E){throw console.error(" Error loading campaigns:",E),E}},campaignData:i,updateCampaignData:y=>{o(_=>{const E={..._,...y};return console.log(" Campaign Context Updated:",E),E})},resetCampaignData:()=>{o({summary:null,classification:null,plan:null,messagingGuide:null,name:""}),console.log(" Campaign Context Reset")}};return M.jsx(eE.Provider,{value:p,children:n})};async function kb(n){console.log("classifyCampaign API call: Sending summary data:",n);try{const e=await fetch("/api/classify-campaign-type",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({summary:n})});console.log("classifyCampaign API call: Response Status:",e.status);const t=await e.json().catch(i=>{if(console.error("classifyCampaign API call: Failed to parse JSON response body",i),!e.ok)throw new Error(`Classifier API request failed with status ${e.status} and non-JSON response.`);return{message:"Received OK status but failed to parse response body."}});if(!e.ok)throw console.error("classifyCampaign API call: API Error Response Data:",t),new Error((t==null?void 0:t.message)||`Classifier API request failed with status ${e.status}`);if(console.log("classifyCampaign API call: API Response Data:",t),t&&t.match)return t.match;throw console.warn("classifyCampaign API call: Classification returned no match. Message:",t==null?void 0:t.message),new Error((t==null?void 0:t.message)||"Campaign could not be classified.")}catch(e){throw console.error(" Error in classifyCampaign API call:",e),e}}function xb(){const[n,e]=Q.useState(""),[t,i]=Q.useState([]),[o,l]=Q.useState(!1),[c,d]=Q.useState(null),p=pr(),{toast:y}=Op(),{updateCampaignData:_,resetCampaignData:E}=Pl(),R=Q.useRef(null);Q.useEffect(()=>{console.log("CampaignBuilder Effect: Resetting campaign data."),E()},[]),Q.useEffect(()=>{R.current&&(R.current.scrollTop=R.current.scrollHeight)},[t]);const D=async()=>{if(console.log("sendMessage: Called."),!n.trim())return;const V={role:"user",content:n},P=[...t,V];i(P),e(""),l(!0),d(null),console.log("sendMessage: Calling API /api/campaign-assistant");try{const W=await fetch("/api/campaign-assistant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({input:V.content,history:P})});if(console.log("sendMessage (Assistant): API Response Status:",W.status),!W.ok){const I=await W.json().catch(()=>({message:"Failed to parse assistant error response"}));throw console.error("sendMessage (Assistant): API Error Response Data:",I),new Error(I.message||`Assistant API request failed with status ${W.status}`)}const Y=await W.json();console.log("sendMessage (Assistant): API Response Data:",Y);const{aiMessage:Z,done:ne,structured:fe,classification_guess:pe,summary:x}=Y;if(Z?i(I=>[...I,{role:"assistant",content:Z}]):console.warn("sendMessage (Assistant): Received response but no aiMessage content."),ne&&fe){console.log("sendMessage: Assistant Done & Overall Structured. Proceeding with workflow."),console.log("CampaignBuilder: Object being sent to classifyCampaign helper (this is assistantSummaryObject):",JSON.stringify(x,null,2)),console.log("sendMessage: Updating context with summary:",x,"and AI's guess:",pe),_({summary:x,classification_guess:pe}),console.log("sendMessage: Calling classifyCampaign API with (this is assistantSummaryObject):",x);const I=await kb(x);console.log("sendMessage: Programmatic classification result received:",I),I?(console.log("sendMessage: Updating context with programmatic classification:",I),_({classification:I})):pe?console.log("sendMessage: Programmatic classification failed or null. AI guess was:",pe,". Consider if this guess should be used in context if no programmatic result."):(console.warn("sendMessage: No AI guess and programmatic classification failed/null."),y({variant:"default",title:"Campaign Classification",description:"Could not programmatically classify the campaign based on summary. Please review manually."})),console.log("sendMessage: Navigating to /campaign/review"),p("/campaign/review")}else ne&&!fe&&(console.warn("sendMessage: Done, but summary structure parsing failed by assistant. Staying on page."),d("Assistant finished, but the summary format was not understood. Please try rephrasing or review the chat.")),l(!1)}catch(W){console.error(" Error in sendMessage or Classification step:",W),y({variant:"destructive",title:"Error",description:W.message||"An unexpected error occurred."}),d(W.message||"An unexpected error occurred."),l(!1)}},b=V=>{V.key==="Enter"&&!V.shiftKey&&(V.preventDefault(),D())};return M.jsx("div",{className:"container py-8",children:M.jsxs(ih,{className:"max-w-3xl mx-auto",children:[M.jsx(sh,{children:M.jsx(oh,{children:"Describe Your Campaign"})}),M.jsx(ah,{children:M.jsxs("div",{className:"space-y-4",children:[M.jsxs("div",{ref:R,className:"min-h-[200px] max-h-[400px] overflow-y-auto border rounded p-4 bg-gray-50 flex flex-col gap-2",children:[t.length===0&&M.jsx("p",{className:"text-muted-foreground",children:"Start by describing what youre working on"}),t.map((V,P)=>M.jsxs("div",{className:`px-4 py-2 rounded max-w-[80%] text-sm whitespace-pre-wrap ${V.role==="user"?"bg-blue-500 text-white self-end ml-auto":"bg-gray-200 text-gray-800 self-start mr-auto"}`,children:[M.jsxs("strong",{children:[V.role==="user"?"You":"Assistant",":"]})," ",V.content??"*Missing message content*"]},P)),o&&M.jsx("p",{className:"text-muted-foreground self-start mr-auto px-4 py-2",children:"Processing... (includes classification)"})]}),M.jsx(Zw,{placeholder:"Type your message and hit Enter",value:n,onChange:V=>e(V.target.value),onKeyDown:b,rows:3,disabled:o}),M.jsx(rh,{onClick:D,disabled:o||!n.trim(),children:o?"Processing":"Send"}),c&&M.jsx("p",{className:"text-red-500 text-sm",children:c})]})})]})})}function bb(...n){return n.filter(Boolean).join(" ")}const tE=rn.forwardRef(({className:n,orientation:e="horizontal",decorative:t=!1,...i},o)=>M.jsx("div",{role:t?"none":"separator","aria-orientation":t?void 0:e,className:bb("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),ref:o,...i}));tE.displayName="Separator";const Nb=()=>{const{campaignData:n,updateCampaignData:e}=Pl(),[t,i]=Q.useState(""),[o,l]=Q.useState(!1),c=pr(),{toast:d}=Op();Q.useEffect(()=>{(async()=>{if(!n.summary){d({variant:"destructive",title:"Missing Summary",description:"Please define your campaign first."}),c("/app/campaign/new");return}l(!0);try{const _=await fetch("/api/campaign-plan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.summary)});if(!_.ok)throw new Error("Failed to fetch campaign plan");const E=await _.json();i(E.plan),e({plan:E.plan})}catch(_){console.error("Error fetching campaign plan:",_),d({variant:"destructive",title:"Error generating plan",description:_.message})}finally{l(!1)}})()},[n.summary]);const p=()=>{c("/app/campaign/message")};return M.jsx("div",{className:"container py-8",children:M.jsxs(ih,{className:"max-w-4xl mx-auto",children:[M.jsx(sh,{children:M.jsx(oh,{children:"Suggested Campaign Plan"})}),M.jsx(ah,{children:o?M.jsx("p",{children:"Generating plan..."}):M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"whitespace-pre-wrap text-sm bg-gray-50 p-4 rounded border mb-4 max-h-[500px] overflow-y-auto",children:t||"No plan available."}),M.jsx(tE,{}),M.jsx(rh,{onClick:p,className:"mt-4",children:"Next: Develop Messaging"})]})})]})})};function Ob(){const[n,e]=Q.useState(!0),[t,i]=Q.useState(""),{campaignData:o,updateCampaignData:l}=Pl(),c=pr();Q.useEffect(()=>{if(!o.summary){i("Campaign summary is missing. Please define the campaign first."),console.error("CampaignMessagingGuide: Missing summary in context."),e(!1);return}if(o.messagingGuide){console.log("CampaignMessagingGuide: Using existing guide from context."),e(!1);return}console.log("CampaignMessagingGuide: Fetching guide with summary:",o.summary),e(!0),i(""),tt.post("/api/messaging-guide",o.summary).then(p=>{console.log("CampaignMessagingGuide: Received guide data:",p.data),l({messagingGuide:p.data.messagingGuide}),e(!1)}).catch(p=>{var y,_;console.error("CampaignMessagingGuide: Failed to generate messaging guide:",p),i("Failed to generate messaging guide. "+(((_=(y=p.response)==null?void 0:y.data)==null?void 0:_.error)||p.message)),l({messagingGuide:{error:"Guide generation failed"}}),e(!1)})},[o.summary,o.messagingGuide,l,c]);const d=()=>{var p;return n?M.jsx("p",{className:"text-gray-500",children:"Thinking writing guide..."}):t?M.jsx("p",{className:"text-red-600",children:t}):(p=o.messagingGuide)!=null&&p.error?M.jsxs("p",{className:"text-red-600",children:["Error: ",o.messagingGuide.error]}):o.messagingGuide?M.jsx("pre",{className:"whitespace-pre-wrap bg-white shadow p-4 rounded text-sm",children:o.messagingGuide}):M.jsx("p",{className:"text-gray-500",children:"No messaging guide generated yet."})};return M.jsxs("div",{className:"p-6 space-y-4 max-w-4xl mx-auto",children:[M.jsx("h1",{className:"text-3xl font-bold",children:" Messaging Guide"}),d(),M.jsxs("div",{className:"mt-6 flex space-x-4 border-t pt-4",children:[M.jsx("button",{onClick:()=>c("/campaign/plan"),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",children:"Review Campaign Plan "}),M.jsx("button",{onClick:()=>c("/campaign/review"),className:"bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded",children:"Review & Save "}),M.jsx("button",{onClick:()=>c("/app/campaign/new"),className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded",children:"Back to Builder"})]})]})}function Db(){const{campaignData:n,updateCampaignData:e}=Pl(),{getIdToken:t,currentUser:i}=Cw(),[o,l]=Q.useState(!1),[c,d]=Q.useState(""),[p,y]=Q.useState(n.name||""),_=pr(),E=async()=>{var b,V,P,W,Y;if(!i){d("You must be logged in to save.");return}if(!p.trim()){d("Please provide a name for your campaign.");return}l(!0),d("");try{const Z=await t();if(!Z){d("Authentication error. Please log in again."),l(!1);return}const ne={...n,name:p.trim()};(b=ne.plan)!=null&&b.error&&(ne.plan=null),(V=ne.messagingGuide)!=null&&V.error&&(ne.messagingGuide=null),(P=ne.classification)!=null&&P.error&&(ne.classification=null),console.log(" Saving campaign data:",ne);const fe=await tt.post("/api/campaigns/create",ne,{headers:{Authorization:`Bearer ${Z}`}});console.log(" Campaign saved successfully:",fe.data),_("/dashboard")}catch(Z){console.error(" Error saving campaign:",Z),d("Failed to save campaign. "+(((Y=(W=Z.response)==null?void 0:W.data)==null?void 0:Y.error)||Z.message))}finally{l(!1)}},R=(b,V)=>{let P="Not generated yet.";return V!=null&&V.error?P=M.jsxs("span",{className:"text-red-500",children:["Error: ",V.error]}):V&&(P=typeof V=="string"?V:JSON.stringify(V,null,2)),M.jsxs("div",{className:"mb-4 p-4 border rounded shadow-sm bg-white",children:[M.jsx("h3",{className:"text-lg font-semibold mb-2 border-b pb-1",children:b}),M.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:P})]})},D=b=>{let V="Not classified.";return b!=null&&b.error?V=M.jsxs("span",{className:"text-red-500",children:["Error: ",b.error]}):b!=null&&b.type?V=`Type: ${b.type}
Description: ${b.description}
Suggested Actions: ${b.suggested_actions||"None"}`:b===null&&n.summary&&(V="No specific type matched based on summary."),M.jsxs("div",{className:"mb-4 p-4 border rounded shadow-sm bg-white",children:[M.jsx("h3",{className:"text-lg font-semibold mb-2 border-b pb-1",children:"Classification"}),M.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:V})]})};return M.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-4",children:[M.jsx("h1",{className:"text-3xl font-bold",children:" Review & Save Campaign"}),M.jsxs("div",{className:"mb-4",children:[M.jsx("label",{htmlFor:"campaignName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Campaign Name"}),M.jsx("input",{type:"text",id:"campaignName",value:p,onChange:b=>{y(b.target.value)},placeholder:"Enter a name for this campaign",className:"w-full p-2 border rounded focus:ring-2 focus:ring-blue-500",required:!0})]}),R("Campaign Summary",n.summary),D(n.classification),R("Campaign Plan",n.plan),R("Messaging Guide",n.messagingGuide),c&&M.jsx("p",{className:"text-red-600 mt-2",children:c}),M.jsxs("div",{className:"mt-6 flex space-x-4 border-t pt-4",children:[M.jsx("button",{onClick:E,disabled:o||!p.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded disabled:opacity-50",children:o?"Saving...":"Save Campaign"}),M.jsx("button",{onClick:()=>_("/campaign/plan"),className:"bg-gray-300 hover:bg-gray-400 text-black px-4 py-2 rounded",children:"Back to Plan"})]})]})}function Lb(){const{campaignData:n}=Pl(),{messagingGuide:e,summary:t}=n||{},{toast:i}=Op(),[o,l]=Q.useState("SMS"),[c,d]=Q.useState(""),[p,y]=Q.useState(!1),_=["SMS","Social Media Post","Email Intro","Poster Slogan","Speech Excerpt"],E=async()=>{y(!0),d("");try{const D=await(await fetch("/api/generate-content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({format:o,messagingGuide:e,summary:t})})).json();D.content?d(D.content):i({variant:"destructive",title:"No content returned"})}catch(R){i({variant:"destructive",title:"Error generating content",description:R.message})}finally{y(!1)}};return M.jsx("div",{className:"container py-8",children:M.jsxs(ih,{className:"max-w-4xl mx-auto",children:[M.jsx(sh,{children:M.jsx(oh,{children:"Generate Campaign Content"})}),M.jsxs(ah,{className:"space-y-4",children:[M.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Content Format:"}),M.jsx("select",{value:o,onChange:R=>l(R.target.value),className:"w-full p-2 border rounded",children:_.map(R=>M.jsx("option",{value:R,children:R},R))}),M.jsx(rh,{onClick:E,disabled:p,children:p?"Generating":"Generate Content"}),c&&M.jsxs("div",{className:"mt-6 whitespace-pre-wrap border rounded p-4 bg-gray-50",children:[M.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Generated Content:"}),M.jsx("div",{children:c})]})]})]})})}function Vb(){return console.log("--- Rendering App Component (Router Setup) ---"),M.jsxs(M.Fragment,{children:[" ",console.log("--- App.jsx: Before <Routes> ---"),M.jsxs(oI,{children:[M.jsx(Rn,{path:"/",element:M.jsx(yI,{})}),M.jsx(Rn,{path:"/signup",element:M.jsx(Lk,{})}),M.jsx(Rn,{path:"/login",element:M.jsx(Vk,{})}),M.jsx(Rn,{path:"/onboarding",element:M.jsx(Mk,{})}),M.jsx(Rn,{path:"/onboarding/summary",element:M.jsx(Fk,{})}),M.jsx(Rn,{path:"/dashboard",element:M.jsx(gb,{})}),M.jsx(Rn,{path:"/app/campaign/new",element:M.jsxs(M.Fragment,{children:[console.log("--- App.jsx: Matched /app/campaign/new, evaluating element... ---"),M.jsx(xb,{})," "]})}),M.jsx(Rn,{path:"/app/campaign/plan",element:M.jsx(Nb,{})}),M.jsx(Rn,{path:"/app/campaign/message",element:M.jsx(Ob,{})}),M.jsx(Rn,{path:"/campaign/review",element:M.jsx(Db,{})}),M.jsx(Rn,{path:"/campaign/content",element:M.jsx(Lb,{})})]}),console.log("--- App.jsx: After <Routes> ---")]})}mT.createRoot(document.getElementById("root")).render(M.jsx(rn.StrictMode,{children:M.jsxs(fI,{children:[M.jsxs(Uk,{children:["        ",M.jsxs(Pb,{children:["    ",M.jsx(Vb,{})]}),"   "]}),"       "]})}));
//# sourceMappingURL=index-Cp6HoTI0.js.map
