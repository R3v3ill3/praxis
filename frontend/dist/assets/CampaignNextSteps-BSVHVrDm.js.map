{"version":3,"file":"CampaignNextSteps-BSVHVrDm.js","sources":["../../src/pages/CampaignNextSteps.jsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCampaign } from '../contexts/CampaignContext';\nimport { useAuth } from '../contexts/AuthContext';\nimport { doc, updateDoc } from 'firebase/firestore';\nimport { db } from '../firebase';\n\nexport default function CampaignNextSteps() {\n  const { campaignData } = useCampaign();\n  const { user } = useAuth();\n  const navigate = useNavigate();\n\n  const summary = campaignData?.summary || {};\n  const classification = campaignData?.classification || {};\n\n  const [rankedGoals, setRankedGoals] = useState(summary.goals || []);\n  const [isSaving, setIsSaving] = useState(false);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n\n  const handleReorder = (fromIndex, toIndex) => {\n    const updated = [...rankedGoals];\n    const [moved] = updated.splice(fromIndex, 1);\n    updated.splice(toIndex, 0, moved);\n    setRankedGoals(updated);\n  };\n\n  const saveRankedGoals = async () => {\n    if (!user?.uid || !campaignData?.campaignId) return;\n    setIsSaving(true);\n    try {\n      const campaignRef = doc(db, 'users', user.uid, 'campaigns', campaignData.campaignId);\n      await updateDoc(campaignRef, { ranked_goals: rankedGoals });\n      setSaveSuccess(true);\n    } catch (err) {\n      console.error('Error saving ranked goals:', err);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleNavigate = (path) => {\n    navigate(path);\n  };\n\n  return (\n    <div className=\"p-6 max-w-3xl mx-auto bg-white shadow-md rounded\">\n      <h2 className=\"text-2xl font-bold mb-4\">Campaign Ready</h2>\n      <p className=\"mb-6\">Here’s your campaign summary. What would you like to do next?</p>\n\n      <div className=\"bg-gray-100 p-4 rounded mb-6\">\n        <h3 className=\"text-lg font-bold mb-2\">Campaign Summary</h3>\n        <ul className=\"text-sm space-y-1\">\n          <li><strong>Purpose:</strong> {summary?.purpose}</li>\n          <li><strong>Audience:</strong> {summary?.audience}</li>\n          <li><strong>Target:</strong> {summary?.target}</li>\n          <li><strong>Intent:</strong> {summary?.intent}</li>\n          <li><strong>Location:</strong> {summary?.location}</li>\n          <li><strong>Goals:</strong>\n            <ol className=\"list-decimal ml-6\">\n              {summary?.goals?.map((goal, i) => <li key={i}>{goal}</li>)}\n            </ol>\n          </li>\n        </ul>\n      </div>\n\n      <div className=\"bg-gray-50 p-4 rounded mb-6 text-sm\">\n        <h4 className=\"font-semibold mb-2\">Classification</h4>\n        <ul>\n          <li><strong>Type:</strong> {classification?.primary_type}</li>\n          <li><strong>Subtype:</strong> {classification?.secondary_type}</li>\n          <li><strong>Use Case:</strong> {classification?.sub_type}</li>\n          <li><strong>Confidence Score:</strong> {classification?.confidence}</li>\n        </ul>\n      </div>\n\n      {summary.goals && summary.goals.length > 0 && (\n        <div className=\"bg-white p-4 border rounded mb-6\">\n          <h4 className=\"text-md font-semibold mb-2\">Rank these goals by importance</h4>\n          <ul className=\"space-y-2\">\n            {rankedGoals.map((goal, index) => (\n              <li key={index} className=\"bg-gray-100 p-2 rounded flex justify-between items-center\">\n                <span>{index + 1}. {goal}</span>\n                <div className=\"space-x-1\">\n                  {index > 0 && (\n                    <button className=\"text-sm px-2 py-1 bg-blue-100 rounded\"\n                      onClick={() => handleReorder(index, index - 1)}>↑</button>\n                  )}\n                  {index < rankedGoals.length - 1 && (\n                    <button className=\"text-sm px-2 py-1 bg-blue-100 rounded\"\n                      onClick={() => handleReorder(index, index + 1)}>↓</button>\n                  )}\n                </div>\n              </li>\n            ))}\n          </ul>\n          <button\n            className=\"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700\"\n            onClick={saveRankedGoals}\n            disabled={isSaving}\n          >\n            {isSaving ? 'Saving…' : 'Save Ranking'}\n          </button>\n          {saveSuccess && <p className=\"text-green-600 mt-2\">✅ Ranking saved</p>}\n        </div>\n      )}\n\n      <div className=\"space-y-2\">\n        <button onClick={() => handleNavigate('/app/campaign/message')} className=\"block w-full px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\">\n          Build Campaign Messaging\n        </button>\n        <button onClick={() => handleNavigate('/campaign/plan')} className=\"block w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700\">\n          Build Action Plan\n        </button>\n        <button onClick={() => handleNavigate('/campaign/classification-review')} className=\"block w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700\">\n          Review Campaign Details\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":["CampaignNextSteps","campaignData","useCampaign","user","useAuth","navigate","useNavigate","summary","classification","rankedGoals","setRankedGoals","useState","isSaving","setIsSaving","saveSuccess","setSaveSuccess","handleReorder","fromIndex","toIndex","updated","moved","saveRankedGoals","campaignRef","doc","db","updateDoc","err","handleNavigate","path","jsxs","jsx","goal","i","index"],"mappings":"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"}